var VuexInstantsPlugin=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";(function(t){var n=("undefined"!=typeof window?window:void 0!==t?t:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function r(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function o(t){return null!==t&&"object"==typeof t}var i=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"==typeof n?n():n)||{}},a={namespaced:{configurable:!0}};a.namespaced.get=function(){return!!this._rawModule.namespaced},i.prototype.addChild=function(t,e){this._children[t]=e},i.prototype.removeChild=function(t){delete this._children[t]},i.prototype.getChild=function(t){return this._children[t]},i.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},i.prototype.forEachChild=function(t){r(this._children,t)},i.prototype.forEachGetter=function(t){this._rawModule.getters&&r(this._rawModule.getters,t)},i.prototype.forEachAction=function(t){this._rawModule.actions&&r(this._rawModule.actions,t)},i.prototype.forEachMutation=function(t){this._rawModule.mutations&&r(this._rawModule.mutations,t)},Object.defineProperties(i.prototype,a);var u=function(t){this.register([],t,!1)};u.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},u.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return t+((e=e.getChild(n)).namespaced?n+"/":"")}),"")},u.prototype.update=function(t){!function t(e,n,r){0;if(n.update(r),r.modules)for(var o in r.modules){if(!n.getChild(o))return void 0;t(e.concat(o),n.getChild(o),r.modules[o])}}([],this.root,t)},u.prototype.register=function(t,e,n){var o=this;void 0===n&&(n=!0);var a=new i(e,n);0===t.length?this.root=a:this.get(t.slice(0,-1)).addChild(t[t.length-1],a);e.modules&&r(e.modules,(function(e,r){o.register(t.concat(r),e,n)}))},u.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];e.getChild(n).runtime&&e.removeChild(n)};var s;var c=function(t){var e=this;void 0===t&&(t={}),!s&&"undefined"!=typeof window&&window.Vue&&y(window.Vue);var r=t.plugins;void 0===r&&(r=[]);var o=t.strict;void 0===o&&(o=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new u(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new s,this._makeLocalGettersCache=Object.create(null);var i=this,a=this.dispatch,c=this.commit;this.dispatch=function(t,e){return a.call(i,t,e)},this.commit=function(t,e,n){return c.call(i,t,e,n)},this.strict=o;var f=this._modules.root.state;d(this,f,[],this._modules.root),h(this,f),r.forEach((function(t){return t(e)})),(void 0!==t.devtools?t.devtools:s.config.devtools)&&function(t){n&&(t._devtoolHook=n,n.emit("vuex:init",t),n.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){n.emit("vuex:mutation",t,e)})))}(this)},f={state:{configurable:!0}};function l(t,e){return e.indexOf(t)<0&&e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function p(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;d(t,n,[],t._modules.root,!0),h(t,n,e)}function h(t,e,n){var o=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,a={};r(i,(function(e,n){a[n]=function(t,e){return function(){return t(e)}}(e,t),Object.defineProperty(t.getters,n,{get:function(){return t._vm[n]},enumerable:!0})}));var u=s.config.silent;s.config.silent=!0,t._vm=new s({data:{$$state:e},computed:a}),s.config.silent=u,t.strict&&function(t){t._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}(t),o&&(n&&t._withCommit((function(){o._data.$$state=null})),s.nextTick((function(){return o.$destroy()})))}function d(t,e,n,r,o){var i=!n.length,a=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[a],t._modulesNamespaceMap[a]=r),!i&&!o){var u=v(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit((function(){s.set(u,c,r.state)}))}var f=r.context=function(t,e,n){var r=""===e,o={dispatch:r?t.dispatch:function(n,r,o){var i=m(n,r,o),a=i.payload,u=i.options,s=i.type;return u&&u.root||(s=e+s),t.dispatch(s,a)},commit:r?t.commit:function(n,r,o){var i=m(n,r,o),a=i.payload,u=i.options,s=i.type;u&&u.root||(s=e+s),t.commit(s,a,u)}};return Object.defineProperties(o,{getters:{get:r?function(){return t.getters}:function(){return function(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach((function(o){if(o.slice(0,r)===e){var i=o.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[o]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}(t,e)}},state:{get:function(){return v(t.state,n)}}}),o}(t,a,n);r.forEachMutation((function(e,n){!function(t,e,n,r){(t._mutations[e]||(t._mutations[e]=[])).push((function(e){n.call(t,r.state,e)}))}(t,a+n,e,f)})),r.forEachAction((function(e,n){var r=e.root?n:a+n,o=e.handler||e;!function(t,e,n,r){(t._actions[e]||(t._actions[e]=[])).push((function(e){var o,i=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return(o=i)&&"function"==typeof o.then||(i=Promise.resolve(i)),t._devtoolHook?i.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):i}))}(t,r,o,f)})),r.forEachGetter((function(e,n){!function(t,e,n,r){if(t._wrappedGetters[e])return void 0;t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)}}(t,a+n,e,f)})),r.forEachChild((function(r,i){d(t,e,n.concat(i),r,o)}))}function v(t,e){return e.reduce((function(t,e){return t[e]}),t)}function m(t,e,n){return o(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}function y(t){s&&t===s||
/**
 * vuex v3.1.3
 * (c) 2020 Evan You
 * @license MIT
 */
function(t){if(Number(t.version.split(".")[0])>=2)t.mixin({beforeCreate:n});else{var e=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[n].concat(t.init):n,e.call(this,t)}}function n(){var t=this.$options;t.store?this.$store="function"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}}(s=t)}f.state.get=function(){return this._vm._data.$$state},f.state.set=function(t){0},c.prototype.commit=function(t,e,n){var r=this,o=m(t,e,n),i=o.type,a=o.payload,u=(o.options,{type:i,payload:a}),s=this._mutations[i];s&&(this._withCommit((function(){s.forEach((function(t){t(a)}))})),this._subscribers.slice().forEach((function(t){return t(u,r.state)})))},c.prototype.dispatch=function(t,e){var n=this,r=m(t,e),o=r.type,i=r.payload,a={type:o,payload:i},u=this._actions[o];if(u){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(a,n.state)}))}catch(t){0}return(u.length>1?Promise.all(u.map((function(t){return t(i)}))):u[0](i)).then((function(t){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(a,n.state)}))}catch(t){0}return t}))}},c.prototype.subscribe=function(t){return l(t,this._subscribers)},c.prototype.subscribeAction=function(t){return l("function"==typeof t?{before:t}:t,this._actionSubscribers)},c.prototype.watch=function(t,e,n){var r=this;return this._watcherVM.$watch((function(){return t(r.state,r.getters)}),e,n)},c.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._vm._data.$$state=t}))},c.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),d(this,this.state,t,this._modules.get(t),n.preserveState),h(this,this.state)},c.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var n=v(e.state,t.slice(0,-1));s.delete(n,t[t.length-1])})),p(this)},c.prototype.hotUpdate=function(t){this._modules.update(t),p(this,!0)},c.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(c.prototype,f);var g=M((function(t,e){var n={};return O(e).forEach((function(e){var r=e.key,o=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=j(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"==typeof o?o.call(this,e,n):e[o]},n[r].vuex=!0})),n})),_=M((function(t,e){var n={};return O(e).forEach((function(e){var r=e.key,o=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.commit;if(t){var i=j(this.$store,"mapMutations",t);if(!i)return;r=i.context.commit}return"function"==typeof o?o.apply(this,[r].concat(e)):r.apply(this.$store,[o].concat(e))}})),n})),b=M((function(t,e){var n={};return O(e).forEach((function(e){var r=e.key,o=e.val;o=t+o,n[r]=function(){if(!t||j(this.$store,"mapGetters",t))return this.$store.getters[o]},n[r].vuex=!0})),n})),w=M((function(t,e){var n={};return O(e).forEach((function(e){var r=e.key,o=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var i=j(this.$store,"mapActions",t);if(!i)return;r=i.context.dispatch}return"function"==typeof o?o.apply(this,[r].concat(e)):r.apply(this.$store,[o].concat(e))}})),n}));function O(t){return function(t){return Array.isArray(t)||o(t)}(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function M(t){return function(e,n){return"string"!=typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function j(t,e,n){return t._modulesNamespaceMap[n]}var x={Store:c,install:y,version:"3.1.3",mapState:g,mapMutations:_,mapGetters:b,mapActions:w,createNamespacedHelpers:function(t){return{mapState:g.bind(null,t),mapGetters:b.bind(null,t),mapMutations:_.bind(null,t),mapActions:w.bind(null,t)}}};e.a=x}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var r=n(0);function o(t,e,n){if(void 0===e&&(e=""),void 0===n&&(n=TypeError),!t())throw new n(e)}var i={get:function(t,e){if(e in t)return t[e];if(t.data){if("length"===e)return t.data.length;if(e in t.data[0])return function(t,e){var n=t.root.state,r=n[e];o((function(){return!!r}));var i=t.data.flatMap((function(t){return t[e]})).map((function(t){return r.byIds[t]})),a=n[e].hasAndBelongsToMany;return new c(i,t.root,e,a)}(t,e);if(t.hasAndBelongsToMany&&t.hasAndBelongsToMany[e])return function(t,e){var n=t.root.state,r=t.hasAndBelongsToMany&&t.hasAndBelongsToMany[e];o((function(){return!!r}));var i=r.associationForeignKey,a=r.foreignKey,u=r.joinName,s=r.theirName,f=n[u],l=n[s];o((function(){return!!f&&!!l}));var p=Object.values(f.byIds),h=t.data.flatMap((function(t){return p.filter((function(e){return e[a]===t.id}))})).map((function(t){return l.byIds[t[i]]})),d=n[s].hasAndBelongsToMany;return new c(h,t.root,s,d)}(t,e);if(function(t){return/\d+/.test(t)}(e))return t.data[e];if("function"==typeof t.data[e])return t.data[e].bind(t.data)}throw new TypeError("知らんがな: "+e+".")}};var a,u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s=function(){function t(t,e,n,r){this.nextIdx=0,o((function(){return Array.isArray(t)}),t+" must be type Array."),this.name=n,this.root=e,this.data=t,this.hasAndBelongsToMany=r}return t.prototype[Symbol.iterator]=function(){var t=this.data,e=this.nextIdx;return{next:function(){var n;return e<t.length&&(n=t[e])?(e+=1,{value:n,done:!1}):{value:n,done:!0}}}},t.prototype.pluck=function(t){return this.data.flatMap((function(e){return t.reduce((function(t,n){var r;return u(u({},t),((r={})[n]=e[n],r))}),{})}))},t.prototype.ids=function(){return this.data.map((function(t){return t.id}))},t}(),c=function(t,e,n,r){var o=new s(t,e,n,r);return new Proxy(o,i)},f=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};e.default={install:function(){var t=window.Vuex||r.a;t.Store=function(t){function e(e){return function t(e){if(e&&(e.instants=l(l({},h),e.instants),e.modules))for(var n=0,r=Object.values(e.modules);n<r.length;n++){t(r[n])}}(e),function t(e){if(e&&(e.instants&&(e.getters=e.getters||{},e.getters=l(l({},e.getters),e.instants)),e.modules))for(var n=0,r=Object.values(e.modules);n<r.length;n++){t(r[n])}}(e),t.call(this,e)||this}return f(e,t),e}(t.Store),t.Store.prototype.capture=function(t,e){var n=this;o((function(){return!n.instants||t in n.instants}),"\n"+t+" is not defined in store.instans.\n\nDon't you forget adding "+t+" in store.instans?\n");var r=Object.getOwnPropertyDescriptor(this.getters,t);if(r){o((function(){return!!r.get}),"Unknown getter, "+t);var i=r.get.call(this)(e),a=function(t){var e=t.split("/").slice(0,-1);return e[e.length-1]}(t),u=this.state[a].hasAndBelongsToMany;return Array.isArray(i)?new c(i,this,a,u):i}}}};var p=function(t,e,n){return t.filter((function(t){for(var r=e[t],o=0,i=Object.entries(n);o<i.length;o++){var a=i[o],u=a[0],s=a[1];if("function"==typeof s){if(!s(r))return!1}else if(r[u]!==s)return!1}return!0})).map((function(t){return e[t]}))},h={where:function(t){var e=t.allIds,n=t.byIds;return function(t){return p(e,n,t)}},findBy:function(t){var e=t.allIds,n=t.byIds;return function(t){var r=p(e,n,t);return o((function(){return r&&r[0]}),"Record not found."),r[0]}},find:function(t){var e=t.byIds;return function(t){var n=e[t];return o((function(){return!!n}),"not found "+t),n}}}}]).default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9WdWV4SW5zdGFudHNQbHVnaW4vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVnVleEluc3RhbnRzUGx1Z2luLy4vbm9kZV9tb2R1bGVzL3Z1ZXgvZGlzdC92dWV4LmVzbS5qcyIsIndlYnBhY2s6Ly9WdWV4SW5zdGFudHNQbHVnaW4vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovL1Z1ZXhJbnN0YW50c1BsdWdpbi8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly9WdWV4SW5zdGFudHNQbHVnaW4vLi9zcmMvZm9yZWlnbi1xdWVyaWFibGUudHMiLCJ3ZWJwYWNrOi8vVnVleEluc3RhbnRzUGx1Z2luLy4vc3JjL3JlbGF0aW9uLnRzIiwid2VicGFjazovL1Z1ZXhJbnN0YW50c1BsdWdpbi8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImRldnRvb2xIb29rIiwid2luZG93IiwiZ2xvYmFsIiwiX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyIsImZvckVhY2hWYWx1ZSIsIm9iaiIsImZuIiwia2V5cyIsImZvckVhY2giLCJpc09iamVjdCIsIk1vZHVsZSIsInJhd01vZHVsZSIsInJ1bnRpbWUiLCJ0aGlzIiwiX2NoaWxkcmVuIiwiX3Jhd01vZHVsZSIsInJhd1N0YXRlIiwic3RhdGUiLCJwcm90b3R5cGVBY2Nlc3NvcnMiLCJuYW1lc3BhY2VkIiwiY29uZmlndXJhYmxlIiwiYWRkQ2hpbGQiLCJyZW1vdmVDaGlsZCIsImdldENoaWxkIiwidXBkYXRlIiwiYWN0aW9ucyIsIm11dGF0aW9ucyIsImdldHRlcnMiLCJmb3JFYWNoQ2hpbGQiLCJmb3JFYWNoR2V0dGVyIiwiZm9yRWFjaEFjdGlvbiIsImZvckVhY2hNdXRhdGlvbiIsImRlZmluZVByb3BlcnRpZXMiLCJNb2R1bGVDb2xsZWN0aW9uIiwicmF3Um9vdE1vZHVsZSIsInJlZ2lzdGVyIiwicGF0aCIsInJlZHVjZSIsInJvb3QiLCJnZXROYW1lc3BhY2UiLCJuYW1lc3BhY2UiLCJ0YXJnZXRNb2R1bGUiLCJuZXdNb2R1bGUiLCJjb25jYXQiLCJ0aGlzJDEiLCJsZW5ndGgiLCJzbGljZSIsInJhd0NoaWxkTW9kdWxlIiwidW5yZWdpc3RlciIsInBhcmVudCIsIlZ1ZSIsIlN0b3JlIiwib3B0aW9ucyIsImluc3RhbGwiLCJwbHVnaW5zIiwic3RyaWN0IiwiX2NvbW1pdHRpbmciLCJfYWN0aW9ucyIsIl9hY3Rpb25TdWJzY3JpYmVycyIsIl9tdXRhdGlvbnMiLCJfd3JhcHBlZEdldHRlcnMiLCJfbW9kdWxlcyIsIl9tb2R1bGVzTmFtZXNwYWNlTWFwIiwiX3N1YnNjcmliZXJzIiwiX3dhdGNoZXJWTSIsIl9tYWtlTG9jYWxHZXR0ZXJzQ2FjaGUiLCJzdG9yZSIsImRpc3BhdGNoIiwiY29tbWl0IiwidHlwZSIsInBheWxvYWQiLCJpbnN0YWxsTW9kdWxlIiwicmVzZXRTdG9yZVZNIiwicGx1Z2luIiwidW5kZWZpbmVkIiwiZGV2dG9vbHMiLCJjb25maWciLCJfZGV2dG9vbEhvb2siLCJlbWl0Iiwib24iLCJ0YXJnZXRTdGF0ZSIsInJlcGxhY2VTdGF0ZSIsInN1YnNjcmliZSIsIm11dGF0aW9uIiwiZGV2dG9vbFBsdWdpbiIsInByb3RvdHlwZUFjY2Vzc29ycyQxIiwiZ2VuZXJpY1N1YnNjcmliZSIsInN1YnMiLCJpbmRleE9mIiwicHVzaCIsInNwbGljZSIsInJlc2V0U3RvcmUiLCJob3QiLCJvbGRWbSIsIl92bSIsIndyYXBwZWRHZXR0ZXJzIiwiY29tcHV0ZWQiLCJhcmciLCJwYXJ0aWFsIiwic2lsZW50IiwiZGF0YSIsIiQkc3RhdGUiLCIkd2F0Y2giLCJfZGF0YSIsImRlZXAiLCJzeW5jIiwiZW5hYmxlU3RyaWN0TW9kZSIsIl93aXRoQ29tbWl0IiwibmV4dFRpY2siLCIkZGVzdHJveSIsInJvb3RTdGF0ZSIsImlzUm9vdCIsInBhcmVudFN0YXRlIiwiZ2V0TmVzdGVkU3RhdGUiLCJtb2R1bGVOYW1lIiwic2V0IiwibG9jYWwiLCJjb250ZXh0Iiwibm9OYW1lc3BhY2UiLCJfdHlwZSIsIl9wYXlsb2FkIiwiX29wdGlvbnMiLCJhcmdzIiwidW5pZnlPYmplY3RTdHlsZSIsImdldHRlcnNQcm94eSIsInNwbGl0UG9zIiwibG9jYWxUeXBlIiwibWFrZUxvY2FsR2V0dGVycyIsIm1ha2VMb2NhbENvbnRleHQiLCJoYW5kbGVyIiwicmVnaXN0ZXJNdXRhdGlvbiIsImFjdGlvbiIsInZhbCIsInJlcyIsInJvb3RHZXR0ZXJzIiwidGhlbiIsIlByb21pc2UiLCJyZXNvbHZlIiwiY2F0Y2giLCJlcnIiLCJyZWdpc3RlckFjdGlvbiIsInJhd0dldHRlciIsInJlZ2lzdGVyR2V0dGVyIiwiY2hpbGQiLCJfVnVlIiwiTnVtYmVyIiwidmVyc2lvbiIsInNwbGl0IiwibWl4aW4iLCJiZWZvcmVDcmVhdGUiLCJ2dWV4SW5pdCIsIl9pbml0IiwiaW5pdCIsIiRvcHRpb25zIiwiJHN0b3JlIiwiYXBwbHlNaXhpbiIsInYiLCJyZWYiLCJlbnRyeSIsInN1YiIsImZpbHRlciIsImJlZm9yZSIsImUiLCJhbGwiLCJtYXAiLCJhZnRlciIsInN1YnNjcmliZUFjdGlvbiIsIndhdGNoIiwiY2IiLCJyZWdpc3Rlck1vZHVsZSIsInByZXNlcnZlU3RhdGUiLCJ1bnJlZ2lzdGVyTW9kdWxlIiwiZGVsZXRlIiwiaG90VXBkYXRlIiwibmV3T3B0aW9ucyIsImNvbW1pdHRpbmciLCJtYXBTdGF0ZSIsIm5vcm1hbGl6ZU5hbWVzcGFjZSIsInN0YXRlcyIsIm5vcm1hbGl6ZU1hcCIsImdldE1vZHVsZUJ5TmFtZXNwYWNlIiwidnVleCIsIm1hcE11dGF0aW9ucyIsImxlbiIsImFyZ3VtZW50cyIsImFwcGx5IiwibWFwR2V0dGVycyIsIm1hcEFjdGlvbnMiLCJBcnJheSIsImlzQXJyYXkiLCJpc1ZhbGlkTWFwIiwiY2hhckF0IiwiaGVscGVyIiwiaW5kZXhfZXNtIiwiY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMiLCJnIiwiRnVuY3Rpb24iLCJhc3NlcnQiLCJjb25kaXRpb24iLCJtc2ciLCJlcnJvckNscyIsInRhcmdldCIsInJlbGF0aW9uIiwiY2hpbGROYW1lIiwiY2hpbGRTdGF0ZSIsImNoaWxkcmVuIiwiZmxhdE1hcCIsIngiLCJpZCIsImJ5SWRzIiwiaGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbiIsImhhc0FuZEJlbG9uZ3NUb01hbnkiLCJjaGlsZFJlbGF0aW9uIiwiYXNzb2NpYXRpb25Gb3JlaWduS2V5IiwiZm9yZWlnbktleSIsImpvaW5OYW1lIiwidGhlaXJOYW1lIiwiaW50ZXJtZWRpYXRlU3RhdGUiLCJpbnRlcm1lZGlhdGVzIiwidmFsdWVzIiwieSIsImhhc0FuZEJlbG9uZ3NUb01hbnlSZWxhdGlvbiIsInRlc3QiLCJpc0luZGV4TmFtZSIsIlR5cGVFcnJvciIsInJvb3RNb2R1bGUiLCJuZXh0SWR4IiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInBsdWNrIiwiYWNjIiwiaWRzIiwiUHJveHkiLCJWdWV4IiwiZGVmaW5lRGVmYXVsdEluc3RhbnRzIiwiaW5zdGFudHMiLCJkZWZhdWx0SW5zdGFudHMiLCJpbmplY3RJbnN0YW50cyIsImNhcHR1cmUiLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwicmVzdWx0IiwibXlOYW1lIiwid2hlcmUiLCJhbGxJZHMiLCJjb25kIiwiZW50cmllcyIsImZp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SyxhQUFhMk0sR0FDMUIzTSxRIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbiIsIi8qKlxuICogdnVleCB2My4xLjNcbiAqIChjKSAyMDIwIEV2YW4gWW91XG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuZnVuY3Rpb24gYXBwbHlNaXhpbiAoVnVlKSB7XG4gIHZhciB2ZXJzaW9uID0gTnVtYmVyKFZ1ZS52ZXJzaW9uLnNwbGl0KCcuJylbMF0pO1xuXG4gIGlmICh2ZXJzaW9uID49IDIpIHtcbiAgICBWdWUubWl4aW4oeyBiZWZvcmVDcmVhdGU6IHZ1ZXhJbml0IH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIG92ZXJyaWRlIGluaXQgYW5kIGluamVjdCB2dWV4IGluaXQgcHJvY2VkdXJlXG4gICAgLy8gZm9yIDEueCBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgICB2YXIgX2luaXQgPSBWdWUucHJvdG90eXBlLl9pbml0O1xuICAgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgaWYgKCBvcHRpb25zID09PSB2b2lkIDAgKSBvcHRpb25zID0ge307XG5cbiAgICAgIG9wdGlvbnMuaW5pdCA9IG9wdGlvbnMuaW5pdFxuICAgICAgICA/IFt2dWV4SW5pdF0uY29uY2F0KG9wdGlvbnMuaW5pdClcbiAgICAgICAgOiB2dWV4SW5pdDtcbiAgICAgIF9pbml0LmNhbGwodGhpcywgb3B0aW9ucyk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWdWV4IGluaXQgaG9vaywgaW5qZWN0ZWQgaW50byBlYWNoIGluc3RhbmNlcyBpbml0IGhvb2tzIGxpc3QuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHZ1ZXhJbml0ICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gICAgLy8gc3RvcmUgaW5qZWN0aW9uXG4gICAgaWYgKG9wdGlvbnMuc3RvcmUpIHtcbiAgICAgIHRoaXMuJHN0b3JlID0gdHlwZW9mIG9wdGlvbnMuc3RvcmUgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBvcHRpb25zLnN0b3JlKClcbiAgICAgICAgOiBvcHRpb25zLnN0b3JlO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5wYXJlbnQgJiYgb3B0aW9ucy5wYXJlbnQuJHN0b3JlKSB7XG4gICAgICB0aGlzLiRzdG9yZSA9IG9wdGlvbnMucGFyZW50LiRzdG9yZTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHRhcmdldCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gID8gd2luZG93XG4gIDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCdcbiAgICA/IGdsb2JhbFxuICAgIDoge307XG52YXIgZGV2dG9vbEhvb2sgPSB0YXJnZXQuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblxuZnVuY3Rpb24gZGV2dG9vbFBsdWdpbiAoc3RvcmUpIHtcbiAgaWYgKCFkZXZ0b29sSG9vaykgeyByZXR1cm4gfVxuXG4gIHN0b3JlLl9kZXZ0b29sSG9vayA9IGRldnRvb2xIb29rO1xuXG4gIGRldnRvb2xIb29rLmVtaXQoJ3Z1ZXg6aW5pdCcsIHN0b3JlKTtcblxuICBkZXZ0b29sSG9vay5vbigndnVleDp0cmF2ZWwtdG8tc3RhdGUnLCBmdW5jdGlvbiAodGFyZ2V0U3RhdGUpIHtcbiAgICBzdG9yZS5yZXBsYWNlU3RhdGUodGFyZ2V0U3RhdGUpO1xuICB9KTtcblxuICBzdG9yZS5zdWJzY3JpYmUoZnVuY3Rpb24gKG11dGF0aW9uLCBzdGF0ZSkge1xuICAgIGRldnRvb2xIb29rLmVtaXQoJ3Z1ZXg6bXV0YXRpb24nLCBtdXRhdGlvbiwgc3RhdGUpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGZpcnN0IGl0ZW0gdGhhdCBwYXNzIHRoZSB0ZXN0XG4gKiBieSBzZWNvbmQgYXJndW1lbnQgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBsaXN0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmXG4gKiBAcmV0dXJuIHsqfVxuICovXG5cbi8qKlxuICogZm9yRWFjaCBmb3Igb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGZvckVhY2hWYWx1ZSAob2JqLCBmbikge1xuICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gZm4ob2JqW2tleV0sIGtleSk7IH0pO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdCAob2JqKSB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCdcbn1cblxuZnVuY3Rpb24gaXNQcm9taXNlICh2YWwpIHtcbiAgcmV0dXJuIHZhbCAmJiB0eXBlb2YgdmFsLnRoZW4gPT09ICdmdW5jdGlvbidcbn1cblxuZnVuY3Rpb24gYXNzZXJ0IChjb25kaXRpb24sIG1zZykge1xuICBpZiAoIWNvbmRpdGlvbikgeyB0aHJvdyBuZXcgRXJyb3IoKFwiW3Z1ZXhdIFwiICsgbXNnKSkgfVxufVxuXG5mdW5jdGlvbiBwYXJ0aWFsIChmbiwgYXJnKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZuKGFyZylcbiAgfVxufVxuXG4vLyBCYXNlIGRhdGEgc3RydWN0IGZvciBzdG9yZSdzIG1vZHVsZSwgcGFja2FnZSB3aXRoIHNvbWUgYXR0cmlidXRlIGFuZCBtZXRob2RcbnZhciBNb2R1bGUgPSBmdW5jdGlvbiBNb2R1bGUgKHJhd01vZHVsZSwgcnVudGltZSkge1xuICB0aGlzLnJ1bnRpbWUgPSBydW50aW1lO1xuICAvLyBTdG9yZSBzb21lIGNoaWxkcmVuIGl0ZW1cbiAgdGhpcy5fY2hpbGRyZW4gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAvLyBTdG9yZSB0aGUgb3JpZ2luIG1vZHVsZSBvYmplY3Qgd2hpY2ggcGFzc2VkIGJ5IHByb2dyYW1tZXJcbiAgdGhpcy5fcmF3TW9kdWxlID0gcmF3TW9kdWxlO1xuICB2YXIgcmF3U3RhdGUgPSByYXdNb2R1bGUuc3RhdGU7XG5cbiAgLy8gU3RvcmUgdGhlIG9yaWdpbiBtb2R1bGUncyBzdGF0ZVxuICB0aGlzLnN0YXRlID0gKHR5cGVvZiByYXdTdGF0ZSA9PT0gJ2Z1bmN0aW9uJyA/IHJhd1N0YXRlKCkgOiByYXdTdGF0ZSkgfHwge307XG59O1xuXG52YXIgcHJvdG90eXBlQWNjZXNzb3JzID0geyBuYW1lc3BhY2VkOiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH07XG5cbnByb3RvdHlwZUFjY2Vzc29ycy5uYW1lc3BhY2VkLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuICEhdGhpcy5fcmF3TW9kdWxlLm5hbWVzcGFjZWRcbn07XG5cbk1vZHVsZS5wcm90b3R5cGUuYWRkQ2hpbGQgPSBmdW5jdGlvbiBhZGRDaGlsZCAoa2V5LCBtb2R1bGUpIHtcbiAgdGhpcy5fY2hpbGRyZW5ba2V5XSA9IG1vZHVsZTtcbn07XG5cbk1vZHVsZS5wcm90b3R5cGUucmVtb3ZlQ2hpbGQgPSBmdW5jdGlvbiByZW1vdmVDaGlsZCAoa2V5KSB7XG4gIGRlbGV0ZSB0aGlzLl9jaGlsZHJlbltrZXldO1xufTtcblxuTW9kdWxlLnByb3RvdHlwZS5nZXRDaGlsZCA9IGZ1bmN0aW9uIGdldENoaWxkIChrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX2NoaWxkcmVuW2tleV1cbn07XG5cbk1vZHVsZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlIChyYXdNb2R1bGUpIHtcbiAgdGhpcy5fcmF3TW9kdWxlLm5hbWVzcGFjZWQgPSByYXdNb2R1bGUubmFtZXNwYWNlZDtcbiAgaWYgKHJhd01vZHVsZS5hY3Rpb25zKSB7XG4gICAgdGhpcy5fcmF3TW9kdWxlLmFjdGlvbnMgPSByYXdNb2R1bGUuYWN0aW9ucztcbiAgfVxuICBpZiAocmF3TW9kdWxlLm11dGF0aW9ucykge1xuICAgIHRoaXMuX3Jhd01vZHVsZS5tdXRhdGlvbnMgPSByYXdNb2R1bGUubXV0YXRpb25zO1xuICB9XG4gIGlmIChyYXdNb2R1bGUuZ2V0dGVycykge1xuICAgIHRoaXMuX3Jhd01vZHVsZS5nZXR0ZXJzID0gcmF3TW9kdWxlLmdldHRlcnM7XG4gIH1cbn07XG5cbk1vZHVsZS5wcm90b3R5cGUuZm9yRWFjaENoaWxkID0gZnVuY3Rpb24gZm9yRWFjaENoaWxkIChmbikge1xuICBmb3JFYWNoVmFsdWUodGhpcy5fY2hpbGRyZW4sIGZuKTtcbn07XG5cbk1vZHVsZS5wcm90b3R5cGUuZm9yRWFjaEdldHRlciA9IGZ1bmN0aW9uIGZvckVhY2hHZXR0ZXIgKGZuKSB7XG4gIGlmICh0aGlzLl9yYXdNb2R1bGUuZ2V0dGVycykge1xuICAgIGZvckVhY2hWYWx1ZSh0aGlzLl9yYXdNb2R1bGUuZ2V0dGVycywgZm4pO1xuICB9XG59O1xuXG5Nb2R1bGUucHJvdG90eXBlLmZvckVhY2hBY3Rpb24gPSBmdW5jdGlvbiBmb3JFYWNoQWN0aW9uIChmbikge1xuICBpZiAodGhpcy5fcmF3TW9kdWxlLmFjdGlvbnMpIHtcbiAgICBmb3JFYWNoVmFsdWUodGhpcy5fcmF3TW9kdWxlLmFjdGlvbnMsIGZuKTtcbiAgfVxufTtcblxuTW9kdWxlLnByb3RvdHlwZS5mb3JFYWNoTXV0YXRpb24gPSBmdW5jdGlvbiBmb3JFYWNoTXV0YXRpb24gKGZuKSB7XG4gIGlmICh0aGlzLl9yYXdNb2R1bGUubXV0YXRpb25zKSB7XG4gICAgZm9yRWFjaFZhbHVlKHRoaXMuX3Jhd01vZHVsZS5tdXRhdGlvbnMsIGZuKTtcbiAgfVxufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIE1vZHVsZS5wcm90b3R5cGUsIHByb3RvdHlwZUFjY2Vzc29ycyApO1xuXG52YXIgTW9kdWxlQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIE1vZHVsZUNvbGxlY3Rpb24gKHJhd1Jvb3RNb2R1bGUpIHtcbiAgLy8gcmVnaXN0ZXIgcm9vdCBtb2R1bGUgKFZ1ZXguU3RvcmUgb3B0aW9ucylcbiAgdGhpcy5yZWdpc3RlcihbXSwgcmF3Um9vdE1vZHVsZSwgZmFsc2UpO1xufTtcblxuTW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0IChwYXRoKSB7XG4gIHJldHVybiBwYXRoLnJlZHVjZShmdW5jdGlvbiAobW9kdWxlLCBrZXkpIHtcbiAgICByZXR1cm4gbW9kdWxlLmdldENoaWxkKGtleSlcbiAgfSwgdGhpcy5yb290KVxufTtcblxuTW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0TmFtZXNwYWNlID0gZnVuY3Rpb24gZ2V0TmFtZXNwYWNlIChwYXRoKSB7XG4gIHZhciBtb2R1bGUgPSB0aGlzLnJvb3Q7XG4gIHJldHVybiBwYXRoLnJlZHVjZShmdW5jdGlvbiAobmFtZXNwYWNlLCBrZXkpIHtcbiAgICBtb2R1bGUgPSBtb2R1bGUuZ2V0Q2hpbGQoa2V5KTtcbiAgICByZXR1cm4gbmFtZXNwYWNlICsgKG1vZHVsZS5uYW1lc3BhY2VkID8ga2V5ICsgJy8nIDogJycpXG4gIH0sICcnKVxufTtcblxuTW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlJDEgKHJhd1Jvb3RNb2R1bGUpIHtcbiAgdXBkYXRlKFtdLCB0aGlzLnJvb3QsIHJhd1Jvb3RNb2R1bGUpO1xufTtcblxuTW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiByZWdpc3RlciAocGF0aCwgcmF3TW9kdWxlLCBydW50aW1lKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG4gICAgaWYgKCBydW50aW1lID09PSB2b2lkIDAgKSBydW50aW1lID0gdHJ1ZTtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydFJhd01vZHVsZShwYXRoLCByYXdNb2R1bGUpO1xuICB9XG5cbiAgdmFyIG5ld01vZHVsZSA9IG5ldyBNb2R1bGUocmF3TW9kdWxlLCBydW50aW1lKTtcbiAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgdGhpcy5yb290ID0gbmV3TW9kdWxlO1xuICB9IGVsc2Uge1xuICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldChwYXRoLnNsaWNlKDAsIC0xKSk7XG4gICAgcGFyZW50LmFkZENoaWxkKHBhdGhbcGF0aC5sZW5ndGggLSAxXSwgbmV3TW9kdWxlKTtcbiAgfVxuXG4gIC8vIHJlZ2lzdGVyIG5lc3RlZCBtb2R1bGVzXG4gIGlmIChyYXdNb2R1bGUubW9kdWxlcykge1xuICAgIGZvckVhY2hWYWx1ZShyYXdNb2R1bGUubW9kdWxlcywgZnVuY3Rpb24gKHJhd0NoaWxkTW9kdWxlLCBrZXkpIHtcbiAgICAgIHRoaXMkMS5yZWdpc3RlcihwYXRoLmNvbmNhdChrZXkpLCByYXdDaGlsZE1vZHVsZSwgcnVudGltZSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbk1vZHVsZUNvbGxlY3Rpb24ucHJvdG90eXBlLnVucmVnaXN0ZXIgPSBmdW5jdGlvbiB1bnJlZ2lzdGVyIChwYXRoKSB7XG4gIHZhciBwYXJlbnQgPSB0aGlzLmdldChwYXRoLnNsaWNlKDAsIC0xKSk7XG4gIHZhciBrZXkgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XG4gIGlmICghcGFyZW50LmdldENoaWxkKGtleSkucnVudGltZSkgeyByZXR1cm4gfVxuXG4gIHBhcmVudC5yZW1vdmVDaGlsZChrZXkpO1xufTtcblxuZnVuY3Rpb24gdXBkYXRlIChwYXRoLCB0YXJnZXRNb2R1bGUsIG5ld01vZHVsZSkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydFJhd01vZHVsZShwYXRoLCBuZXdNb2R1bGUpO1xuICB9XG5cbiAgLy8gdXBkYXRlIHRhcmdldCBtb2R1bGVcbiAgdGFyZ2V0TW9kdWxlLnVwZGF0ZShuZXdNb2R1bGUpO1xuXG4gIC8vIHVwZGF0ZSBuZXN0ZWQgbW9kdWxlc1xuICBpZiAobmV3TW9kdWxlLm1vZHVsZXMpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gbmV3TW9kdWxlLm1vZHVsZXMpIHtcbiAgICAgIGlmICghdGFyZ2V0TW9kdWxlLmdldENoaWxkKGtleSkpIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBcIlt2dWV4XSB0cnlpbmcgdG8gYWRkIGEgbmV3IG1vZHVsZSAnXCIgKyBrZXkgKyBcIicgb24gaG90IHJlbG9hZGluZywgXCIgK1xuICAgICAgICAgICAgJ21hbnVhbCByZWxvYWQgaXMgbmVlZGVkJ1xuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICB1cGRhdGUoXG4gICAgICAgIHBhdGguY29uY2F0KGtleSksXG4gICAgICAgIHRhcmdldE1vZHVsZS5nZXRDaGlsZChrZXkpLFxuICAgICAgICBuZXdNb2R1bGUubW9kdWxlc1trZXldXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG52YXIgZnVuY3Rpb25Bc3NlcnQgPSB7XG4gIGFzc2VydDogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7IH0sXG4gIGV4cGVjdGVkOiAnZnVuY3Rpb24nXG59O1xuXG52YXIgb2JqZWN0QXNzZXJ0ID0ge1xuICBhc3NlcnQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nIHx8XG4gICAgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLmhhbmRsZXIgPT09ICdmdW5jdGlvbicpOyB9LFxuICBleHBlY3RlZDogJ2Z1bmN0aW9uIG9yIG9iamVjdCB3aXRoIFwiaGFuZGxlclwiIGZ1bmN0aW9uJ1xufTtcblxudmFyIGFzc2VydFR5cGVzID0ge1xuICBnZXR0ZXJzOiBmdW5jdGlvbkFzc2VydCxcbiAgbXV0YXRpb25zOiBmdW5jdGlvbkFzc2VydCxcbiAgYWN0aW9uczogb2JqZWN0QXNzZXJ0XG59O1xuXG5mdW5jdGlvbiBhc3NlcnRSYXdNb2R1bGUgKHBhdGgsIHJhd01vZHVsZSkge1xuICBPYmplY3Qua2V5cyhhc3NlcnRUeXBlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKCFyYXdNb2R1bGVba2V5XSkgeyByZXR1cm4gfVxuXG4gICAgdmFyIGFzc2VydE9wdGlvbnMgPSBhc3NlcnRUeXBlc1trZXldO1xuXG4gICAgZm9yRWFjaFZhbHVlKHJhd01vZHVsZVtrZXldLCBmdW5jdGlvbiAodmFsdWUsIHR5cGUpIHtcbiAgICAgIGFzc2VydChcbiAgICAgICAgYXNzZXJ0T3B0aW9ucy5hc3NlcnQodmFsdWUpLFxuICAgICAgICBtYWtlQXNzZXJ0aW9uTWVzc2FnZShwYXRoLCBrZXksIHR5cGUsIHZhbHVlLCBhc3NlcnRPcHRpb25zLmV4cGVjdGVkKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VBc3NlcnRpb25NZXNzYWdlIChwYXRoLCBrZXksIHR5cGUsIHZhbHVlLCBleHBlY3RlZCkge1xuICB2YXIgYnVmID0ga2V5ICsgXCIgc2hvdWxkIGJlIFwiICsgZXhwZWN0ZWQgKyBcIiBidXQgXFxcIlwiICsga2V5ICsgXCIuXCIgKyB0eXBlICsgXCJcXFwiXCI7XG4gIGlmIChwYXRoLmxlbmd0aCA+IDApIHtcbiAgICBidWYgKz0gXCIgaW4gbW9kdWxlIFxcXCJcIiArIChwYXRoLmpvaW4oJy4nKSkgKyBcIlxcXCJcIjtcbiAgfVxuICBidWYgKz0gXCIgaXMgXCIgKyAoSlNPTi5zdHJpbmdpZnkodmFsdWUpKSArIFwiLlwiO1xuICByZXR1cm4gYnVmXG59XG5cbnZhciBWdWU7IC8vIGJpbmQgb24gaW5zdGFsbFxuXG52YXIgU3RvcmUgPSBmdW5jdGlvbiBTdG9yZSAob3B0aW9ucykge1xuICB2YXIgdGhpcyQxID0gdGhpcztcbiAgaWYgKCBvcHRpb25zID09PSB2b2lkIDAgKSBvcHRpb25zID0ge307XG5cbiAgLy8gQXV0byBpbnN0YWxsIGlmIGl0IGlzIG5vdCBkb25lIHlldCBhbmQgYHdpbmRvd2AgaGFzIGBWdWVgLlxuICAvLyBUbyBhbGxvdyB1c2VycyB0byBhdm9pZCBhdXRvLWluc3RhbGxhdGlvbiBpbiBzb21lIGNhc2VzLFxuICAvLyB0aGlzIGNvZGUgc2hvdWxkIGJlIHBsYWNlZCBoZXJlLiBTZWUgIzczMVxuICBpZiAoIVZ1ZSAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVnVlKSB7XG4gICAgaW5zdGFsbCh3aW5kb3cuVnVlKTtcbiAgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0KFZ1ZSwgXCJtdXN0IGNhbGwgVnVlLnVzZShWdWV4KSBiZWZvcmUgY3JlYXRpbmcgYSBzdG9yZSBpbnN0YW5jZS5cIik7XG4gICAgYXNzZXJ0KHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJywgXCJ2dWV4IHJlcXVpcmVzIGEgUHJvbWlzZSBwb2x5ZmlsbCBpbiB0aGlzIGJyb3dzZXIuXCIpO1xuICAgIGFzc2VydCh0aGlzIGluc3RhbmNlb2YgU3RvcmUsIFwic3RvcmUgbXVzdCBiZSBjYWxsZWQgd2l0aCB0aGUgbmV3IG9wZXJhdG9yLlwiKTtcbiAgfVxuXG4gIHZhciBwbHVnaW5zID0gb3B0aW9ucy5wbHVnaW5zOyBpZiAoIHBsdWdpbnMgPT09IHZvaWQgMCApIHBsdWdpbnMgPSBbXTtcbiAgdmFyIHN0cmljdCA9IG9wdGlvbnMuc3RyaWN0OyBpZiAoIHN0cmljdCA9PT0gdm9pZCAwICkgc3RyaWN0ID0gZmFsc2U7XG5cbiAgLy8gc3RvcmUgaW50ZXJuYWwgc3RhdGVcbiAgdGhpcy5fY29tbWl0dGluZyA9IGZhbHNlO1xuICB0aGlzLl9hY3Rpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdGhpcy5fYWN0aW9uU3Vic2NyaWJlcnMgPSBbXTtcbiAgdGhpcy5fbXV0YXRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdGhpcy5fd3JhcHBlZEdldHRlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB0aGlzLl9tb2R1bGVzID0gbmV3IE1vZHVsZUNvbGxlY3Rpb24ob3B0aW9ucyk7XG4gIHRoaXMuX21vZHVsZXNOYW1lc3BhY2VNYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB0aGlzLl9zdWJzY3JpYmVycyA9IFtdO1xuICB0aGlzLl93YXRjaGVyVk0gPSBuZXcgVnVlKCk7XG4gIHRoaXMuX21ha2VMb2NhbEdldHRlcnNDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgLy8gYmluZCBjb21taXQgYW5kIGRpc3BhdGNoIHRvIHNlbGZcbiAgdmFyIHN0b3JlID0gdGhpcztcbiAgdmFyIHJlZiA9IHRoaXM7XG4gIHZhciBkaXNwYXRjaCA9IHJlZi5kaXNwYXRjaDtcbiAgdmFyIGNvbW1pdCA9IHJlZi5jb21taXQ7XG4gIHRoaXMuZGlzcGF0Y2ggPSBmdW5jdGlvbiBib3VuZERpc3BhdGNoICh0eXBlLCBwYXlsb2FkKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoLmNhbGwoc3RvcmUsIHR5cGUsIHBheWxvYWQpXG4gIH07XG4gIHRoaXMuY29tbWl0ID0gZnVuY3Rpb24gYm91bmRDb21taXQgKHR5cGUsIHBheWxvYWQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gY29tbWl0LmNhbGwoc3RvcmUsIHR5cGUsIHBheWxvYWQsIG9wdGlvbnMpXG4gIH07XG5cbiAgLy8gc3RyaWN0IG1vZGVcbiAgdGhpcy5zdHJpY3QgPSBzdHJpY3Q7XG5cbiAgdmFyIHN0YXRlID0gdGhpcy5fbW9kdWxlcy5yb290LnN0YXRlO1xuXG4gIC8vIGluaXQgcm9vdCBtb2R1bGUuXG4gIC8vIHRoaXMgYWxzbyByZWN1cnNpdmVseSByZWdpc3RlcnMgYWxsIHN1Yi1tb2R1bGVzXG4gIC8vIGFuZCBjb2xsZWN0cyBhbGwgbW9kdWxlIGdldHRlcnMgaW5zaWRlIHRoaXMuX3dyYXBwZWRHZXR0ZXJzXG4gIGluc3RhbGxNb2R1bGUodGhpcywgc3RhdGUsIFtdLCB0aGlzLl9tb2R1bGVzLnJvb3QpO1xuXG4gIC8vIGluaXRpYWxpemUgdGhlIHN0b3JlIHZtLCB3aGljaCBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHJlYWN0aXZpdHlcbiAgLy8gKGFsc28gcmVnaXN0ZXJzIF93cmFwcGVkR2V0dGVycyBhcyBjb21wdXRlZCBwcm9wZXJ0aWVzKVxuICByZXNldFN0b3JlVk0odGhpcywgc3RhdGUpO1xuXG4gIC8vIGFwcGx5IHBsdWdpbnNcbiAgcGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW4pIHsgcmV0dXJuIHBsdWdpbih0aGlzJDEpOyB9KTtcblxuICB2YXIgdXNlRGV2dG9vbHMgPSBvcHRpb25zLmRldnRvb2xzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRldnRvb2xzIDogVnVlLmNvbmZpZy5kZXZ0b29scztcbiAgaWYgKHVzZURldnRvb2xzKSB7XG4gICAgZGV2dG9vbFBsdWdpbih0aGlzKTtcbiAgfVxufTtcblxudmFyIHByb3RvdHlwZUFjY2Vzc29ycyQxID0geyBzdGF0ZTogeyBjb25maWd1cmFibGU6IHRydWUgfSB9O1xuXG5wcm90b3R5cGVBY2Nlc3NvcnMkMS5zdGF0ZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLl92bS5fZGF0YS4kJHN0YXRlXG59O1xuXG5wcm90b3R5cGVBY2Nlc3NvcnMkMS5zdGF0ZS5zZXQgPSBmdW5jdGlvbiAodikge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydChmYWxzZSwgXCJ1c2Ugc3RvcmUucmVwbGFjZVN0YXRlKCkgdG8gZXhwbGljaXQgcmVwbGFjZSBzdG9yZSBzdGF0ZS5cIik7XG4gIH1cbn07XG5cblN0b3JlLnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiBjb21taXQgKF90eXBlLCBfcGF5bG9hZCwgX29wdGlvbnMpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAvLyBjaGVjayBvYmplY3Qtc3R5bGUgY29tbWl0XG4gIHZhciByZWYgPSB1bmlmeU9iamVjdFN0eWxlKF90eXBlLCBfcGF5bG9hZCwgX29wdGlvbnMpO1xuICAgIHZhciB0eXBlID0gcmVmLnR5cGU7XG4gICAgdmFyIHBheWxvYWQgPSByZWYucGF5bG9hZDtcbiAgICB2YXIgb3B0aW9ucyA9IHJlZi5vcHRpb25zO1xuXG4gIHZhciBtdXRhdGlvbiA9IHsgdHlwZTogdHlwZSwgcGF5bG9hZDogcGF5bG9hZCB9O1xuICB2YXIgZW50cnkgPSB0aGlzLl9tdXRhdGlvbnNbdHlwZV07XG4gIGlmICghZW50cnkpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS5lcnJvcigoXCJbdnVleF0gdW5rbm93biBtdXRhdGlvbiB0eXBlOiBcIiArIHR5cGUpKTtcbiAgICB9XG4gICAgcmV0dXJuXG4gIH1cbiAgdGhpcy5fd2l0aENvbW1pdChmdW5jdGlvbiAoKSB7XG4gICAgZW50cnkuZm9yRWFjaChmdW5jdGlvbiBjb21taXRJdGVyYXRvciAoaGFuZGxlcikge1xuICAgICAgaGFuZGxlcihwYXlsb2FkKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGhpcy5fc3Vic2NyaWJlcnNcbiAgICAuc2xpY2UoKSAvLyBzaGFsbG93IGNvcHkgdG8gcHJldmVudCBpdGVyYXRvciBpbnZhbGlkYXRpb24gaWYgc3Vic2NyaWJlciBzeW5jaHJvbm91c2x5IGNhbGxzIHVuc3Vic2NyaWJlXG4gICAgLmZvckVhY2goZnVuY3Rpb24gKHN1YikgeyByZXR1cm4gc3ViKG11dGF0aW9uLCB0aGlzJDEuc3RhdGUpOyB9KTtcblxuICBpZiAoXG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgIG9wdGlvbnMgJiYgb3B0aW9ucy5zaWxlbnRcbiAgKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJbdnVleF0gbXV0YXRpb24gdHlwZTogXCIgKyB0eXBlICsgXCIuIFNpbGVudCBvcHRpb24gaGFzIGJlZW4gcmVtb3ZlZC4gXCIgK1xuICAgICAgJ1VzZSB0aGUgZmlsdGVyIGZ1bmN0aW9uYWxpdHkgaW4gdGhlIHZ1ZS1kZXZ0b29scydcbiAgICApO1xuICB9XG59O1xuXG5TdG9yZS5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiBkaXNwYXRjaCAoX3R5cGUsIF9wYXlsb2FkKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgLy8gY2hlY2sgb2JqZWN0LXN0eWxlIGRpc3BhdGNoXG4gIHZhciByZWYgPSB1bmlmeU9iamVjdFN0eWxlKF90eXBlLCBfcGF5bG9hZCk7XG4gICAgdmFyIHR5cGUgPSByZWYudHlwZTtcbiAgICB2YXIgcGF5bG9hZCA9IHJlZi5wYXlsb2FkO1xuXG4gIHZhciBhY3Rpb24gPSB7IHR5cGU6IHR5cGUsIHBheWxvYWQ6IHBheWxvYWQgfTtcbiAgdmFyIGVudHJ5ID0gdGhpcy5fYWN0aW9uc1t0eXBlXTtcbiAgaWYgKCFlbnRyeSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSB1bmtub3duIGFjdGlvbiB0eXBlOiBcIiArIHR5cGUpKTtcbiAgICB9XG4gICAgcmV0dXJuXG4gIH1cblxuICB0cnkge1xuICAgIHRoaXMuX2FjdGlvblN1YnNjcmliZXJzXG4gICAgICAuc2xpY2UoKSAvLyBzaGFsbG93IGNvcHkgdG8gcHJldmVudCBpdGVyYXRvciBpbnZhbGlkYXRpb24gaWYgc3Vic2NyaWJlciBzeW5jaHJvbm91c2x5IGNhbGxzIHVuc3Vic2NyaWJlXG4gICAgICAuZmlsdGVyKGZ1bmN0aW9uIChzdWIpIHsgcmV0dXJuIHN1Yi5iZWZvcmU7IH0pXG4gICAgICAuZm9yRWFjaChmdW5jdGlvbiAoc3ViKSB7IHJldHVybiBzdWIuYmVmb3JlKGFjdGlvbiwgdGhpcyQxLnN0YXRlKTsgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS53YXJuKFwiW3Z1ZXhdIGVycm9yIGluIGJlZm9yZSBhY3Rpb24gc3Vic2NyaWJlcnM6IFwiKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHJlc3VsdCA9IGVudHJ5Lmxlbmd0aCA+IDFcbiAgICA/IFByb21pc2UuYWxsKGVudHJ5Lm1hcChmdW5jdGlvbiAoaGFuZGxlcikgeyByZXR1cm4gaGFuZGxlcihwYXlsb2FkKTsgfSkpXG4gICAgOiBlbnRyeVswXShwYXlsb2FkKTtcblxuICByZXR1cm4gcmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgIHRyeSB7XG4gICAgICB0aGlzJDEuX2FjdGlvblN1YnNjcmliZXJzXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHN1YikgeyByZXR1cm4gc3ViLmFmdGVyOyB9KVxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoc3ViKSB7IHJldHVybiBzdWIuYWZ0ZXIoYWN0aW9uLCB0aGlzJDEuc3RhdGUpOyB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJbdnVleF0gZXJyb3IgaW4gYWZ0ZXIgYWN0aW9uIHN1YnNjcmliZXJzOiBcIik7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXNcbiAgfSlcbn07XG5cblN0b3JlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUgKGZuKSB7XG4gIHJldHVybiBnZW5lcmljU3Vic2NyaWJlKGZuLCB0aGlzLl9zdWJzY3JpYmVycylcbn07XG5cblN0b3JlLnByb3RvdHlwZS5zdWJzY3JpYmVBY3Rpb24gPSBmdW5jdGlvbiBzdWJzY3JpYmVBY3Rpb24gKGZuKSB7XG4gIHZhciBzdWJzID0gdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nID8geyBiZWZvcmU6IGZuIH0gOiBmbjtcbiAgcmV0dXJuIGdlbmVyaWNTdWJzY3JpYmUoc3VicywgdGhpcy5fYWN0aW9uU3Vic2NyaWJlcnMpXG59O1xuXG5TdG9yZS5wcm90b3R5cGUud2F0Y2ggPSBmdW5jdGlvbiB3YXRjaCAoZ2V0dGVyLCBjYiwgb3B0aW9ucykge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0KHR5cGVvZiBnZXR0ZXIgPT09ICdmdW5jdGlvbicsIFwic3RvcmUud2F0Y2ggb25seSBhY2NlcHRzIGEgZnVuY3Rpb24uXCIpO1xuICB9XG4gIHJldHVybiB0aGlzLl93YXRjaGVyVk0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldHRlcih0aGlzJDEuc3RhdGUsIHRoaXMkMS5nZXR0ZXJzKTsgfSwgY2IsIG9wdGlvbnMpXG59O1xuXG5TdG9yZS5wcm90b3R5cGUucmVwbGFjZVN0YXRlID0gZnVuY3Rpb24gcmVwbGFjZVN0YXRlIChzdGF0ZSkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gIHRoaXMuX3dpdGhDb21taXQoZnVuY3Rpb24gKCkge1xuICAgIHRoaXMkMS5fdm0uX2RhdGEuJCRzdGF0ZSA9IHN0YXRlO1xuICB9KTtcbn07XG5cblN0b3JlLnByb3RvdHlwZS5yZWdpc3Rlck1vZHVsZSA9IGZ1bmN0aW9uIHJlZ2lzdGVyTW9kdWxlIChwYXRoLCByYXdNb2R1bGUsIG9wdGlvbnMpIHtcbiAgICBpZiAoIG9wdGlvbnMgPT09IHZvaWQgMCApIG9wdGlvbnMgPSB7fTtcblxuICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7IHBhdGggPSBbcGF0aF07IH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydChBcnJheS5pc0FycmF5KHBhdGgpLCBcIm1vZHVsZSBwYXRoIG11c3QgYmUgYSBzdHJpbmcgb3IgYW4gQXJyYXkuXCIpO1xuICAgIGFzc2VydChwYXRoLmxlbmd0aCA+IDAsICdjYW5ub3QgcmVnaXN0ZXIgdGhlIHJvb3QgbW9kdWxlIGJ5IHVzaW5nIHJlZ2lzdGVyTW9kdWxlLicpO1xuICB9XG5cbiAgdGhpcy5fbW9kdWxlcy5yZWdpc3RlcihwYXRoLCByYXdNb2R1bGUpO1xuICBpbnN0YWxsTW9kdWxlKHRoaXMsIHRoaXMuc3RhdGUsIHBhdGgsIHRoaXMuX21vZHVsZXMuZ2V0KHBhdGgpLCBvcHRpb25zLnByZXNlcnZlU3RhdGUpO1xuICAvLyByZXNldCBzdG9yZSB0byB1cGRhdGUgZ2V0dGVycy4uLlxuICByZXNldFN0b3JlVk0odGhpcywgdGhpcy5zdGF0ZSk7XG59O1xuXG5TdG9yZS5wcm90b3R5cGUudW5yZWdpc3Rlck1vZHVsZSA9IGZ1bmN0aW9uIHVucmVnaXN0ZXJNb2R1bGUgKHBhdGgpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7IHBhdGggPSBbcGF0aF07IH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGFzc2VydChBcnJheS5pc0FycmF5KHBhdGgpLCBcIm1vZHVsZSBwYXRoIG11c3QgYmUgYSBzdHJpbmcgb3IgYW4gQXJyYXkuXCIpO1xuICB9XG5cbiAgdGhpcy5fbW9kdWxlcy51bnJlZ2lzdGVyKHBhdGgpO1xuICB0aGlzLl93aXRoQ29tbWl0KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcGFyZW50U3RhdGUgPSBnZXROZXN0ZWRTdGF0ZSh0aGlzJDEuc3RhdGUsIHBhdGguc2xpY2UoMCwgLTEpKTtcbiAgICBWdWUuZGVsZXRlKHBhcmVudFN0YXRlLCBwYXRoW3BhdGgubGVuZ3RoIC0gMV0pO1xuICB9KTtcbiAgcmVzZXRTdG9yZSh0aGlzKTtcbn07XG5cblN0b3JlLnByb3RvdHlwZS5ob3RVcGRhdGUgPSBmdW5jdGlvbiBob3RVcGRhdGUgKG5ld09wdGlvbnMpIHtcbiAgdGhpcy5fbW9kdWxlcy51cGRhdGUobmV3T3B0aW9ucyk7XG4gIHJlc2V0U3RvcmUodGhpcywgdHJ1ZSk7XG59O1xuXG5TdG9yZS5wcm90b3R5cGUuX3dpdGhDb21taXQgPSBmdW5jdGlvbiBfd2l0aENvbW1pdCAoZm4pIHtcbiAgdmFyIGNvbW1pdHRpbmcgPSB0aGlzLl9jb21taXR0aW5nO1xuICB0aGlzLl9jb21taXR0aW5nID0gdHJ1ZTtcbiAgZm4oKTtcbiAgdGhpcy5fY29tbWl0dGluZyA9IGNvbW1pdHRpbmc7XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyggU3RvcmUucHJvdG90eXBlLCBwcm90b3R5cGVBY2Nlc3NvcnMkMSApO1xuXG5mdW5jdGlvbiBnZW5lcmljU3Vic2NyaWJlIChmbiwgc3Vicykge1xuICBpZiAoc3Vicy5pbmRleE9mKGZuKSA8IDApIHtcbiAgICBzdWJzLnB1c2goZm4pO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGkgPSBzdWJzLmluZGV4T2YoZm4pO1xuICAgIGlmIChpID4gLTEpIHtcbiAgICAgIHN1YnMuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZXNldFN0b3JlIChzdG9yZSwgaG90KSB7XG4gIHN0b3JlLl9hY3Rpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgc3RvcmUuX211dGF0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHN0b3JlLl93cmFwcGVkR2V0dGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHN0b3JlLl9tb2R1bGVzTmFtZXNwYWNlTWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdmFyIHN0YXRlID0gc3RvcmUuc3RhdGU7XG4gIC8vIGluaXQgYWxsIG1vZHVsZXNcbiAgaW5zdGFsbE1vZHVsZShzdG9yZSwgc3RhdGUsIFtdLCBzdG9yZS5fbW9kdWxlcy5yb290LCB0cnVlKTtcbiAgLy8gcmVzZXQgdm1cbiAgcmVzZXRTdG9yZVZNKHN0b3JlLCBzdGF0ZSwgaG90KTtcbn1cblxuZnVuY3Rpb24gcmVzZXRTdG9yZVZNIChzdG9yZSwgc3RhdGUsIGhvdCkge1xuICB2YXIgb2xkVm0gPSBzdG9yZS5fdm07XG5cbiAgLy8gYmluZCBzdG9yZSBwdWJsaWMgZ2V0dGVyc1xuICBzdG9yZS5nZXR0ZXJzID0ge307XG4gIC8vIHJlc2V0IGxvY2FsIGdldHRlcnMgY2FjaGVcbiAgc3RvcmUuX21ha2VMb2NhbEdldHRlcnNDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHZhciB3cmFwcGVkR2V0dGVycyA9IHN0b3JlLl93cmFwcGVkR2V0dGVycztcbiAgdmFyIGNvbXB1dGVkID0ge307XG4gIGZvckVhY2hWYWx1ZSh3cmFwcGVkR2V0dGVycywgZnVuY3Rpb24gKGZuLCBrZXkpIHtcbiAgICAvLyB1c2UgY29tcHV0ZWQgdG8gbGV2ZXJhZ2UgaXRzIGxhenktY2FjaGluZyBtZWNoYW5pc21cbiAgICAvLyBkaXJlY3QgaW5saW5lIGZ1bmN0aW9uIHVzZSB3aWxsIGxlYWQgdG8gY2xvc3VyZSBwcmVzZXJ2aW5nIG9sZFZtLlxuICAgIC8vIHVzaW5nIHBhcnRpYWwgdG8gcmV0dXJuIGZ1bmN0aW9uIHdpdGggb25seSBhcmd1bWVudHMgcHJlc2VydmVkIGluIGNsb3N1cmUgZW52aXJvbm1lbnQuXG4gICAgY29tcHV0ZWRba2V5XSA9IHBhcnRpYWwoZm4sIHN0b3JlKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3RvcmUuZ2V0dGVycywga2V5LCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0b3JlLl92bVtrZXldOyB9LFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSAvLyBmb3IgbG9jYWwgZ2V0dGVyc1xuICAgIH0pO1xuICB9KTtcblxuICAvLyB1c2UgYSBWdWUgaW5zdGFuY2UgdG8gc3RvcmUgdGhlIHN0YXRlIHRyZWVcbiAgLy8gc3VwcHJlc3Mgd2FybmluZ3MganVzdCBpbiBjYXNlIHRoZSB1c2VyIGhhcyBhZGRlZFxuICAvLyBzb21lIGZ1bmt5IGdsb2JhbCBtaXhpbnNcbiAgdmFyIHNpbGVudCA9IFZ1ZS5jb25maWcuc2lsZW50O1xuICBWdWUuY29uZmlnLnNpbGVudCA9IHRydWU7XG4gIHN0b3JlLl92bSA9IG5ldyBWdWUoe1xuICAgIGRhdGE6IHtcbiAgICAgICQkc3RhdGU6IHN0YXRlXG4gICAgfSxcbiAgICBjb21wdXRlZDogY29tcHV0ZWRcbiAgfSk7XG4gIFZ1ZS5jb25maWcuc2lsZW50ID0gc2lsZW50O1xuXG4gIC8vIGVuYWJsZSBzdHJpY3QgbW9kZSBmb3IgbmV3IHZtXG4gIGlmIChzdG9yZS5zdHJpY3QpIHtcbiAgICBlbmFibGVTdHJpY3RNb2RlKHN0b3JlKTtcbiAgfVxuXG4gIGlmIChvbGRWbSkge1xuICAgIGlmIChob3QpIHtcbiAgICAgIC8vIGRpc3BhdGNoIGNoYW5nZXMgaW4gYWxsIHN1YnNjcmliZWQgd2F0Y2hlcnNcbiAgICAgIC8vIHRvIGZvcmNlIGdldHRlciByZS1ldmFsdWF0aW9uIGZvciBob3QgcmVsb2FkaW5nLlxuICAgICAgc3RvcmUuX3dpdGhDb21taXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBvbGRWbS5fZGF0YS4kJHN0YXRlID0gbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkgeyByZXR1cm4gb2xkVm0uJGRlc3Ryb3koKTsgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5zdGFsbE1vZHVsZSAoc3RvcmUsIHJvb3RTdGF0ZSwgcGF0aCwgbW9kdWxlLCBob3QpIHtcbiAgdmFyIGlzUm9vdCA9ICFwYXRoLmxlbmd0aDtcbiAgdmFyIG5hbWVzcGFjZSA9IHN0b3JlLl9tb2R1bGVzLmdldE5hbWVzcGFjZShwYXRoKTtcblxuICAvLyByZWdpc3RlciBpbiBuYW1lc3BhY2UgbWFwXG4gIGlmIChtb2R1bGUubmFtZXNwYWNlZCkge1xuICAgIGlmIChzdG9yZS5fbW9kdWxlc05hbWVzcGFjZU1hcFtuYW1lc3BhY2VdICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIGR1cGxpY2F0ZSBuYW1lc3BhY2UgXCIgKyBuYW1lc3BhY2UgKyBcIiBmb3IgdGhlIG5hbWVzcGFjZWQgbW9kdWxlIFwiICsgKHBhdGguam9pbignLycpKSkpO1xuICAgIH1cbiAgICBzdG9yZS5fbW9kdWxlc05hbWVzcGFjZU1hcFtuYW1lc3BhY2VdID0gbW9kdWxlO1xuICB9XG5cbiAgLy8gc2V0IHN0YXRlXG4gIGlmICghaXNSb290ICYmICFob3QpIHtcbiAgICB2YXIgcGFyZW50U3RhdGUgPSBnZXROZXN0ZWRTdGF0ZShyb290U3RhdGUsIHBhdGguc2xpY2UoMCwgLTEpKTtcbiAgICB2YXIgbW9kdWxlTmFtZSA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgICBzdG9yZS5fd2l0aENvbW1pdChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAobW9kdWxlTmFtZSBpbiBwYXJlbnRTdGF0ZSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIChcIlt2dWV4XSBzdGF0ZSBmaWVsZCBcXFwiXCIgKyBtb2R1bGVOYW1lICsgXCJcXFwiIHdhcyBvdmVycmlkZGVuIGJ5IGEgbW9kdWxlIHdpdGggdGhlIHNhbWUgbmFtZSBhdCBcXFwiXCIgKyAocGF0aC5qb2luKCcuJykpICsgXCJcXFwiXCIpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgVnVlLnNldChwYXJlbnRTdGF0ZSwgbW9kdWxlTmFtZSwgbW9kdWxlLnN0YXRlKTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBsb2NhbCA9IG1vZHVsZS5jb250ZXh0ID0gbWFrZUxvY2FsQ29udGV4dChzdG9yZSwgbmFtZXNwYWNlLCBwYXRoKTtcblxuICBtb2R1bGUuZm9yRWFjaE11dGF0aW9uKGZ1bmN0aW9uIChtdXRhdGlvbiwga2V5KSB7XG4gICAgdmFyIG5hbWVzcGFjZWRUeXBlID0gbmFtZXNwYWNlICsga2V5O1xuICAgIHJlZ2lzdGVyTXV0YXRpb24oc3RvcmUsIG5hbWVzcGFjZWRUeXBlLCBtdXRhdGlvbiwgbG9jYWwpO1xuICB9KTtcblxuICBtb2R1bGUuZm9yRWFjaEFjdGlvbihmdW5jdGlvbiAoYWN0aW9uLCBrZXkpIHtcbiAgICB2YXIgdHlwZSA9IGFjdGlvbi5yb290ID8ga2V5IDogbmFtZXNwYWNlICsga2V5O1xuICAgIHZhciBoYW5kbGVyID0gYWN0aW9uLmhhbmRsZXIgfHwgYWN0aW9uO1xuICAgIHJlZ2lzdGVyQWN0aW9uKHN0b3JlLCB0eXBlLCBoYW5kbGVyLCBsb2NhbCk7XG4gIH0pO1xuXG4gIG1vZHVsZS5mb3JFYWNoR2V0dGVyKGZ1bmN0aW9uIChnZXR0ZXIsIGtleSkge1xuICAgIHZhciBuYW1lc3BhY2VkVHlwZSA9IG5hbWVzcGFjZSArIGtleTtcbiAgICByZWdpc3RlckdldHRlcihzdG9yZSwgbmFtZXNwYWNlZFR5cGUsIGdldHRlciwgbG9jYWwpO1xuICB9KTtcblxuICBtb2R1bGUuZm9yRWFjaENoaWxkKGZ1bmN0aW9uIChjaGlsZCwga2V5KSB7XG4gICAgaW5zdGFsbE1vZHVsZShzdG9yZSwgcm9vdFN0YXRlLCBwYXRoLmNvbmNhdChrZXkpLCBjaGlsZCwgaG90KTtcbiAgfSk7XG59XG5cbi8qKlxuICogbWFrZSBsb2NhbGl6ZWQgZGlzcGF0Y2gsIGNvbW1pdCwgZ2V0dGVycyBhbmQgc3RhdGVcbiAqIGlmIHRoZXJlIGlzIG5vIG5hbWVzcGFjZSwganVzdCB1c2Ugcm9vdCBvbmVzXG4gKi9cbmZ1bmN0aW9uIG1ha2VMb2NhbENvbnRleHQgKHN0b3JlLCBuYW1lc3BhY2UsIHBhdGgpIHtcbiAgdmFyIG5vTmFtZXNwYWNlID0gbmFtZXNwYWNlID09PSAnJztcblxuICB2YXIgbG9jYWwgPSB7XG4gICAgZGlzcGF0Y2g6IG5vTmFtZXNwYWNlID8gc3RvcmUuZGlzcGF0Y2ggOiBmdW5jdGlvbiAoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucykge1xuICAgICAgdmFyIGFyZ3MgPSB1bmlmeU9iamVjdFN0eWxlKF90eXBlLCBfcGF5bG9hZCwgX29wdGlvbnMpO1xuICAgICAgdmFyIHBheWxvYWQgPSBhcmdzLnBheWxvYWQ7XG4gICAgICB2YXIgb3B0aW9ucyA9IGFyZ3Mub3B0aW9ucztcbiAgICAgIHZhciB0eXBlID0gYXJncy50eXBlO1xuXG4gICAgICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMucm9vdCkge1xuICAgICAgICB0eXBlID0gbmFtZXNwYWNlICsgdHlwZTtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXN0b3JlLl9hY3Rpb25zW3R5cGVdKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcigoXCJbdnVleF0gdW5rbm93biBsb2NhbCBhY3Rpb24gdHlwZTogXCIgKyAoYXJncy50eXBlKSArIFwiLCBnbG9iYWwgdHlwZTogXCIgKyB0eXBlKSk7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKHR5cGUsIHBheWxvYWQpXG4gICAgfSxcblxuICAgIGNvbW1pdDogbm9OYW1lc3BhY2UgPyBzdG9yZS5jb21taXQgOiBmdW5jdGlvbiAoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucykge1xuICAgICAgdmFyIGFyZ3MgPSB1bmlmeU9iamVjdFN0eWxlKF90eXBlLCBfcGF5bG9hZCwgX29wdGlvbnMpO1xuICAgICAgdmFyIHBheWxvYWQgPSBhcmdzLnBheWxvYWQ7XG4gICAgICB2YXIgb3B0aW9ucyA9IGFyZ3Mub3B0aW9ucztcbiAgICAgIHZhciB0eXBlID0gYXJncy50eXBlO1xuXG4gICAgICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMucm9vdCkge1xuICAgICAgICB0eXBlID0gbmFtZXNwYWNlICsgdHlwZTtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIXN0b3JlLl9tdXRhdGlvbnNbdHlwZV0pIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSB1bmtub3duIGxvY2FsIG11dGF0aW9uIHR5cGU6IFwiICsgKGFyZ3MudHlwZSkgKyBcIiwgZ2xvYmFsIHR5cGU6IFwiICsgdHlwZSkpO1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHN0b3JlLmNvbW1pdCh0eXBlLCBwYXlsb2FkLCBvcHRpb25zKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gZ2V0dGVycyBhbmQgc3RhdGUgb2JqZWN0IG11c3QgYmUgZ290dGVuIGxhemlseVxuICAvLyBiZWNhdXNlIHRoZXkgd2lsbCBiZSBjaGFuZ2VkIGJ5IHZtIHVwZGF0ZVxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhsb2NhbCwge1xuICAgIGdldHRlcnM6IHtcbiAgICAgIGdldDogbm9OYW1lc3BhY2VcbiAgICAgICAgPyBmdW5jdGlvbiAoKSB7IHJldHVybiBzdG9yZS5nZXR0ZXJzOyB9XG4gICAgICAgIDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbWFrZUxvY2FsR2V0dGVycyhzdG9yZSwgbmFtZXNwYWNlKTsgfVxuICAgIH0sXG4gICAgc3RhdGU6IHtcbiAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0TmVzdGVkU3RhdGUoc3RvcmUuc3RhdGUsIHBhdGgpOyB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gbG9jYWxcbn1cblxuZnVuY3Rpb24gbWFrZUxvY2FsR2V0dGVycyAoc3RvcmUsIG5hbWVzcGFjZSkge1xuICBpZiAoIXN0b3JlLl9tYWtlTG9jYWxHZXR0ZXJzQ2FjaGVbbmFtZXNwYWNlXSkge1xuICAgIHZhciBnZXR0ZXJzUHJveHkgPSB7fTtcbiAgICB2YXIgc3BsaXRQb3MgPSBuYW1lc3BhY2UubGVuZ3RoO1xuICAgIE9iamVjdC5rZXlzKHN0b3JlLmdldHRlcnMpLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgIC8vIHNraXAgaWYgdGhlIHRhcmdldCBnZXR0ZXIgaXMgbm90IG1hdGNoIHRoaXMgbmFtZXNwYWNlXG4gICAgICBpZiAodHlwZS5zbGljZSgwLCBzcGxpdFBvcykgIT09IG5hbWVzcGFjZSkgeyByZXR1cm4gfVxuXG4gICAgICAvLyBleHRyYWN0IGxvY2FsIGdldHRlciB0eXBlXG4gICAgICB2YXIgbG9jYWxUeXBlID0gdHlwZS5zbGljZShzcGxpdFBvcyk7XG5cbiAgICAgIC8vIEFkZCBhIHBvcnQgdG8gdGhlIGdldHRlcnMgcHJveHkuXG4gICAgICAvLyBEZWZpbmUgYXMgZ2V0dGVyIHByb3BlcnR5IGJlY2F1c2VcbiAgICAgIC8vIHdlIGRvIG5vdCB3YW50IHRvIGV2YWx1YXRlIHRoZSBnZXR0ZXJzIGluIHRoaXMgdGltZS5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnZXR0ZXJzUHJveHksIGxvY2FsVHlwZSwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0b3JlLmdldHRlcnNbdHlwZV07IH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHN0b3JlLl9tYWtlTG9jYWxHZXR0ZXJzQ2FjaGVbbmFtZXNwYWNlXSA9IGdldHRlcnNQcm94eTtcbiAgfVxuXG4gIHJldHVybiBzdG9yZS5fbWFrZUxvY2FsR2V0dGVyc0NhY2hlW25hbWVzcGFjZV1cbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJNdXRhdGlvbiAoc3RvcmUsIHR5cGUsIGhhbmRsZXIsIGxvY2FsKSB7XG4gIHZhciBlbnRyeSA9IHN0b3JlLl9tdXRhdGlvbnNbdHlwZV0gfHwgKHN0b3JlLl9tdXRhdGlvbnNbdHlwZV0gPSBbXSk7XG4gIGVudHJ5LnB1c2goZnVuY3Rpb24gd3JhcHBlZE11dGF0aW9uSGFuZGxlciAocGF5bG9hZCkge1xuICAgIGhhbmRsZXIuY2FsbChzdG9yZSwgbG9jYWwuc3RhdGUsIHBheWxvYWQpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJBY3Rpb24gKHN0b3JlLCB0eXBlLCBoYW5kbGVyLCBsb2NhbCkge1xuICB2YXIgZW50cnkgPSBzdG9yZS5fYWN0aW9uc1t0eXBlXSB8fCAoc3RvcmUuX2FjdGlvbnNbdHlwZV0gPSBbXSk7XG4gIGVudHJ5LnB1c2goZnVuY3Rpb24gd3JhcHBlZEFjdGlvbkhhbmRsZXIgKHBheWxvYWQpIHtcbiAgICB2YXIgcmVzID0gaGFuZGxlci5jYWxsKHN0b3JlLCB7XG4gICAgICBkaXNwYXRjaDogbG9jYWwuZGlzcGF0Y2gsXG4gICAgICBjb21taXQ6IGxvY2FsLmNvbW1pdCxcbiAgICAgIGdldHRlcnM6IGxvY2FsLmdldHRlcnMsXG4gICAgICBzdGF0ZTogbG9jYWwuc3RhdGUsXG4gICAgICByb290R2V0dGVyczogc3RvcmUuZ2V0dGVycyxcbiAgICAgIHJvb3RTdGF0ZTogc3RvcmUuc3RhdGVcbiAgICB9LCBwYXlsb2FkKTtcbiAgICBpZiAoIWlzUHJvbWlzZShyZXMpKSB7XG4gICAgICByZXMgPSBQcm9taXNlLnJlc29sdmUocmVzKTtcbiAgICB9XG4gICAgaWYgKHN0b3JlLl9kZXZ0b29sSG9vaykge1xuICAgICAgcmV0dXJuIHJlcy5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHN0b3JlLl9kZXZ0b29sSG9vay5lbWl0KCd2dWV4OmVycm9yJywgZXJyKTtcbiAgICAgICAgdGhyb3cgZXJyXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVzXG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJHZXR0ZXIgKHN0b3JlLCB0eXBlLCByYXdHZXR0ZXIsIGxvY2FsKSB7XG4gIGlmIChzdG9yZS5fd3JhcHBlZEdldHRlcnNbdHlwZV0pIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS5lcnJvcigoXCJbdnVleF0gZHVwbGljYXRlIGdldHRlciBrZXk6IFwiICsgdHlwZSkpO1xuICAgIH1cbiAgICByZXR1cm5cbiAgfVxuICBzdG9yZS5fd3JhcHBlZEdldHRlcnNbdHlwZV0gPSBmdW5jdGlvbiB3cmFwcGVkR2V0dGVyIChzdG9yZSkge1xuICAgIHJldHVybiByYXdHZXR0ZXIoXG4gICAgICBsb2NhbC5zdGF0ZSwgLy8gbG9jYWwgc3RhdGVcbiAgICAgIGxvY2FsLmdldHRlcnMsIC8vIGxvY2FsIGdldHRlcnNcbiAgICAgIHN0b3JlLnN0YXRlLCAvLyByb290IHN0YXRlXG4gICAgICBzdG9yZS5nZXR0ZXJzIC8vIHJvb3QgZ2V0dGVyc1xuICAgIClcbiAgfTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlU3RyaWN0TW9kZSAoc3RvcmUpIHtcbiAgc3RvcmUuX3ZtLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9kYXRhLiQkc3RhdGUgfSwgZnVuY3Rpb24gKCkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBhc3NlcnQoc3RvcmUuX2NvbW1pdHRpbmcsIFwiZG8gbm90IG11dGF0ZSB2dWV4IHN0b3JlIHN0YXRlIG91dHNpZGUgbXV0YXRpb24gaGFuZGxlcnMuXCIpO1xuICAgIH1cbiAgfSwgeyBkZWVwOiB0cnVlLCBzeW5jOiB0cnVlIH0pO1xufVxuXG5mdW5jdGlvbiBnZXROZXN0ZWRTdGF0ZSAoc3RhdGUsIHBhdGgpIHtcbiAgcmV0dXJuIHBhdGgucmVkdWNlKGZ1bmN0aW9uIChzdGF0ZSwga2V5KSB7IHJldHVybiBzdGF0ZVtrZXldOyB9LCBzdGF0ZSlcbn1cblxuZnVuY3Rpb24gdW5pZnlPYmplY3RTdHlsZSAodHlwZSwgcGF5bG9hZCwgb3B0aW9ucykge1xuICBpZiAoaXNPYmplY3QodHlwZSkgJiYgdHlwZS50eXBlKSB7XG4gICAgb3B0aW9ucyA9IHBheWxvYWQ7XG4gICAgcGF5bG9hZCA9IHR5cGU7XG4gICAgdHlwZSA9IHR5cGUudHlwZTtcbiAgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0KHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJywgKFwiZXhwZWN0cyBzdHJpbmcgYXMgdGhlIHR5cGUsIGJ1dCBmb3VuZCBcIiArICh0eXBlb2YgdHlwZSkgKyBcIi5cIikpO1xuICB9XG5cbiAgcmV0dXJuIHsgdHlwZTogdHlwZSwgcGF5bG9hZDogcGF5bG9hZCwgb3B0aW9uczogb3B0aW9ucyB9XG59XG5cbmZ1bmN0aW9uIGluc3RhbGwgKF9WdWUpIHtcbiAgaWYgKFZ1ZSAmJiBfVnVlID09PSBWdWUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ1t2dWV4XSBhbHJlYWR5IGluc3RhbGxlZC4gVnVlLnVzZShWdWV4KSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm5cbiAgfVxuICBWdWUgPSBfVnVlO1xuICBhcHBseU1peGluKFZ1ZSk7XG59XG5cbi8qKlxuICogUmVkdWNlIHRoZSBjb2RlIHdoaWNoIHdyaXR0ZW4gaW4gVnVlLmpzIGZvciBnZXR0aW5nIHRoZSBzdGF0ZS5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbbmFtZXNwYWNlXSAtIE1vZHVsZSdzIG5hbWVzcGFjZVxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHN0YXRlcyAjIE9iamVjdCdzIGl0ZW0gY2FuIGJlIGEgZnVuY3Rpb24gd2hpY2ggYWNjZXB0IHN0YXRlIGFuZCBnZXR0ZXJzIGZvciBwYXJhbSwgeW91IGNhbiBkbyBzb21ldGhpbmcgZm9yIHN0YXRlIGFuZCBnZXR0ZXJzIGluIGl0LlxuICogQHBhcmFtIHtPYmplY3R9XG4gKi9cbnZhciBtYXBTdGF0ZSA9IG5vcm1hbGl6ZU5hbWVzcGFjZShmdW5jdGlvbiAobmFtZXNwYWNlLCBzdGF0ZXMpIHtcbiAgdmFyIHJlcyA9IHt9O1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhaXNWYWxpZE1hcChzdGF0ZXMpKSB7XG4gICAgY29uc29sZS5lcnJvcignW3Z1ZXhdIG1hcFN0YXRlOiBtYXBwZXIgcGFyYW1ldGVyIG11c3QgYmUgZWl0aGVyIGFuIEFycmF5IG9yIGFuIE9iamVjdCcpO1xuICB9XG4gIG5vcm1hbGl6ZU1hcChzdGF0ZXMpLmZvckVhY2goZnVuY3Rpb24gKHJlZikge1xuICAgIHZhciBrZXkgPSByZWYua2V5O1xuICAgIHZhciB2YWwgPSByZWYudmFsO1xuXG4gICAgcmVzW2tleV0gPSBmdW5jdGlvbiBtYXBwZWRTdGF0ZSAoKSB7XG4gICAgICB2YXIgc3RhdGUgPSB0aGlzLiRzdG9yZS5zdGF0ZTtcbiAgICAgIHZhciBnZXR0ZXJzID0gdGhpcy4kc3RvcmUuZ2V0dGVycztcbiAgICAgIGlmIChuYW1lc3BhY2UpIHtcbiAgICAgICAgdmFyIG1vZHVsZSA9IGdldE1vZHVsZUJ5TmFtZXNwYWNlKHRoaXMuJHN0b3JlLCAnbWFwU3RhdGUnLCBuYW1lc3BhY2UpO1xuICAgICAgICBpZiAoIW1vZHVsZSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHN0YXRlID0gbW9kdWxlLmNvbnRleHQuc3RhdGU7XG4gICAgICAgIGdldHRlcnMgPSBtb2R1bGUuY29udGV4dC5nZXR0ZXJzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyB2YWwuY2FsbCh0aGlzLCBzdGF0ZSwgZ2V0dGVycylcbiAgICAgICAgOiBzdGF0ZVt2YWxdXG4gICAgfTtcbiAgICAvLyBtYXJrIHZ1ZXggZ2V0dGVyIGZvciBkZXZ0b29sc1xuICAgIHJlc1trZXldLnZ1ZXggPSB0cnVlO1xuICB9KTtcbiAgcmV0dXJuIHJlc1xufSk7XG5cbi8qKlxuICogUmVkdWNlIHRoZSBjb2RlIHdoaWNoIHdyaXR0ZW4gaW4gVnVlLmpzIGZvciBjb21taXR0aW5nIHRoZSBtdXRhdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IFtuYW1lc3BhY2VdIC0gTW9kdWxlJ3MgbmFtZXNwYWNlXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gbXV0YXRpb25zICMgT2JqZWN0J3MgaXRlbSBjYW4gYmUgYSBmdW5jdGlvbiB3aGljaCBhY2NlcHQgYGNvbW1pdGAgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IHBhcmFtLCBpdCBjYW4gYWNjZXB0IGFudGhvciBwYXJhbXMuIFlvdSBjYW4gY29tbWl0IG11dGF0aW9uIGFuZCBkbyBhbnkgb3RoZXIgdGhpbmdzIGluIHRoaXMgZnVuY3Rpb24uIHNwZWNpYWxseSwgWW91IG5lZWQgdG8gcGFzcyBhbnRob3IgcGFyYW1zIGZyb20gdGhlIG1hcHBlZCBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xudmFyIG1hcE11dGF0aW9ucyA9IG5vcm1hbGl6ZU5hbWVzcGFjZShmdW5jdGlvbiAobmFtZXNwYWNlLCBtdXRhdGlvbnMpIHtcbiAgdmFyIHJlcyA9IHt9O1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhaXNWYWxpZE1hcChtdXRhdGlvbnMpKSB7XG4gICAgY29uc29sZS5lcnJvcignW3Z1ZXhdIG1hcE11dGF0aW9uczogbWFwcGVyIHBhcmFtZXRlciBtdXN0IGJlIGVpdGhlciBhbiBBcnJheSBvciBhbiBPYmplY3QnKTtcbiAgfVxuICBub3JtYWxpemVNYXAobXV0YXRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICB2YXIga2V5ID0gcmVmLmtleTtcbiAgICB2YXIgdmFsID0gcmVmLnZhbDtcblxuICAgIHJlc1trZXldID0gZnVuY3Rpb24gbWFwcGVkTXV0YXRpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIHdoaWxlICggbGVuLS0gKSBhcmdzWyBsZW4gXSA9IGFyZ3VtZW50c1sgbGVuIF07XG5cbiAgICAgIC8vIEdldCB0aGUgY29tbWl0IG1ldGhvZCBmcm9tIHN0b3JlXG4gICAgICB2YXIgY29tbWl0ID0gdGhpcy4kc3RvcmUuY29tbWl0O1xuICAgICAgaWYgKG5hbWVzcGFjZSkge1xuICAgICAgICB2YXIgbW9kdWxlID0gZ2V0TW9kdWxlQnlOYW1lc3BhY2UodGhpcy4kc3RvcmUsICdtYXBNdXRhdGlvbnMnLCBuYW1lc3BhY2UpO1xuICAgICAgICBpZiAoIW1vZHVsZSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGNvbW1pdCA9IG1vZHVsZS5jb250ZXh0LmNvbW1pdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gdmFsLmFwcGx5KHRoaXMsIFtjb21taXRdLmNvbmNhdChhcmdzKSlcbiAgICAgICAgOiBjb21taXQuYXBwbHkodGhpcy4kc3RvcmUsIFt2YWxdLmNvbmNhdChhcmdzKSlcbiAgICB9O1xuICB9KTtcbiAgcmV0dXJuIHJlc1xufSk7XG5cbi8qKlxuICogUmVkdWNlIHRoZSBjb2RlIHdoaWNoIHdyaXR0ZW4gaW4gVnVlLmpzIGZvciBnZXR0aW5nIHRoZSBnZXR0ZXJzXG4gKiBAcGFyYW0ge1N0cmluZ30gW25hbWVzcGFjZV0gLSBNb2R1bGUncyBuYW1lc3BhY2VcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBnZXR0ZXJzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbnZhciBtYXBHZXR0ZXJzID0gbm9ybWFsaXplTmFtZXNwYWNlKGZ1bmN0aW9uIChuYW1lc3BhY2UsIGdldHRlcnMpIHtcbiAgdmFyIHJlcyA9IHt9O1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhaXNWYWxpZE1hcChnZXR0ZXJzKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1t2dWV4XSBtYXBHZXR0ZXJzOiBtYXBwZXIgcGFyYW1ldGVyIG11c3QgYmUgZWl0aGVyIGFuIEFycmF5IG9yIGFuIE9iamVjdCcpO1xuICB9XG4gIG5vcm1hbGl6ZU1hcChnZXR0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICB2YXIga2V5ID0gcmVmLmtleTtcbiAgICB2YXIgdmFsID0gcmVmLnZhbDtcblxuICAgIC8vIFRoZSBuYW1lc3BhY2UgaGFzIGJlZW4gbXV0YXRlZCBieSBub3JtYWxpemVOYW1lc3BhY2VcbiAgICB2YWwgPSBuYW1lc3BhY2UgKyB2YWw7XG4gICAgcmVzW2tleV0gPSBmdW5jdGlvbiBtYXBwZWRHZXR0ZXIgKCkge1xuICAgICAgaWYgKG5hbWVzcGFjZSAmJiAhZ2V0TW9kdWxlQnlOYW1lc3BhY2UodGhpcy4kc3RvcmUsICdtYXBHZXR0ZXJzJywgbmFtZXNwYWNlKSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICEodmFsIGluIHRoaXMuJHN0b3JlLmdldHRlcnMpKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIHVua25vd24gZ2V0dGVyOiBcIiArIHZhbCkpO1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzW3ZhbF1cbiAgICB9O1xuICAgIC8vIG1hcmsgdnVleCBnZXR0ZXIgZm9yIGRldnRvb2xzXG4gICAgcmVzW2tleV0udnVleCA9IHRydWU7XG4gIH0pO1xuICByZXR1cm4gcmVzXG59KTtcblxuLyoqXG4gKiBSZWR1Y2UgdGhlIGNvZGUgd2hpY2ggd3JpdHRlbiBpbiBWdWUuanMgZm9yIGRpc3BhdGNoIHRoZSBhY3Rpb25cbiAqIEBwYXJhbSB7U3RyaW5nfSBbbmFtZXNwYWNlXSAtIE1vZHVsZSdzIG5hbWVzcGFjZVxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGFjdGlvbnMgIyBPYmplY3QncyBpdGVtIGNhbiBiZSBhIGZ1bmN0aW9uIHdoaWNoIGFjY2VwdCBgZGlzcGF0Y2hgIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBwYXJhbSwgaXQgY2FuIGFjY2VwdCBhbnRob3IgcGFyYW1zLiBZb3UgY2FuIGRpc3BhdGNoIGFjdGlvbiBhbmQgZG8gYW55IG90aGVyIHRoaW5ncyBpbiB0aGlzIGZ1bmN0aW9uLiBzcGVjaWFsbHksIFlvdSBuZWVkIHRvIHBhc3MgYW50aG9yIHBhcmFtcyBmcm9tIHRoZSBtYXBwZWQgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbnZhciBtYXBBY3Rpb25zID0gbm9ybWFsaXplTmFtZXNwYWNlKGZ1bmN0aW9uIChuYW1lc3BhY2UsIGFjdGlvbnMpIHtcbiAgdmFyIHJlcyA9IHt9O1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhaXNWYWxpZE1hcChhY3Rpb25zKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1t2dWV4XSBtYXBBY3Rpb25zOiBtYXBwZXIgcGFyYW1ldGVyIG11c3QgYmUgZWl0aGVyIGFuIEFycmF5IG9yIGFuIE9iamVjdCcpO1xuICB9XG4gIG5vcm1hbGl6ZU1hcChhY3Rpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICB2YXIga2V5ID0gcmVmLmtleTtcbiAgICB2YXIgdmFsID0gcmVmLnZhbDtcblxuICAgIHJlc1trZXldID0gZnVuY3Rpb24gbWFwcGVkQWN0aW9uICgpIHtcbiAgICAgIHZhciBhcmdzID0gW10sIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICB3aGlsZSAoIGxlbi0tICkgYXJnc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiBdO1xuXG4gICAgICAvLyBnZXQgZGlzcGF0Y2ggZnVuY3Rpb24gZnJvbSBzdG9yZVxuICAgICAgdmFyIGRpc3BhdGNoID0gdGhpcy4kc3RvcmUuZGlzcGF0Y2g7XG4gICAgICBpZiAobmFtZXNwYWNlKSB7XG4gICAgICAgIHZhciBtb2R1bGUgPSBnZXRNb2R1bGVCeU5hbWVzcGFjZSh0aGlzLiRzdG9yZSwgJ21hcEFjdGlvbnMnLCBuYW1lc3BhY2UpO1xuICAgICAgICBpZiAoIW1vZHVsZSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGRpc3BhdGNoID0gbW9kdWxlLmNvbnRleHQuZGlzcGF0Y2g7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IHZhbC5hcHBseSh0aGlzLCBbZGlzcGF0Y2hdLmNvbmNhdChhcmdzKSlcbiAgICAgICAgOiBkaXNwYXRjaC5hcHBseSh0aGlzLiRzdG9yZSwgW3ZhbF0uY29uY2F0KGFyZ3MpKVxuICAgIH07XG4gIH0pO1xuICByZXR1cm4gcmVzXG59KTtcblxuLyoqXG4gKiBSZWJpbmRpbmcgbmFtZXNwYWNlIHBhcmFtIGZvciBtYXBYWFggZnVuY3Rpb24gaW4gc3BlY2lhbCBzY29wZWQsIGFuZCByZXR1cm4gdGhlbSBieSBzaW1wbGUgb2JqZWN0XG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbnZhciBjcmVhdGVOYW1lc3BhY2VkSGVscGVycyA9IGZ1bmN0aW9uIChuYW1lc3BhY2UpIHsgcmV0dXJuICh7XG4gIG1hcFN0YXRlOiBtYXBTdGF0ZS5iaW5kKG51bGwsIG5hbWVzcGFjZSksXG4gIG1hcEdldHRlcnM6IG1hcEdldHRlcnMuYmluZChudWxsLCBuYW1lc3BhY2UpLFxuICBtYXBNdXRhdGlvbnM6IG1hcE11dGF0aW9ucy5iaW5kKG51bGwsIG5hbWVzcGFjZSksXG4gIG1hcEFjdGlvbnM6IG1hcEFjdGlvbnMuYmluZChudWxsLCBuYW1lc3BhY2UpXG59KTsgfTtcblxuLyoqXG4gKiBOb3JtYWxpemUgdGhlIG1hcFxuICogbm9ybWFsaXplTWFwKFsxLCAyLCAzXSkgPT4gWyB7IGtleTogMSwgdmFsOiAxIH0sIHsga2V5OiAyLCB2YWw6IDIgfSwgeyBrZXk6IDMsIHZhbDogMyB9IF1cbiAqIG5vcm1hbGl6ZU1hcCh7YTogMSwgYjogMiwgYzogM30pID0+IFsgeyBrZXk6ICdhJywgdmFsOiAxIH0sIHsga2V5OiAnYicsIHZhbDogMiB9LCB7IGtleTogJ2MnLCB2YWw6IDMgfSBdXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gbWFwXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZU1hcCAobWFwKSB7XG4gIGlmICghaXNWYWxpZE1hcChtYXApKSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkobWFwKVxuICAgID8gbWFwLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoeyBrZXk6IGtleSwgdmFsOiBrZXkgfSk7IH0pXG4gICAgOiBPYmplY3Qua2V5cyhtYXApLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoeyBrZXk6IGtleSwgdmFsOiBtYXBba2V5XSB9KTsgfSlcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSB3aGV0aGVyIGdpdmVuIG1hcCBpcyB2YWxpZCBvciBub3RcbiAqIEBwYXJhbSB7Kn0gbWFwXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc1ZhbGlkTWFwIChtYXApIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkobWFwKSB8fCBpc09iamVjdChtYXApXG59XG5cbi8qKlxuICogUmV0dXJuIGEgZnVuY3Rpb24gZXhwZWN0IHR3byBwYXJhbSBjb250YWlucyBuYW1lc3BhY2UgYW5kIG1hcC4gaXQgd2lsbCBub3JtYWxpemUgdGhlIG5hbWVzcGFjZSBhbmQgdGhlbiB0aGUgcGFyYW0ncyBmdW5jdGlvbiB3aWxsIGhhbmRsZSB0aGUgbmV3IG5hbWVzcGFjZSBhbmQgdGhlIG1hcC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplTmFtZXNwYWNlIChmbikge1xuICByZXR1cm4gZnVuY3Rpb24gKG5hbWVzcGFjZSwgbWFwKSB7XG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnKSB7XG4gICAgICBtYXAgPSBuYW1lc3BhY2U7XG4gICAgICBuYW1lc3BhY2UgPSAnJztcbiAgICB9IGVsc2UgaWYgKG5hbWVzcGFjZS5jaGFyQXQobmFtZXNwYWNlLmxlbmd0aCAtIDEpICE9PSAnLycpIHtcbiAgICAgIG5hbWVzcGFjZSArPSAnLyc7XG4gICAgfVxuICAgIHJldHVybiBmbihuYW1lc3BhY2UsIG1hcClcbiAgfVxufVxuXG4vKipcbiAqIFNlYXJjaCBhIHNwZWNpYWwgbW9kdWxlIGZyb20gc3RvcmUgYnkgbmFtZXNwYWNlLiBpZiBtb2R1bGUgbm90IGV4aXN0LCBwcmludCBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHtPYmplY3R9IHN0b3JlXG4gKiBAcGFyYW0ge1N0cmluZ30gaGVscGVyXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGdldE1vZHVsZUJ5TmFtZXNwYWNlIChzdG9yZSwgaGVscGVyLCBuYW1lc3BhY2UpIHtcbiAgdmFyIG1vZHVsZSA9IHN0b3JlLl9tb2R1bGVzTmFtZXNwYWNlTWFwW25hbWVzcGFjZV07XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFtb2R1bGUpIHtcbiAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSBtb2R1bGUgbmFtZXNwYWNlIG5vdCBmb3VuZCBpbiBcIiArIGhlbHBlciArIFwiKCk6IFwiICsgbmFtZXNwYWNlKSk7XG4gIH1cbiAgcmV0dXJuIG1vZHVsZVxufVxuXG52YXIgaW5kZXhfZXNtID0ge1xuICBTdG9yZTogU3RvcmUsXG4gIGluc3RhbGw6IGluc3RhbGwsXG4gIHZlcnNpb246ICczLjEuMycsXG4gIG1hcFN0YXRlOiBtYXBTdGF0ZSxcbiAgbWFwTXV0YXRpb25zOiBtYXBNdXRhdGlvbnMsXG4gIG1hcEdldHRlcnM6IG1hcEdldHRlcnMsXG4gIG1hcEFjdGlvbnM6IG1hcEFjdGlvbnMsXG4gIGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzOiBjcmVhdGVOYW1lc3BhY2VkSGVscGVyc1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaW5kZXhfZXNtO1xuZXhwb3J0IHsgU3RvcmUsIGluc3RhbGwsIG1hcFN0YXRlLCBtYXBNdXRhdGlvbnMsIG1hcEdldHRlcnMsIG1hcEFjdGlvbnMsIGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzIH07XG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCJleHBvcnQgZnVuY3Rpb24gYXNzZXJ0KFxuICBjb25kaXRpb246ICgpID0+IGJvb2xlYW4sXG4gIG1zZyA9ICcnLCBlcnJvckNscyA9IFR5cGVFcnJvcikge1xuICBpZiAoIWNvbmRpdGlvbigpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9yQ2xzKG1zZylcbiAgfVxufVxuIiwiaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBJZCwgUmVsYXRpb24gfSBmcm9tICcuL3JlbGF0aW9uJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICAvLyBSZWxhdGlvbiDjga7jg5fjg63jg5Hjg4bjgqPjgpLntYznlLHjgZfjgZ/liKXjga4gUmVsYXRpb24g44G444GuIGdldHRlclxuICBnZXQ8UywgUj4odGFyZ2V0OiBSZWxhdGlvbjxTLCBSPiwgbmFtZTogc3RyaW5nKSB7XG4gICAgaWYgKG5hbWUgaW4gdGFyZ2V0KSB7XG4gICAgICAvLyDpgJrluLjjga7jg5fjg63jg5Hjg4bjgqPjgbjjga7jgqLjgq/jgrvjgrlcbiAgICAgIHJldHVybiB0YXJnZXRbbmFtZV07XG4gICAgfVxuXG4gICAgaWYgKHRhcmdldC5kYXRhKSB7XG4gICAgICBpZiAobmFtZSA9PT0gJ2xlbmd0aCcpIHtcbiAgICAgICAgLy8g5a2Y5Zyo44OB44Kn44OD44KvKOmVt+OBlTDjga7loLTlkIgp44KS44GX44Gf44GE44Gu44Gn5LiA55Wq5pyA5YSq5YWI44Go44GZ44KLXG4gICAgICAgIHJldHVybiB0YXJnZXQuZGF0YS5sZW5ndGg7XG4gICAgICB9XG5cbiAgICAgIGlmIChuYW1lIGluIHRhcmdldC5kYXRhWzBdKSB7XG4gICAgICAgIC8vIOWtkOS+m+OBruWVj+OBhOWQiOOCj+OBm1xuICAgICAgICByZXR1cm4gY2hpbGRSZWxhdGlvbih0YXJnZXQsIG5hbWUpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGhhc0FuZEJlbG9uZ3NUb01hbnkgPSB0YXJnZXQuaGFzQW5kQmVsb25nc1RvTWFueVxuICAgICAgICAmJiB0YXJnZXQuaGFzQW5kQmVsb25nc1RvTWFueVtuYW1lXTtcblxuICAgICAgaWYgKGhhc0FuZEJlbG9uZ3NUb01hbnkpIHtcbiAgICAgICAgLy8gaGFzQW5kQmVsb25nc1RvTWFueSDjga7llY/jgYTlkIjjgZtcbiAgICAgICAgcmV0dXJuIGhhc0FuZEJlbG9uZ3NUb01hbnlSZWxhdGlvbih0YXJnZXQsIG5hbWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNJbmRleE5hbWUobmFtZSkpIHtcbiAgICAgICAgLy8g44Kk44Oz44OH44OD44Kv44K5IGxpa2Ug44Gq5ZCN5YmN44Gu44Go44GN44Gv6YWN5YiX44G444Gu44Ki44Kv44K744K544KS55yf5Ly844KLXG4gICAgICAgIHJldHVybiB0YXJnZXQuZGF0YVtuYW1lXVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRhcmdldC5kYXRhW25hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIOmFjeWIl+OBruODoeOCveODg+ODieOBp+OCouOCr+OCu+OCueOBleOCjOOBn+OBqOOBjeOBryB0YXJnZXQuZGF0YSDjgavnp7vorbLjgZnjgotcbiAgICAgICAgcmV0dXJuIHRhcmdldC5kYXRhW25hbWVdLmJpbmQodGFyZ2V0LmRhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYOefpeOCieOCk+OBjOOBqjogJHtuYW1lfS5gKVxuICB9LFxufTtcblxuZnVuY3Rpb24gaXNJbmRleE5hbWUobmFtZTogc3RyaW5nKSB7XG4gIHJldHVybiAvXFxkKy8udGVzdChuYW1lKTtcbn1cblxuZnVuY3Rpb24gY2hpbGRSZWxhdGlvbjxTLCBSPihcbiAgcmVsYXRpb246IFJlbGF0aW9uPFMsIFI+LCBjaGlsZE5hbWU6IHN0cmluZykge1xuICAvLyDplqLpgKPjga7jgYLjgosgcmVsYXRpb24g44Gr5a++44GZ44KL5ZWP5ZCI44GbXG4gIGNvbnN0IHsgc3RhdGU6IHJvb3RTdGF0ZSB9ID0gcmVsYXRpb24ucm9vdDtcbiAgY29uc3QgY2hpbGRTdGF0ZSA9IHJvb3RTdGF0ZVtjaGlsZE5hbWVdO1xuXG4gIGFzc2VydCgoKSA9PiAhIWNoaWxkU3RhdGUpO1xuXG4gIGNvbnN0IGNoaWxkcmVuID0gcmVsYXRpb24uZGF0YVxuICAgIC5mbGF0TWFwKHggPT4geFtjaGlsZE5hbWVdKVxuICAgIC5tYXAoaWQgPT4gY2hpbGRTdGF0ZS5ieUlkc1tpZF0pO1xuICBjb25zdCBoYXNBbmRCZWxvbmdzVG9NYW55T3B0aW9uID1cbiAgICByb290U3RhdGVbY2hpbGROYW1lXS5oYXNBbmRCZWxvbmdzVG9NYW55O1xuXG4gIHJldHVybiBuZXcgUmVsYXRpb24oXG4gICAgY2hpbGRyZW4sIHJlbGF0aW9uLnJvb3QsIGNoaWxkTmFtZSxcbiAgICBoYXNBbmRCZWxvbmdzVG9NYW55T3B0aW9uKTtcbn1cblxuZnVuY3Rpb24gaGFzQW5kQmVsb25nc1RvTWFueVJlbGF0aW9uPFMsIFI+KFxuICByZWxhdGlvbjogUmVsYXRpb248UywgUj4sIGNoaWxkTmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IHsgc3RhdGU6IHJvb3RTdGF0ZSB9ID0gcmVsYXRpb24ucm9vdDtcbiAgY29uc3QgaGFzQW5kQmVsb25nc1RvTWFueSA9IHJlbGF0aW9uLmhhc0FuZEJlbG9uZ3NUb01hbnlcbiAgICAmJiByZWxhdGlvbi5oYXNBbmRCZWxvbmdzVG9NYW55W2NoaWxkTmFtZV07XG5cbiAgYXNzZXJ0KCgpID0+ICEhaGFzQW5kQmVsb25nc1RvTWFueSk7XG5cbiAgY29uc3Qge1xuICAgIGFzc29jaWF0aW9uRm9yZWlnbktleSxcbiAgICBmb3JlaWduS2V5LFxuICAgIGpvaW5OYW1lLFxuICAgIHRoZWlyTmFtZSxcbiAgfSA9IGhhc0FuZEJlbG9uZ3NUb01hbnk7XG4gIGNvbnN0IGludGVybWVkaWF0ZVN0YXRlID0gcm9vdFN0YXRlW2pvaW5OYW1lXTtcbiAgY29uc3QgY2hpbGRTdGF0ZSA9IHJvb3RTdGF0ZVt0aGVpck5hbWVdO1xuXG4gIGFzc2VydCgoKSA9PiAhIWludGVybWVkaWF0ZVN0YXRlICYmICEhY2hpbGRTdGF0ZSk7XG5cbiAgY29uc3QgaW50ZXJtZWRpYXRlcyA9IE9iamVjdC52YWx1ZXMoaW50ZXJtZWRpYXRlU3RhdGUuYnlJZHMpXG4gIGNvbnN0IGNoaWxkcmVuID0gcmVsYXRpb24uZGF0YVxuICAgIC5mbGF0TWFwKHggPT4ge1xuICAgICAgLy8gRklYTUU6IOOBk+OBk+OBteOBpOOBhuOBqyBPKE5eMikg44Gq5rCX44GM44GZ44KL4oCmXG4gICAgICByZXR1cm4gaW50ZXJtZWRpYXRlcy5maWx0ZXIoeSA9PiB5W2ZvcmVpZ25LZXldID09PSB4LmlkKVxuICAgIH0pXG4gICAgLm1hcCh4ID0+IHtcbiAgICAgIHJldHVybiBjaGlsZFN0YXRlLmJ5SWRzW3hbYXNzb2NpYXRpb25Gb3JlaWduS2V5XV07XG4gICAgfSk7XG5cbiAgY29uc3QgaGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbiA9XG4gICAgcm9vdFN0YXRlW3RoZWlyTmFtZV0uaGFzQW5kQmVsb25nc1RvTWFueTtcblxuICByZXR1cm4gbmV3IFJlbGF0aW9uKFxuICAgIGNoaWxkcmVuLCByZWxhdGlvbi5yb290LCB0aGVpck5hbWUsXG4gICAgaGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbik7XG59XG4iLCJpbXBvcnQgeyBNb2R1bGUgfSBmcm9tICd2dWV4JztcblxuaW1wb3J0IEZvcmVpZ25RdWVyaWFibGUgZnJvbSAnLi9mb3JlaWduLXF1ZXJpYWJsZSc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IHR5cGUgSWQgPSBudW1iZXIgfCBzdHJpbmc7XG5cbmV4cG9ydCB0eXBlIEFsbElkcyA9IEFycmF5PElkPjtcblxuZXhwb3J0IGludGVyZmFjZSBOb3JtYWxpemVkUmVsYXRpb25FbnRyeSB7XG4gIGlkOiBJZDtcbn1cblxuLy8gc3RhdGUg44GuIGBieUlkcycg44Gr44GvIElkIOWei+OCreODvOOCkuacn+W+heOBmeOCi1xuLy8g44G+44GfIGBieUlkc2Ag44Gr44GvIGBpZGAg44KS44OX44Ot44OR44OG44Kj44Gr5ZCr44KA44Kq44OW44K444Kn44Kv44OI44KS5pyf5b6F44GZ44KLXG5leHBvcnQgdHlwZSBCeUlkcyA9IHtcbiAgW2lkIGluIElkXTogTm9ybWFsaXplZFJlbGF0aW9uRW50cnlcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbiB7XG4gIFtrZXk6IHN0cmluZ106IHtcbiAgICBhc3NvY2lhdGlvbkZvcmVpZ25LZXk/OiBzdHJpbmcsXG4gICAgZm9yZWlnbktleT86IHN0cmluZyxcbiAgICBqb2luTmFtZT86IHN0cmluZyxcbiAgICB0aGVpck5hbWU/OiBzdHJpbmcsXG4gIH07XG59XG5cbi8vIOmWoumAo1xuZXhwb3J0IGludGVyZmFjZSBSZWxhdGlvbjxTLCBSPlxuICBleHRlbmRzIEl0ZXJhYmxlPE5vcm1hbGl6ZWRSZWxhdGlvbkVudHJ5PiB7XG4gIG5hbWU6IHN0cmluZztcbiAgcm9vdDogTW9kdWxlPFMsIFI+O1xuICBkYXRhOiBBcnJheTxOb3JtYWxpemVkUmVsYXRpb25FbnRyeT47XG4gIGhhc0FuZEJlbG9uZ3NUb01hbnk6IEhhc0FuZEJlbG9uZ3NUb01hbnlPcHRpb247XG59XG5cbi8vIOmWoumAo1xuZXhwb3J0IGNsYXNzIFJlbGF0aW9uQmFzZTxTLCBSPiBpbXBsZW1lbnRzIFJlbGF0aW9uPFMsIFI+IHtcbiAgbmFtZTogc3RyaW5nO1xuICByb290OiBNb2R1bGU8UywgUj47XG4gIGRhdGE6IEFycmF5PE5vcm1hbGl6ZWRSZWxhdGlvbkVudHJ5PjtcbiAgaGFzQW5kQmVsb25nc1RvTWFueTogSGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbjtcbiAgbmV4dElkeDogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhOiBBcnJheTxOb3JtYWxpemVkUmVsYXRpb25FbnRyeT4sXG4gICAgcm9vdE1vZHVsZTogTW9kdWxlPFMsIFI+LFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBoYXNBbmRCZWxvbmdzVG9NYW55OiBIYXNBbmRCZWxvbmdzVG9NYW55T3B0aW9uKSB7XG5cbiAgICBhc3NlcnQoKCkgPT4gQXJyYXkuaXNBcnJheShkYXRhKSxcbiAgICAgICAgICAgYCR7ZGF0YX0gbXVzdCBiZSB0eXBlIEFycmF5LmApXG5cbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMucm9vdCA9IHJvb3RNb2R1bGU7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLmhhc0FuZEJlbG9uZ3NUb01hbnkgPSBoYXNBbmRCZWxvbmdzVG9NYW55O1xuICB9XG5cbiAgLy8g44Kk44OG44Os44O844K/44Kk44Oz44K/44O844OV44Kn44O844K5XG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpcztcbiAgICBsZXQgeyBuZXh0SWR4IH0gPSB0aGlzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHQoKSB7XG4gICAgICAgIGxldCB2YWx1ZTogYW55O1xuXG4gICAgICAgIGlmIChuZXh0SWR4IDwgZGF0YS5sZW5ndGhcbiAgICAgICAgICAgICYmICh2YWx1ZSA9IGRhdGFbbmV4dElkeF0pKSB7XG4gICAgICAgICAgbmV4dElkeCArPSAxO1xuICAgICAgICAgIHJldHVybiB7IHZhbHVlLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7IHZhbHVlLCBkb25lOiB0cnVlIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRPRE86IOOCguOBo+OBqOODoeOCveODg+ODieWFheWun+OBl+OBvuOBl+OCh+OBhlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmFpbHMvcmFpbHMvYmxvYi9tYXN0ZXIvYWN0aXZlcmVjb3JkL2xpYi9hY3RpdmVfcmVjb3JkL3JlbGF0aW9uL2NhbGN1bGF0aW9ucy5yYlxuXG4gIHBsdWNrKGtleXM6IEFycmF5PHN0cmluZz4pIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmZsYXRNYXAociA9PiB7XG4gICAgICByZXR1cm4ga2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoe1xuICAgICAgICAuLi5hY2MsXG4gICAgICAgIFtrZXldOiByW2tleV0sXG4gICAgICB9KSwge30pXG4gICAgfSk7XG4gIH1cblxuICBpZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5tYXAociA9PiByLmlkKVxuICB9XG59XG5cbi8vIOWun+mam+OBriBSZWxhdGlvbiDjgq/jg6njgrlcbi8vIFJlbGF0aW9uQmFzZSArIEZvcmVpZ25RdWVyaWFibGVcbmV4cG9ydCBjbGFzcyBSZWxhdGlvbjxTLCBSPiB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGE6IEFycmF5PE5vcm1hbGl6ZWRSZWxhdGlvbkVudHJ5PixcbiAgICByb290TW9kdWxlOiBNb2R1bGU8UywgUj4sXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGhhc0FuZEJlbG9uZ3NUb01hbnk6IEhhc0FuZEJlbG9uZ3NUb01hbnlPcHRpb24pIHtcbiAgICBjb25zdCB4ID0gbmV3IFJlbGF0aW9uQmFzZTxTLCBSPihcbiAgICAgIGRhdGEsIHJvb3RNb2R1bGUsIG5hbWUsIGhhc0FuZEJlbG9uZ3NUb01hbnkpO1xuICAgIHJldHVybiAobmV3IFByb3h5KHgsIEZvcmVpZ25RdWVyaWFibGUpIGFzIFJlbGF0aW9uPFMsIFI+KTtcbiAgfVxufVxuIiwiaW1wb3J0IFZ1ZXgsIHsgU3RvcmUsIFN0b3JlT3B0aW9ucyB9IGZyb20gXCJ2dWV4XCI7XG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHtcbiAgQWxsSWRzLFxuICBCeUlkcyxcbiAgSGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbixcbiAgSWQsXG4gIFJlbGF0aW9uLFxufSBmcm9tICcuL3JlbGF0aW9uJ1xuXG4vLyDjgZPjga7jg5fjg6njgrDjgqTjg7Ncbi8vIHN0b3JlIOOBriBgaW5zdGFudHNgIOODleOCo+ODvOODq+ODieOBqyBnZXR0ZXIgbGlrZSDjgarjg6Hjgr3jg4Pjg4njgpJcbi8vIOeUqOaEj+OBl+OBpuOBiuOBj+OBqOOAgWBjYXB0dXJlYCDjgYvjgonlkbzjgbPjgaDjgZvjgovjgIJcbi8vIOaXouWtmOOBriBgaW5zdGFudHNgIOOBqOOBl+OBpuOBr+OAgWBmaW5kQnlgIOOChCBgd2hlcmVgIOOBquOBqeOBjOOBguOCi1xuLy8gICAgIHRoaXMuJHN0b3JlLmNhcHR1cmUoJ3VzZXJzL3doZXJlJywgeyBpZDogMTExIH0pXG5pbnRlcmZhY2UgSW5zdGFudHNQbHVnaW48UywgUj4gZXh0ZW5kcyBTdG9yZTxTPiB7XG4gIGNhcHR1cmU6IENhcHR1cmU8UywgUj47XG59XG5cbi8vIFNlZTogaHR0cHM6Ly9yZWR1eC5qcy5vcmcvcmVjaXBlcy9zdHJ1Y3R1cmluZy1yZWR1Y2Vycy9ub3JtYWxpemluZy1zdGF0ZS1zaGFwZVxuaW50ZXJmYWNlIE5vcm1hbGl6ZWRTdGF0ZSB7XG4gIGFsbElkczogQWxsSWRzO1xuICBieUlkczogQnlJZHM7XG4gIGhhc0FuZEJlbG9uZ3NUb01hbnk6IEhhc0FuZEJlbG9uZ3NUb01hbnlPcHRpb25cbn1cblxuaW50ZXJmYWNlIENhcHR1cmU8Tm9ybWFsaXplZFN0YXRlLCBSPiB7XG4gICh0eXBlOiBzdHJpbmcsIHBheWxvYWQ/OiBhbnkpOlxuICBvYmplY3QgfCBSZWxhdGlvbjxOb3JtYWxpemVkU3RhdGUsIFI+O1xufVxuXG5pbnRlcmZhY2UgTm9ybWFsaXplZFN0b3JlT3B0aW9uczxTPiBleHRlbmRzIFN0b3JlT3B0aW9uczxTPiB7XG4gIC8vIGBpbnN0YW50cycgbWF5IGNhcHR1cmUgc25hcHNob3Qgb2Ygc3RvcmUncyBzdGF0ZVxuICAvLyB2aWEgcHVzZXVkby1SYWlscydzIEFjdGl2ZVJlY29yZCBsaWtlIEFQSXMuXG4gIGluc3RhbnRzPzogYW55O1xufVxuXG4vLyBUT0RPOiDjgoLjgaPjgajmi6HlvLXjgZfjgZ/jgYTjgapcbnR5cGUgV2hlcmVDb25kID0geyBba2V5OiBzdHJpbmddOiBhbnkgfTtcblxuaW50ZXJmYWNlIFdoZXJlIHtcbiAgKGFsbElkczogQWxsSWRzLCBieUlkczogQnlJZHMsIGNvbmQ6IFdoZXJlQ29uZClcbiAgOiBBcnJheTxhbnk+O1xufVxuXG5mdW5jdGlvbiBpbmplY3RJbnN0YW50czxTPihvcHRpb25zOiBOb3JtYWxpemVkU3RvcmVPcHRpb25zPFM+KSB7XG4gIGlmICghb3B0aW9ucykge1xuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKG9wdGlvbnMuaW5zdGFudHMpIHtcbiAgICBvcHRpb25zLmdldHRlcnMgPSBvcHRpb25zLmdldHRlcnMgfHwge31cbiAgICBvcHRpb25zLmdldHRlcnMgPSB7IC4uLm9wdGlvbnMuZ2V0dGVycywgLi4ub3B0aW9ucy5pbnN0YW50cyB9XG4gIH1cblxuICBpZiAob3B0aW9ucy5tb2R1bGVzKSB7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBPYmplY3QudmFsdWVzKG9wdGlvbnMubW9kdWxlcykpIHtcbiAgICAgIGluamVjdEluc3RhbnRzKGNoaWxkKVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkZWZpbmVEZWZhdWx0SW5zdGFudHM8Uz4oXG4gIG9wdGlvbnM6IE5vcm1hbGl6ZWRTdG9yZU9wdGlvbnM8Uz4pIHtcbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBvcHRpb25zLmluc3RhbnRzID0geyAuLi5kZWZhdWx0SW5zdGFudHMsIC4uLm9wdGlvbnMuaW5zdGFudHMgfVxuXG4gIGlmIChvcHRpb25zLm1vZHVsZXMpIHtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIE9iamVjdC52YWx1ZXMob3B0aW9ucy5tb2R1bGVzKSkge1xuICAgICAgZGVmaW5lRGVmYXVsdEluc3RhbnRzKGNoaWxkKVxuICAgIH1cbiAgfVxufVxuXG4vLyBJbnN0YWxsIHZ1ZS1pbnN0YW50cy1wbHVnaW4uXG4vL1xuLy8gVGhpcyBwbHVnaW4gd291bGQgcHJvdmlkZSBgY2FwdHVyZWAgb24gYCRzdG9yZWAuXG4vLyBTdG9yZSBpcyBhc3N1bWVkIHRvIGJlIGNvbXBsaWFudCB0b1xuLy8g4oCcTm9ybWFsaXplZCBTdGF0ZSBTaGFwZSBDb25zdGl0dXRpb27igJ06XG4vLyAgIGh0dHBzOi8vcmVkdXguanMub3JnL3JlY2lwZXMvc3RydWN0dXJpbmctcmVkdWNlcnMvbm9ybWFsaXppbmctc3RhdGUtc2hhcGVcbi8vIGFuZCBpZiBzbywgeW91IGNhbiBxdWVyeSB0byB5b3VyIHN0YXRlIGJ5IHBzZXVkbyBSYWlscy1saWtlIG1ldGhvZHMuXG4vL1xuLy8gUGxlYXNlIHNlZSBleGFtcGxlLmpzIHRvIGtub3cgaG93IHRvIHVzZSB0aGlzIHBsdWdpbi5cbmZ1bmN0aW9uIGluc3RhbGw8UywgUj4oKSB7XG4gIGNvbnN0IHZ1ZXggPSB3aW5kb3cuVnVleCB8fCBWdWV4O1xuXG4gIC8vIFBhdGNoIGBWdWV4LlN0b3JlYCB0byBpbmplY3QgSW5zdGFudHMuXG4gIHZ1ZXguU3RvcmUgPSBjbGFzcyBJbnN0YW50c0luamVjdG9yPFM+IGV4dGVuZHMgdnVleC5TdG9yZTxTPiB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogU3RvcmVPcHRpb25zPFM+KSB7XG4gICAgICBkZWZpbmVEZWZhdWx0SW5zdGFudHMob3B0aW9ucylcbiAgICAgIGluamVjdEluc3RhbnRzKG9wdGlvbnMpXG4gICAgICBzdXBlcihvcHRpb25zKVxuICAgIH1cbiAgfTtcblxuICAvLyBgY2FwdHVyZWBcbiAgKDxJbnN0YW50c1BsdWdpbjxTLCBSPiA+IHZ1ZXguU3RvcmUucHJvdG90eXBlKS5jYXB0dXJlID1cbiAgICBmdW5jdGlvbih0eXBlLCBwYXlsb2FkKSB7XG4gICAgICBhc3NlcnQoKCkgPT4gKCF0aGlzLmluc3RhbnRzIHx8IHR5cGUgaW4gdGhpcy5pbnN0YW50cyksIGBcbiR7dHlwZX0gaXMgbm90IGRlZmluZWQgaW4gc3RvcmUuaW5zdGFucy5cblxuRG9uJ3QgeW91IGZvcmdldCBhZGRpbmcgJHt0eXBlfSBpbiBzdG9yZS5pbnN0YW5zP1xuYCk7XG5cbiAgICAgIGNvbnN0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKFxuICAgICAgICB0aGlzLmdldHRlcnMsIHR5cGUpO1xuXG4gICAgICBpZiAoIWRlc2MpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBhc3NlcnQoKCkgPT4gISFkZXNjLmdldCwgYFVua25vd24gZ2V0dGVyLCAke3R5cGV9YCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9ICBkZXNjLmdldC5jYWxsKHRoaXMpKHBheWxvYWQpO1xuICAgICAgY29uc3QgbmFtZSA9IG15TmFtZSh0eXBlKTtcbiAgICAgIC8vIFRPRE86IEZvcmVpZ25RdWVyaWFibGUg44Gn44KC5L2/44GG44Gu44Gn44Gq44KT44GL6Zai5pWw44GN44KN44GGXG4gICAgICBjb25zdCBoYXNBbmRCZWxvbmdzVG9NYW55T3B0aW9uID0gdGhpcy5zdGF0ZVtuYW1lXS5oYXNBbmRCZWxvbmdzVG9NYW55XG5cbiAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHJlc3VsdClcbiAgICAgICAgPyBuZXcgUmVsYXRpb24ocmVzdWx0LCB0aGlzLCBuYW1lLCBoYXNBbmRCZWxvbmdzVG9NYW55T3B0aW9uKVxuICAgICAgICA6IHJlc3VsdDtcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGluc3RhbGxcbn07XG5cbmNvbnN0IHdoZXJlOiBXaGVyZSA9IGZ1bmN0aW9uKGFsbElkcywgYnlJZHMsIGNvbmQpIHtcbiAgcmV0dXJuIGFsbElkc1xuICAgIC5maWx0ZXIoaWQgPT4ge1xuICAgICAgY29uc3Qgb2JqID0gYnlJZHNbaWRdO1xuXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb25kKSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgaWYgKCF2YWx1ZShvYmopKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG9ialtrZXldICE9PSB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KVxuICAgIC5tYXAoaWQgPT4gYnlJZHNbaWRdKTtcbn1cblxuLy8gRGVmYXVsdGx5IGluamVjdGVkIEluc3RhbnRzKHF1ZXJ5IG1ldGhvZHMpLlxuLy8gTWV0aG9kcyB3b3VsZCBiZSBjb21wbGlhbnQgdG8gYHJhaWxzL2FjdGl2ZXJlY29yZGAuXG5jb25zdCBkZWZhdWx0SW5zdGFudHMgPSB7XG4gIHdoZXJlOiAoeyBhbGxJZHMsIGJ5SWRzIH0pID0+IChjb25kOiBXaGVyZUNvbmQpID0+IHtcbiAgICByZXR1cm4gd2hlcmUoYWxsSWRzLCBieUlkcywgY29uZClcbiAgfSxcblxuICBmaW5kQnk6ICh7IGFsbElkcywgYnlJZHMgfSkgPT4gKGNvbmQ6IFdoZXJlQ29uZCkgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSB3aGVyZShhbGxJZHMsIGJ5SWRzLCBjb25kKVxuICAgIGFzc2VydCgoKSA9PiBkYXRhICYmIGRhdGFbMF0sICdSZWNvcmQgbm90IGZvdW5kLicpXG4gICAgcmV0dXJuIGRhdGFbMF1cbiAgfSxcblxuICBmaW5kOiAoeyBieUlkcyB9KSA9PiAoaWQ6IElkKSA9PiB7XG4gICAgY29uc3Qgb2JqID0gYnlJZHNbaWRdXG4gICAgYXNzZXJ0KCgpID0+ICEhb2JqLCBgbm90IGZvdW5kICR7aWR9YClcbiAgICByZXR1cm4gb2JqXG4gIH0sXG5cbiAgLy8gVE9ETzogQWRkIG1ldGhvZHMsIGFsbCwgd2hlcmUsIC4uLiwgZXRjLlxufVxuXG4vLyBVdGlscy5cblxuLy8gYFN0b3JlLnByb3RvdHlwZS5jYXB0dXJlYCDjga7nrKzkuIDlvJXmlbDjgYvjgonjgIFjYXB0dXJlIOOBruWvvuixoeOBruWQjeWJjeOCkuaxguOCgeOBn+OBhFxuLy8gRklYTUU6IOOBk+OBk+OAgeOBqOOBpuOCgiBmcmFnaWxlIOOBquOBruOBp+ebtOOBl+OBn+OBhFxuLy8g44Gd44KC44Gd44KCIHR5cGUg44GL44KJ5rGC44KB44KL44GT44Go6Ieq5L2T44GMIG5vbnNlbnNlIOOBquOBruOBi+OBqu+8n1xuZnVuY3Rpb24gbXlOYW1lKHR5cGU6IHN0cmluZykge1xuICBjb25zdCBwYXRoID0gdHlwZS5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKVxuICByZXR1cm4gcGF0aFtwYXRoLmxlbmd0aCAtIDFdXG59XG4iXSwic291cmNlUm9vdCI6IiJ9