var VuexInstantsPlugin=function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=0)}([function(t,n,r){"use strict";function e(t,n,r){if(void 0===n&&(n=""),void 0===r&&(r=TypeError),!t())throw new r(n)}r.r(n);var o={get:function(t,n){if(n in t)return t[n];if(t.data){if(n in t.data[0])return function(t,n){var r=t.root.state,o=r[n];e((function(){return!!o}));var u=t.data.flatMap((function(t){return t[n]})).map((function(t){return o.byIds[t]})),i=r[n].hasAndBelongsToMany;return new f(u,t.root,n,i)}(t,n);if(t.hasAndBelongsToMany&&t.hasAndBelongsToMany[n])return function(t,n){var r=t.root.state,o=t.hasAndBelongsToMany&&t.hasAndBelongsToMany[n];e((function(){return!!o}));var u=o.associationForeignKey,i=o.foreignKey,a=o.joinName,s=o.theirName,c=r[a],l=r[s];e((function(){return!!c&&!!l}));var d=Object.values(c.byIds),p=t.data.flatMap((function(t){return d.filter((function(n){return n[i]===t.id}))})).map((function(t){return l.byIds[t[u]]})),y=r[s].hasAndBelongsToMany;return new f(p,t.root,s,y)}(t,n);if(function(t){return/\d+/.test(t)}(n))return t.data[n];if("length"===n)return t.data.length;if("function"==typeof t.data[n])return t.data[n].bind(t.data)}throw new TypeError("知らんがな: "+n+".")}};var u,i=function(){return(i=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},a=function(){function t(t,n,r,o){this.nextIdx=0,e((function(){return Array.isArray(t)}),t+" must be type Array."),this.name=r,this.root=n,this.data=t,this.hasAndBelongsToMany=o}return t.prototype[Symbol.iterator]=function(){var t=this.data,n=this.nextIdx;return{next:function(){var r;return n<t.length&&(r=t[n])?(n+=1,{value:r,done:!1}):{value:r,done:!0}}}},t.prototype.pluck=function(t){return this.data.flatMap((function(n){return t.reduce((function(t,r){var e;return i(i({},t),((e={})[r]=n[r],e))}),{})}))},t.prototype.ids=function(){return this.data.map((function(t){return t.id}))},t}(),f=function(t,n,r,e){var u=new a(t,n,r,e);return new Proxy(u,o)},s=(u=function(t,n){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)},function(t,n){function r(){this.constructor=t}u(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),c=function(){return(c=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};n.default={install:function(){window.Vuex.Store=function(t){function n(n){return function t(n){if(n&&(n.instants=c(c({},d),n.instants),n.modules))for(var r=0,e=Object.values(n.modules);r<e.length;r++){t(e[r])}}(n),function t(n){if(n&&(n.instants&&(n.getters=n.getters||{},n.getters=c(c({},n.getters),n.instants)),n.modules))for(var r=0,e=Object.values(n.modules);r<e.length;r++){t(e[r])}}(n),t.call(this,n)||this}return s(n,t),n}(window.Vuex.Store),window.Vuex.Store.prototype.capture=function(t,n){var r=this;e((function(){return!r.instants||t in r.instants}),"\n"+t+" is not defined in store.instans.\n\nDon't you forget adding "+t+" in store.instans?\n");var o=Object.getOwnPropertyDescriptor(this.getters,t);if(o){e((function(){return!!o.get}),"Unknown getter, "+t);var u=o.get.call(this)(n),i=function(t){var n=t.split("/").slice(0,-1);return n[n.length-1]}(t),a=this.state[i].hasAndBelongsToMany;return Array.isArray(u)?new f(u,this,i,a):u}}}};var l=function(t,n,r){return t.filter((function(t){for(var e=n[t],o=0,u=Object.entries(r);o<u.length;o++){var i=u[o],a=i[0],f=i[1];if("function"==typeof f){if(!f(e))return!1}else if(e[a]!==f)return!1}return!0})).map((function(t){return n[t]}))},d={where:function(t){var n=t.allIds,r=t.byIds;return function(t){return l(n,r,t)}},findBy:function(t){var n=t.allIds,r=t.byIds;return function(t){var o=l(n,r,t);return e((function(){return o&&o[0]}),"Record not found."),o[0]}},find:function(t){var n=t.byIds;return function(t){var r=n[t];return e((function(){return!!r}),"not found "+t),r}}}}]).default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9WdWV4SW5zdGFudHNQbHVnaW4vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVnVleEluc3RhbnRzUGx1Z2luLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL1Z1ZXhJbnN0YW50c1BsdWdpbi8uL3NyYy9mb3JlaWduLXF1ZXJpYWJsZS50cyIsIndlYnBhY2s6Ly9WdWV4SW5zdGFudHNQbHVnaW4vLi9zcmMvcmVsYXRpb24udHMiLCJ3ZWJwYWNrOi8vVnVleEluc3RhbnRzUGx1Z2luLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiYXNzZXJ0IiwiY29uZGl0aW9uIiwibXNnIiwiZXJyb3JDbHMiLCJ0YXJnZXQiLCJkYXRhIiwicmVsYXRpb24iLCJjaGlsZE5hbWUiLCJzdGF0ZSIsImNoaWxkU3RhdGUiLCJyb290U3RhdGUiLCJjaGlsZHJlbiIsImZsYXRNYXAiLCJ4IiwibWFwIiwiaWQiLCJieUlkcyIsImhhc0FuZEJlbG9uZ3NUb01hbnlPcHRpb24iLCJoYXNBbmRCZWxvbmdzVG9NYW55Iiwicm9vdCIsImNoaWxkUmVsYXRpb24iLCJhc3NvY2lhdGlvbkZvcmVpZ25LZXkiLCJmb3JlaWduS2V5Iiwiam9pbk5hbWUiLCJ0aGVpck5hbWUiLCJpbnRlcm1lZGlhdGVTdGF0ZSIsImludGVybWVkaWF0ZXMiLCJ2YWx1ZXMiLCJmaWx0ZXIiLCJ5IiwiaGFzQW5kQmVsb25nc1RvTWFueVJlbGF0aW9uIiwidGVzdCIsImlzSW5kZXhOYW1lIiwibGVuZ3RoIiwiVHlwZUVycm9yIiwicm9vdE1vZHVsZSIsIm5leHRJZHgiLCJBcnJheSIsImlzQXJyYXkiLCJ0aGlzIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInBsdWNrIiwia2V5cyIsInJlZHVjZSIsImFjYyIsImlkcyIsIlByb3h5IiwiaW5zdGFsbCIsIndpbmRvdyIsIlZ1ZXgiLCJTdG9yZSIsIm9wdGlvbnMiLCJkZWZpbmVEZWZhdWx0SW5zdGFudHMiLCJpbnN0YW50cyIsImRlZmF1bHRJbnN0YW50cyIsImluamVjdEluc3RhbnRzIiwiZ2V0dGVycyIsImNhcHR1cmUiLCJ0eXBlIiwicGF5bG9hZCIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJyZXN1bHQiLCJwYXRoIiwic3BsaXQiLCJzbGljZSIsIm15TmFtZSIsIndoZXJlIiwiYWxsSWRzIiwiY29uZCIsIm9iaiIsImVudHJpZXMiLCJmaW5kQnkiLCJmaW5kIl0sIm1hcHBpbmdzIjoibUNBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBMERmLE9BckRBRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1Ms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Q3BCLElBQU15RCxFQUFNeEQsRUFBTUQsR0FFbEIsT0FEQWYsR0FBTyxXQUFNLFFBQUV3RSxJQUFLLGFBQWF6RCxHQUMxQnlELFEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChcbiAgY29uZGl0aW9uOiAoKSA9PiBib29sZWFuLFxuICBtc2cgPSAnJywgZXJyb3JDbHMgPSBUeXBlRXJyb3IpIHtcbiAgaWYgKCFjb25kaXRpb24oKSkge1xuICAgIHRocm93IG5ldyBlcnJvckNscyhtc2cpXG4gIH1cbn1cbiIsImltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgSWQsIFJlbGF0aW9uIH0gZnJvbSAnLi9yZWxhdGlvbic7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLy8gUmVsYXRpb24g44Gu44OX44Ot44OR44OG44Kj44KS57WM55Sx44GX44Gf5Yil44GuIFJlbGF0aW9uIOOBuOOBriBnZXR0ZXJcbiAgZ2V0PFMsIFI+KHRhcmdldDogUmVsYXRpb248UywgUj4sIG5hbWU6IHN0cmluZykge1xuICAgIGlmIChuYW1lIGluIHRhcmdldCkge1xuICAgICAgLy8g6YCa5bi444Gu44OX44Ot44OR44OG44Kj44G444Gu44Ki44Kv44K744K5XG4gICAgICByZXR1cm4gdGFyZ2V0W25hbWVdO1xuICAgIH1cblxuICAgIGlmICh0YXJnZXQuZGF0YSkge1xuICAgICAgaWYgKG5hbWUgaW4gdGFyZ2V0LmRhdGFbMF0pIHtcbiAgICAgICAgLy8g5a2Q5L6b44Gu5ZWP44GE5ZCI44KP44GbXG4gICAgICAgIHJldHVybiBjaGlsZFJlbGF0aW9uKHRhcmdldCwgbmFtZSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgaGFzQW5kQmVsb25nc1RvTWFueSA9IHRhcmdldC5oYXNBbmRCZWxvbmdzVG9NYW55XG4gICAgICAgICYmIHRhcmdldC5oYXNBbmRCZWxvbmdzVG9NYW55W25hbWVdO1xuXG4gICAgICBpZiAoaGFzQW5kQmVsb25nc1RvTWFueSkge1xuICAgICAgICAvLyBoYXNBbmRCZWxvbmdzVG9NYW55IOOBruWVj+OBhOWQiOOBm1xuICAgICAgICByZXR1cm4gaGFzQW5kQmVsb25nc1RvTWFueVJlbGF0aW9uKHRhcmdldCwgbmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0luZGV4TmFtZShuYW1lKSkge1xuICAgICAgICAvLyDjgqTjg7Pjg4fjg4Pjgq/jgrkgbGlrZSDjgarlkI3liY3jga7jgajjgY3jga/phY3liJfjgbjjga7jgqLjgq/jgrvjgrnjgpLnnJ/kvLzjgotcbiAgICAgICAgcmV0dXJuIHRhcmdldC5kYXRhW25hbWVdXG4gICAgICB9XG5cbiAgICAgIGlmIChuYW1lID09PSAnbGVuZ3RoJykge1xuICAgICAgICByZXR1cm4gdGFyZ2V0LmRhdGEubGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRhcmdldC5kYXRhW25hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIOmFjeWIl+OBruODoeOCveODg+ODieOBp+OCouOCr+OCu+OCueOBleOCjOOBn+OBqOOBjeOBryB0YXJnZXQuZGF0YSDjgavnp7vorbLjgZnjgotcbiAgICAgICAgcmV0dXJuIHRhcmdldC5kYXRhW25hbWVdLmJpbmQodGFyZ2V0LmRhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYOefpeOCieOCk+OBjOOBqjogJHtuYW1lfS5gKVxuICB9LFxufTtcblxuZnVuY3Rpb24gaXNJbmRleE5hbWUobmFtZTogc3RyaW5nKSB7XG4gIHJldHVybiAvXFxkKy8udGVzdChuYW1lKTtcbn1cblxuZnVuY3Rpb24gY2hpbGRSZWxhdGlvbjxTLCBSPihcbiAgcmVsYXRpb246IFJlbGF0aW9uPFMsIFI+LCBjaGlsZE5hbWU6IHN0cmluZykge1xuICAvLyDplqLpgKPjga7jgYLjgosgcmVsYXRpb24g44Gr5a++44GZ44KL5ZWP5ZCI44GbXG4gIGNvbnN0IHsgc3RhdGU6IHJvb3RTdGF0ZSB9ID0gcmVsYXRpb24ucm9vdDtcbiAgY29uc3QgY2hpbGRTdGF0ZSA9IHJvb3RTdGF0ZVtjaGlsZE5hbWVdO1xuXG4gIGFzc2VydCgoKSA9PiAhIWNoaWxkU3RhdGUpO1xuXG4gIGNvbnN0IGNoaWxkcmVuID0gcmVsYXRpb24uZGF0YVxuICAgIC5mbGF0TWFwKHggPT4geFtjaGlsZE5hbWVdKVxuICAgIC5tYXAoaWQgPT4gY2hpbGRTdGF0ZS5ieUlkc1tpZF0pO1xuICBjb25zdCBoYXNBbmRCZWxvbmdzVG9NYW55T3B0aW9uID1cbiAgICByb290U3RhdGVbY2hpbGROYW1lXS5oYXNBbmRCZWxvbmdzVG9NYW55O1xuXG4gIHJldHVybiBuZXcgUmVsYXRpb24oXG4gICAgY2hpbGRyZW4sIHJlbGF0aW9uLnJvb3QsIGNoaWxkTmFtZSxcbiAgICBoYXNBbmRCZWxvbmdzVG9NYW55T3B0aW9uKTtcbn1cblxuZnVuY3Rpb24gaGFzQW5kQmVsb25nc1RvTWFueVJlbGF0aW9uPFMsIFI+KFxuICByZWxhdGlvbjogUmVsYXRpb248UywgUj4sIGNoaWxkTmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IHsgc3RhdGU6IHJvb3RTdGF0ZSB9ID0gcmVsYXRpb24ucm9vdDtcbiAgY29uc3QgaGFzQW5kQmVsb25nc1RvTWFueSA9IHJlbGF0aW9uLmhhc0FuZEJlbG9uZ3NUb01hbnlcbiAgICAmJiByZWxhdGlvbi5oYXNBbmRCZWxvbmdzVG9NYW55W2NoaWxkTmFtZV07XG5cbiAgYXNzZXJ0KCgpID0+ICEhaGFzQW5kQmVsb25nc1RvTWFueSk7XG5cbiAgY29uc3Qge1xuICAgIGFzc29jaWF0aW9uRm9yZWlnbktleSxcbiAgICBmb3JlaWduS2V5LFxuICAgIGpvaW5OYW1lLFxuICAgIHRoZWlyTmFtZSxcbiAgfSA9IGhhc0FuZEJlbG9uZ3NUb01hbnk7XG4gIGNvbnN0IGludGVybWVkaWF0ZVN0YXRlID0gcm9vdFN0YXRlW2pvaW5OYW1lXTtcbiAgY29uc3QgY2hpbGRTdGF0ZSA9IHJvb3RTdGF0ZVt0aGVpck5hbWVdO1xuXG4gIGFzc2VydCgoKSA9PiAhIWludGVybWVkaWF0ZVN0YXRlICYmICEhY2hpbGRTdGF0ZSk7XG5cbiAgY29uc3QgaW50ZXJtZWRpYXRlcyA9IE9iamVjdC52YWx1ZXMoaW50ZXJtZWRpYXRlU3RhdGUuYnlJZHMpXG4gIGNvbnN0IGNoaWxkcmVuID0gcmVsYXRpb24uZGF0YVxuICAgIC5mbGF0TWFwKHggPT4ge1xuICAgICAgLy8gRklYTUU6IOOBk+OBk+OBteOBpOOBhuOBqyBPKE5eMikg44Gq5rCX44GM44GZ44KL4oCmXG4gICAgICByZXR1cm4gaW50ZXJtZWRpYXRlcy5maWx0ZXIoeSA9PiB5W2ZvcmVpZ25LZXldID09PSB4LmlkKVxuICAgIH0pXG4gICAgLm1hcCh4ID0+IHtcbiAgICAgIHJldHVybiBjaGlsZFN0YXRlLmJ5SWRzW3hbYXNzb2NpYXRpb25Gb3JlaWduS2V5XV07XG4gICAgfSk7XG5cbiAgY29uc3QgaGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbiA9XG4gICAgcm9vdFN0YXRlW3RoZWlyTmFtZV0uaGFzQW5kQmVsb25nc1RvTWFueTtcblxuICByZXR1cm4gbmV3IFJlbGF0aW9uKFxuICAgIGNoaWxkcmVuLCByZWxhdGlvbi5yb290LCB0aGVpck5hbWUsXG4gICAgaGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbik7XG59XG4iLCJpbXBvcnQgeyBNb2R1bGUgfSBmcm9tICd2dWV4JztcblxuaW1wb3J0IEZvcmVpZ25RdWVyaWFibGUgZnJvbSAnLi9mb3JlaWduLXF1ZXJpYWJsZSc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IHR5cGUgSWQgPSBudW1iZXIgfCBzdHJpbmc7XG5cbmV4cG9ydCB0eXBlIEFsbElkcyA9IEFycmF5PElkPjtcblxuZXhwb3J0IGludGVyZmFjZSBOb3JtYWxpemVkUmVsYXRpb25FbnRyeSB7XG4gIGlkOiBJZDtcbn1cblxuLy8gc3RhdGUg44GuIGBieUlkcycg44Gr44GvIElkIOWei+OCreODvOOCkuacn+W+heOBmeOCi1xuLy8g44G+44GfIGBieUlkc2Ag44Gr44GvIGBpZGAg44KS44OX44Ot44OR44OG44Kj44Gr5ZCr44KA44Kq44OW44K444Kn44Kv44OI44KS5pyf5b6F44GZ44KLXG5leHBvcnQgdHlwZSBCeUlkcyA9IHtcbiAgW2lkIGluIElkXTogTm9ybWFsaXplZFJlbGF0aW9uRW50cnlcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbiB7XG4gIFtrZXk6IHN0cmluZ106IHtcbiAgICBhc3NvY2lhdGlvbkZvcmVpZ25LZXk/OiBzdHJpbmcsXG4gICAgZm9yZWlnbktleT86IHN0cmluZyxcbiAgICBqb2luTmFtZT86IHN0cmluZyxcbiAgICB0aGVpck5hbWU/OiBzdHJpbmcsXG4gIH07XG59XG5cbi8vIOmWoumAo1xuZXhwb3J0IGludGVyZmFjZSBSZWxhdGlvbjxTLCBSPlxuICBleHRlbmRzIEl0ZXJhYmxlPE5vcm1hbGl6ZWRSZWxhdGlvbkVudHJ5PiB7XG4gIG5hbWU6IHN0cmluZztcbiAgcm9vdDogTW9kdWxlPFMsIFI+O1xuICBkYXRhOiBBcnJheTxOb3JtYWxpemVkUmVsYXRpb25FbnRyeT47XG4gIGhhc0FuZEJlbG9uZ3NUb01hbnk6IEhhc0FuZEJlbG9uZ3NUb01hbnlPcHRpb247XG59XG5cbi8vIOmWoumAo1xuZXhwb3J0IGNsYXNzIFJlbGF0aW9uQmFzZTxTLCBSPiBpbXBsZW1lbnRzIFJlbGF0aW9uPFMsIFI+IHtcbiAgbmFtZTogc3RyaW5nO1xuICByb290OiBNb2R1bGU8UywgUj47XG4gIGRhdGE6IEFycmF5PE5vcm1hbGl6ZWRSZWxhdGlvbkVudHJ5PjtcbiAgaGFzQW5kQmVsb25nc1RvTWFueTogSGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbjtcbiAgbmV4dElkeDogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhOiBBcnJheTxOb3JtYWxpemVkUmVsYXRpb25FbnRyeT4sXG4gICAgcm9vdE1vZHVsZTogTW9kdWxlPFMsIFI+LFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBoYXNBbmRCZWxvbmdzVG9NYW55OiBIYXNBbmRCZWxvbmdzVG9NYW55T3B0aW9uKSB7XG5cbiAgICBhc3NlcnQoKCkgPT4gQXJyYXkuaXNBcnJheShkYXRhKSxcbiAgICAgICAgICAgYCR7ZGF0YX0gbXVzdCBiZSB0eXBlIEFycmF5LmApXG5cbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMucm9vdCA9IHJvb3RNb2R1bGU7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLmhhc0FuZEJlbG9uZ3NUb01hbnkgPSBoYXNBbmRCZWxvbmdzVG9NYW55O1xuICB9XG5cbiAgLy8g44Kk44OG44Os44O844K/44Kk44Oz44K/44O844OV44Kn44O844K5XG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpcztcbiAgICBsZXQgeyBuZXh0SWR4IH0gPSB0aGlzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHQoKSB7XG4gICAgICAgIGxldCB2YWx1ZTogYW55O1xuXG4gICAgICAgIGlmIChuZXh0SWR4IDwgZGF0YS5sZW5ndGhcbiAgICAgICAgICAgICYmICh2YWx1ZSA9IGRhdGFbbmV4dElkeF0pKSB7XG4gICAgICAgICAgbmV4dElkeCArPSAxO1xuICAgICAgICAgIHJldHVybiB7IHZhbHVlLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7IHZhbHVlLCBkb25lOiB0cnVlIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRPRE86IOOCguOBo+OBqOODoeOCveODg+ODieWFheWun+OBl+OBvuOBl+OCh+OBhlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmFpbHMvcmFpbHMvYmxvYi9tYXN0ZXIvYWN0aXZlcmVjb3JkL2xpYi9hY3RpdmVfcmVjb3JkL3JlbGF0aW9uL2NhbGN1bGF0aW9ucy5yYlxuXG4gIHBsdWNrKGtleXM6IEFycmF5PHN0cmluZz4pIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmZsYXRNYXAociA9PiB7XG4gICAgICByZXR1cm4ga2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoe1xuICAgICAgICAuLi5hY2MsXG4gICAgICAgIFtrZXldOiByW2tleV0sXG4gICAgICB9KSwge30pXG4gICAgfSk7XG4gIH1cblxuICBpZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5tYXAociA9PiByLmlkKVxuICB9XG59XG5cbi8vIOWun+mam+OBriBSZWxhdGlvbiDjgq/jg6njgrlcbi8vIFJlbGF0aW9uQmFzZSArIEZvcmVpZ25RdWVyaWFibGVcbmV4cG9ydCBjbGFzcyBSZWxhdGlvbjxTLCBSPiB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGE6IEFycmF5PE5vcm1hbGl6ZWRSZWxhdGlvbkVudHJ5PixcbiAgICByb290TW9kdWxlOiBNb2R1bGU8UywgUj4sXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGhhc0FuZEJlbG9uZ3NUb01hbnk6IEhhc0FuZEJlbG9uZ3NUb01hbnlPcHRpb24pIHtcbiAgICBjb25zdCB4ID0gbmV3IFJlbGF0aW9uQmFzZTxTLCBSPihcbiAgICAgIGRhdGEsIHJvb3RNb2R1bGUsIG5hbWUsIGhhc0FuZEJlbG9uZ3NUb01hbnkpO1xuICAgIHJldHVybiAobmV3IFByb3h5KHgsIEZvcmVpZ25RdWVyaWFibGUpIGFzIFJlbGF0aW9uPFMsIFI+KTtcbiAgfVxufVxuIiwiaW1wb3J0IFZ1ZXgsIHsgU3RvcmUsIFN0b3JlT3B0aW9ucyB9IGZyb20gXCJ2dWV4XCI7XG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHtcbiAgQWxsSWRzLFxuICBCeUlkcyxcbiAgSGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbixcbiAgSWQsXG4gIFJlbGF0aW9uLFxufSBmcm9tICcuL3JlbGF0aW9uJ1xuXG4vLyDjgZPjga7jg5fjg6njgrDjgqTjg7Ncbi8vIHN0b3JlIOOBriBgaW5zdGFudHNgIOODleOCo+ODvOODq+ODieOBqyBnZXR0ZXIgbGlrZSDjgarjg6Hjgr3jg4Pjg4njgpJcbi8vIOeUqOaEj+OBl+OBpuOBiuOBj+OBqOOAgWBjYXB0dXJlYCDjgYvjgonlkbzjgbPjgaDjgZvjgovjgIJcbi8vIOaXouWtmOOBriBgaW5zdGFudHNgIOOBqOOBl+OBpuOBr+OAgWBmaW5kQnlgIOOChCBgd2hlcmVgIOOBquOBqeOBjOOBguOCi1xuLy8gICAgIHRoaXMuJHN0b3JlLmNhcHR1cmUoJ3VzZXJzL3doZXJlJywgeyBpZDogMTExIH0pXG5pbnRlcmZhY2UgSW5zdGFudHNQbHVnaW48UywgUj4gZXh0ZW5kcyBTdG9yZTxTPiB7XG4gIGNhcHR1cmU6IENhcHR1cmU8UywgUj47XG59XG5cbi8vIFNlZTogaHR0cHM6Ly9yZWR1eC5qcy5vcmcvcmVjaXBlcy9zdHJ1Y3R1cmluZy1yZWR1Y2Vycy9ub3JtYWxpemluZy1zdGF0ZS1zaGFwZVxuaW50ZXJmYWNlIE5vcm1hbGl6ZWRTdGF0ZSB7XG4gIGFsbElkczogQWxsSWRzO1xuICBieUlkczogQnlJZHM7XG4gIGhhc0FuZEJlbG9uZ3NUb01hbnk6IEhhc0FuZEJlbG9uZ3NUb01hbnlPcHRpb25cbn1cblxuaW50ZXJmYWNlIENhcHR1cmU8Tm9ybWFsaXplZFN0YXRlLCBSPiB7XG4gICh0eXBlOiBzdHJpbmcsIHBheWxvYWQ/OiBhbnkpOlxuICBvYmplY3QgfCBSZWxhdGlvbjxOb3JtYWxpemVkU3RhdGUsIFI+O1xufVxuXG5pbnRlcmZhY2UgTm9ybWFsaXplZFN0b3JlT3B0aW9uczxTPiBleHRlbmRzIFN0b3JlT3B0aW9uczxTPiB7XG4gIC8vIGBpbnN0YW50cycgbWF5IGNhcHR1cmUgc25hcHNob3Qgb2Ygc3RvcmUncyBzdGF0ZVxuICAvLyB2aWEgcHVzZXVkby1SYWlscydzIEFjdGl2ZVJlY29yZCBsaWtlIEFQSXMuXG4gIGluc3RhbnRzPzogYW55O1xufVxuXG4vLyBUT0RPOiDjgoLjgaPjgajmi6HlvLXjgZfjgZ/jgYTjgapcbnR5cGUgV2hlcmVDb25kID0geyBba2V5OiBzdHJpbmddOiBhbnkgfTtcblxuaW50ZXJmYWNlIFdoZXJlIHtcbiAgKGFsbElkczogQWxsSWRzLCBieUlkczogQnlJZHMsIGNvbmQ6IFdoZXJlQ29uZClcbiAgOiBBcnJheTxhbnk+O1xufVxuXG5mdW5jdGlvbiBpbmplY3RJbnN0YW50czxTPihvcHRpb25zOiBOb3JtYWxpemVkU3RvcmVPcHRpb25zPFM+KSB7XG4gIGlmICghb3B0aW9ucykge1xuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKG9wdGlvbnMuaW5zdGFudHMpIHtcbiAgICBvcHRpb25zLmdldHRlcnMgPSBvcHRpb25zLmdldHRlcnMgfHwge31cbiAgICBvcHRpb25zLmdldHRlcnMgPSB7IC4uLm9wdGlvbnMuZ2V0dGVycywgLi4ub3B0aW9ucy5pbnN0YW50cyB9XG4gIH1cblxuICBpZiAob3B0aW9ucy5tb2R1bGVzKSB7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBPYmplY3QudmFsdWVzKG9wdGlvbnMubW9kdWxlcykpIHtcbiAgICAgIGluamVjdEluc3RhbnRzKGNoaWxkKVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkZWZpbmVEZWZhdWx0SW5zdGFudHM8Uz4oXG4gIG9wdGlvbnM6IE5vcm1hbGl6ZWRTdG9yZU9wdGlvbnM8Uz4pIHtcbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBvcHRpb25zLmluc3RhbnRzID0geyAuLi5kZWZhdWx0SW5zdGFudHMsIC4uLm9wdGlvbnMuaW5zdGFudHMgfVxuXG4gIGlmIChvcHRpb25zLm1vZHVsZXMpIHtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIE9iamVjdC52YWx1ZXMob3B0aW9ucy5tb2R1bGVzKSkge1xuICAgICAgZGVmaW5lRGVmYXVsdEluc3RhbnRzKGNoaWxkKVxuICAgIH1cbiAgfVxufVxuXG4vLyBJbnN0YWxsIHZ1ZS1pbnN0YW50cy1wbHVnaW4uXG4vL1xuLy8gVGhpcyBwbHVnaW4gd291bGQgcHJvdmlkZSBgY2FwdHVyZWAgb24gYCRzdG9yZWAuXG4vLyBTdG9yZSBpcyBhc3N1bWVkIHRvIGJlIGNvbXBsaWFudCB0b1xuLy8g4oCcTm9ybWFsaXplZCBTdGF0ZSBTaGFwZSBDb25zdGl0dXRpb27igJ06XG4vLyAgIGh0dHBzOi8vcmVkdXguanMub3JnL3JlY2lwZXMvc3RydWN0dXJpbmctcmVkdWNlcnMvbm9ybWFsaXppbmctc3RhdGUtc2hhcGVcbi8vIGFuZCBpZiBzbywgeW91IGNhbiBxdWVyeSB0byB5b3VyIHN0YXRlIGJ5IHBzZXVkbyBSYWlscy1saWtlIG1ldGhvZHMuXG4vL1xuLy8gUGxlYXNlIHNlZSBleGFtcGxlLmpzIHRvIGtub3cgaG93IHRvIHVzZSB0aGlzIHBsdWdpbi5cbmZ1bmN0aW9uIGluc3RhbGw8UywgUj4oKSB7XG4gIC8vIFBhdGNoIGBWdWV4LlN0b3JlYCB0byBpbmplY3QgSW5zdGFudHMuXG4gIHdpbmRvdy5WdWV4LlN0b3JlID0gY2xhc3MgSW5zdGFudHNJbmplY3RvcjxTPlxuICAgIGV4dGVuZHMgd2luZG93LlZ1ZXguU3RvcmU8Uz4ge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFN0b3JlT3B0aW9uczxTPikge1xuICAgICAgZGVmaW5lRGVmYXVsdEluc3RhbnRzKG9wdGlvbnMpXG4gICAgICBpbmplY3RJbnN0YW50cyhvcHRpb25zKVxuICAgICAgc3VwZXIob3B0aW9ucylcbiAgICB9XG4gIH07XG5cbiAgLy8gYGNhcHR1cmVgXG4gICg8SW5zdGFudHNQbHVnaW48UywgUj4gPiB3aW5kb3cuVnVleC5TdG9yZS5wcm90b3R5cGUpLmNhcHR1cmUgPVxuICAgIGZ1bmN0aW9uKHR5cGUsIHBheWxvYWQpIHtcbiAgICAgIGFzc2VydCgoKSA9PiAoIXRoaXMuaW5zdGFudHMgfHwgdHlwZSBpbiB0aGlzLmluc3RhbnRzKSwgYFxuJHt0eXBlfSBpcyBub3QgZGVmaW5lZCBpbiBzdG9yZS5pbnN0YW5zLlxuXG5Eb24ndCB5b3UgZm9yZ2V0IGFkZGluZyAke3R5cGV9IGluIHN0b3JlLmluc3RhbnM/XG5gKTtcblxuICAgICAgY29uc3QgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoXG4gICAgICAgIHRoaXMuZ2V0dGVycywgdHlwZSk7XG5cbiAgICAgIGlmICghZGVzYykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGFzc2VydCgoKSA9PiAhIWRlc2MuZ2V0LCBgVW5rbm93biBnZXR0ZXIsICR7dHlwZX1gKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gIGRlc2MuZ2V0LmNhbGwodGhpcykocGF5bG9hZCk7XG4gICAgICBjb25zdCBuYW1lID0gbXlOYW1lKHR5cGUpO1xuICAgICAgLy8gVE9ETzogRm9yZWlnblF1ZXJpYWJsZSDjgafjgoLkvb/jgYbjga7jgafjgarjgpPjgYvplqLmlbDjgY3jgo3jgYZcbiAgICAgIGNvbnN0IGhhc0FuZEJlbG9uZ3NUb01hbnlPcHRpb24gPSB0aGlzLnN0YXRlW25hbWVdLmhhc0FuZEJlbG9uZ3NUb01hbnlcblxuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocmVzdWx0KVxuICAgICAgICA/IG5ldyBSZWxhdGlvbihyZXN1bHQsIHRoaXMsIG5hbWUsIGhhc0FuZEJlbG9uZ3NUb01hbnlPcHRpb24pXG4gICAgICAgIDogcmVzdWx0O1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaW5zdGFsbFxufTtcblxuY29uc3Qgd2hlcmU6IFdoZXJlID0gZnVuY3Rpb24oYWxsSWRzLCBieUlkcywgY29uZCkge1xuICByZXR1cm4gYWxsSWRzXG4gICAgLmZpbHRlcihpZCA9PiB7XG4gICAgICBjb25zdCBvYmogPSBieUlkc1tpZF07XG5cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNvbmQpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBpZiAoIXZhbHVlKG9iaikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAob2JqW2tleV0gIT09IHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pXG4gICAgLm1hcChpZCA9PiBieUlkc1tpZF0pO1xufVxuXG4vLyBEZWZhdWx0bHkgaW5qZWN0ZWQgSW5zdGFudHMocXVlcnkgbWV0aG9kcykuXG4vLyBNZXRob2RzIHdvdWxkIGJlIGNvbXBsaWFudCB0byBgcmFpbHMvYWN0aXZlcmVjb3JkYC5cbmNvbnN0IGRlZmF1bHRJbnN0YW50cyA9IHtcbiAgd2hlcmU6ICh7IGFsbElkcywgYnlJZHMgfSkgPT4gKGNvbmQ6IFdoZXJlQ29uZCkgPT4ge1xuICAgIHJldHVybiB3aGVyZShhbGxJZHMsIGJ5SWRzLCBjb25kKVxuICB9LFxuXG4gIGZpbmRCeTogKHsgYWxsSWRzLCBieUlkcyB9KSA9PiAoY29uZDogV2hlcmVDb25kKSA9PiB7XG4gICAgY29uc3QgZGF0YSA9IHdoZXJlKGFsbElkcywgYnlJZHMsIGNvbmQpXG4gICAgYXNzZXJ0KCgpID0+IGRhdGEgJiYgZGF0YVswXSwgJ1JlY29yZCBub3QgZm91bmQuJylcbiAgICByZXR1cm4gZGF0YVswXVxuICB9LFxuXG4gIGZpbmQ6ICh7IGJ5SWRzIH0pID0+IChpZDogSWQpID0+IHtcbiAgICBjb25zdCBvYmogPSBieUlkc1tpZF1cbiAgICBhc3NlcnQoKCkgPT4gISFvYmosIGBub3QgZm91bmQgJHtpZH1gKVxuICAgIHJldHVybiBvYmpcbiAgfSxcblxuICAvLyBUT0RPOiBBZGQgbWV0aG9kcywgYWxsLCB3aGVyZSwgLi4uLCBldGMuXG59XG5cbi8vIFV0aWxzLlxuXG4vLyBgU3RvcmUucHJvdG90eXBlLmNhcHR1cmVgIOOBruesrOS4gOW8leaVsOOBi+OCieOAgWNhcHR1cmUg44Gu5a++6LGh44Gu5ZCN5YmN44KS5rGC44KB44Gf44GEXG4vLyBGSVhNRTog44GT44GT44CB44Go44Gm44KCIGZyYWdpbGUg44Gq44Gu44Gn55u044GX44Gf44GEXG4vLyDjgZ3jgoLjgZ3jgoIgdHlwZSDjgYvjgonmsYLjgoHjgovjgZPjgajoh6rkvZPjgYwgbm9uc2Vuc2Ug44Gq44Gu44GL44Gq77yfXG5mdW5jdGlvbiBteU5hbWUodHlwZTogc3RyaW5nKSB7XG4gIGNvbnN0IHBhdGggPSB0eXBlLnNwbGl0KCcvJykuc2xpY2UoMCwgLTEpXG4gIHJldHVybiBwYXRoW3BhdGgubGVuZ3RoIC0gMV1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=