var VuexInstantsPlugin=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";(function(t){var n=("undefined"!=typeof window?window:void 0!==t?t:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function r(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function o(t){return null!==t&&"object"==typeof t}var i=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"==typeof n?n():n)||{}},a={namespaced:{configurable:!0}};a.namespaced.get=function(){return!!this._rawModule.namespaced},i.prototype.addChild=function(t,e){this._children[t]=e},i.prototype.removeChild=function(t){delete this._children[t]},i.prototype.getChild=function(t){return this._children[t]},i.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},i.prototype.forEachChild=function(t){r(this._children,t)},i.prototype.forEachGetter=function(t){this._rawModule.getters&&r(this._rawModule.getters,t)},i.prototype.forEachAction=function(t){this._rawModule.actions&&r(this._rawModule.actions,t)},i.prototype.forEachMutation=function(t){this._rawModule.mutations&&r(this._rawModule.mutations,t)},Object.defineProperties(i.prototype,a);var u=function(t){this.register([],t,!1)};u.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},u.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return t+((e=e.getChild(n)).namespaced?n+"/":"")}),"")},u.prototype.update=function(t){!function t(e,n,r){0;if(n.update(r),r.modules)for(var o in r.modules){if(!n.getChild(o))return void 0;t(e.concat(o),n.getChild(o),r.modules[o])}}([],this.root,t)},u.prototype.register=function(t,e,n){var o=this;void 0===n&&(n=!0);var a=new i(e,n);0===t.length?this.root=a:this.get(t.slice(0,-1)).addChild(t[t.length-1],a);e.modules&&r(e.modules,(function(e,r){o.register(t.concat(r),e,n)}))},u.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];e.getChild(n).runtime&&e.removeChild(n)};var s;var c=function(t){var e=this;void 0===t&&(t={}),!s&&"undefined"!=typeof window&&window.Vue&&y(window.Vue);var r=t.plugins;void 0===r&&(r=[]);var o=t.strict;void 0===o&&(o=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new u(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new s,this._makeLocalGettersCache=Object.create(null);var i=this,a=this.dispatch,c=this.commit;this.dispatch=function(t,e){return a.call(i,t,e)},this.commit=function(t,e,n){return c.call(i,t,e,n)},this.strict=o;var f=this._modules.root.state;d(this,f,[],this._modules.root),h(this,f),r.forEach((function(t){return t(e)})),(void 0!==t.devtools?t.devtools:s.config.devtools)&&function(t){n&&(t._devtoolHook=n,n.emit("vuex:init",t),n.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){n.emit("vuex:mutation",t,e)})))}(this)},f={state:{configurable:!0}};function l(t,e){return e.indexOf(t)<0&&e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function p(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;d(t,n,[],t._modules.root,!0),h(t,n,e)}function h(t,e,n){var o=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,a={};r(i,(function(e,n){a[n]=function(t,e){return function(){return t(e)}}(e,t),Object.defineProperty(t.getters,n,{get:function(){return t._vm[n]},enumerable:!0})}));var u=s.config.silent;s.config.silent=!0,t._vm=new s({data:{$$state:e},computed:a}),s.config.silent=u,t.strict&&function(t){t._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}(t),o&&(n&&t._withCommit((function(){o._data.$$state=null})),s.nextTick((function(){return o.$destroy()})))}function d(t,e,n,r,o){var i=!n.length,a=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[a],t._modulesNamespaceMap[a]=r),!i&&!o){var u=v(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit((function(){s.set(u,c,r.state)}))}var f=r.context=function(t,e,n){var r=""===e,o={dispatch:r?t.dispatch:function(n,r,o){var i=m(n,r,o),a=i.payload,u=i.options,s=i.type;return u&&u.root||(s=e+s),t.dispatch(s,a)},commit:r?t.commit:function(n,r,o){var i=m(n,r,o),a=i.payload,u=i.options,s=i.type;u&&u.root||(s=e+s),t.commit(s,a,u)}};return Object.defineProperties(o,{getters:{get:r?function(){return t.getters}:function(){return function(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach((function(o){if(o.slice(0,r)===e){var i=o.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[o]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}(t,e)}},state:{get:function(){return v(t.state,n)}}}),o}(t,a,n);r.forEachMutation((function(e,n){!function(t,e,n,r){(t._mutations[e]||(t._mutations[e]=[])).push((function(e){n.call(t,r.state,e)}))}(t,a+n,e,f)})),r.forEachAction((function(e,n){var r=e.root?n:a+n,o=e.handler||e;!function(t,e,n,r){(t._actions[e]||(t._actions[e]=[])).push((function(e){var o,i=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return(o=i)&&"function"==typeof o.then||(i=Promise.resolve(i)),t._devtoolHook?i.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):i}))}(t,r,o,f)})),r.forEachGetter((function(e,n){!function(t,e,n,r){if(t._wrappedGetters[e])return void 0;t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)}}(t,a+n,e,f)})),r.forEachChild((function(r,i){d(t,e,n.concat(i),r,o)}))}function v(t,e){return e.reduce((function(t,e){return t[e]}),t)}function m(t,e,n){return o(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}function y(t){s&&t===s||
/**
 * vuex v3.1.3
 * (c) 2020 Evan You
 * @license MIT
 */
function(t){if(Number(t.version.split(".")[0])>=2)t.mixin({beforeCreate:n});else{var e=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[n].concat(t.init):n,e.call(this,t)}}function n(){var t=this.$options;t.store?this.$store="function"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}}(s=t)}f.state.get=function(){return this._vm._data.$$state},f.state.set=function(t){0},c.prototype.commit=function(t,e,n){var r=this,o=m(t,e,n),i=o.type,a=o.payload,u=(o.options,{type:i,payload:a}),s=this._mutations[i];s&&(this._withCommit((function(){s.forEach((function(t){t(a)}))})),this._subscribers.slice().forEach((function(t){return t(u,r.state)})))},c.prototype.dispatch=function(t,e){var n=this,r=m(t,e),o=r.type,i=r.payload,a={type:o,payload:i},u=this._actions[o];if(u){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(a,n.state)}))}catch(t){0}return(u.length>1?Promise.all(u.map((function(t){return t(i)}))):u[0](i)).then((function(t){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(a,n.state)}))}catch(t){0}return t}))}},c.prototype.subscribe=function(t){return l(t,this._subscribers)},c.prototype.subscribeAction=function(t){return l("function"==typeof t?{before:t}:t,this._actionSubscribers)},c.prototype.watch=function(t,e,n){var r=this;return this._watcherVM.$watch((function(){return t(r.state,r.getters)}),e,n)},c.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._vm._data.$$state=t}))},c.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),d(this,this.state,t,this._modules.get(t),n.preserveState),h(this,this.state)},c.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var n=v(e.state,t.slice(0,-1));s.delete(n,t[t.length-1])})),p(this)},c.prototype.hotUpdate=function(t){this._modules.update(t),p(this,!0)},c.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(c.prototype,f);var g=j((function(t,e){var n={};return O(e).forEach((function(e){var r=e.key,o=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=M(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"==typeof o?o.call(this,e,n):e[o]},n[r].vuex=!0})),n})),_=j((function(t,e){var n={};return O(e).forEach((function(e){var r=e.key,o=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.commit;if(t){var i=M(this.$store,"mapMutations",t);if(!i)return;r=i.context.commit}return"function"==typeof o?o.apply(this,[r].concat(e)):r.apply(this.$store,[o].concat(e))}})),n})),b=j((function(t,e){var n={};return O(e).forEach((function(e){var r=e.key,o=e.val;o=t+o,n[r]=function(){if(!t||M(this.$store,"mapGetters",t))return this.$store.getters[o]},n[r].vuex=!0})),n})),w=j((function(t,e){var n={};return O(e).forEach((function(e){var r=e.key,o=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var i=M(this.$store,"mapActions",t);if(!i)return;r=i.context.dispatch}return"function"==typeof o?o.apply(this,[r].concat(e)):r.apply(this.$store,[o].concat(e))}})),n}));function O(t){return function(t){return Array.isArray(t)||o(t)}(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function j(t){return function(e,n){return"string"!=typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function M(t,e,n){return t._modulesNamespaceMap[n]}var x={Store:c,install:y,version:"3.1.3",mapState:g,mapMutations:_,mapGetters:b,mapActions:w,createNamespacedHelpers:function(t){return{mapState:g.bind(null,t),mapGetters:b.bind(null,t),mapMutations:_.bind(null,t),mapActions:w.bind(null,t)}}};e.a=x}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var r=n(0);function o(t,e,n){if(void 0===e&&(e=""),void 0===n&&(n=TypeError),!t())throw new n(e)}var i={get:function(t,e){if(e in t)return t[e];if(t.data){if("length"===e)return t.data.length;if("function"==typeof t.data[e])return t.data[e].bind(t.data);if(!t.data.length)return new c([],t.root,e,null);if(e in t.data[0])return function(t,e){var n=t.root.state,r=n[e];o((function(){return!!r}));var i=t.data.flatMap((function(t){return t[e]})).map((function(t){return r.byIds[t]})),a=n[e].hasAndBelongsToMany;return new c(i,t.root,e,a)}(t,e);if(t.hasAndBelongsToMany&&t.hasAndBelongsToMany[e])return function(t,e){var n=t.root.state,r=t.hasAndBelongsToMany&&t.hasAndBelongsToMany[e];o((function(){return!!r}));var i=r.associationForeignKey,a=r.foreignKey,u=r.joinName,s=r.theirName,f=n[u],l=n[s];o((function(){return!!f&&!!l}));var p=Object.values(f.byIds),h=t.data.flatMap((function(t){return p.filter((function(e){return e[a]===t.id}))})).map((function(t){return l.byIds[t[i]]})),d=n[s].hasAndBelongsToMany;return new c(h,t.root,s,d)}(t,e);if(function(t){return/\d+/.test(t)}(e))return t.data[e]}throw new TypeError("知らんがな: "+e+".")}};var a,u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s=function(){function t(t,e,n,r){this.nextIdx=0,o((function(){return Array.isArray(t)}),t+" must be type Array."),this.name=n,this.root=e,this.data=t,this.hasAndBelongsToMany=r}return t.prototype[Symbol.iterator]=function(){var t=this.data,e=this.nextIdx;return{next:function(){var n;return e<t.length&&(n=t[e])?(e+=1,{value:n,done:!1}):{value:n,done:!0}}}},t.prototype.pluck=function(t){return this.data.flatMap((function(e){return t.reduce((function(t,n){var r;return u(u({},t),((r={})[n]=e[n],r))}),{})}))},t.prototype.ids=function(){return this.data.map((function(t){return t.id}))},t}(),c=function(t,e,n,r){var o=new s(t,e,n,r);return new Proxy(o,i)},f=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};e.default={install:function(){var t=window.Vuex||r.a;t.Store=function(t){function e(e){return function t(e){if(e&&(e.instants=l(l({},h),e.instants),e.modules))for(var n=0,r=Object.values(e.modules);n<r.length;n++){t(r[n])}}(e),function t(e){if(e&&(e.instants&&(e.getters=e.getters||{},e.getters=l(l({},e.getters),e.instants)),e.modules))for(var n=0,r=Object.values(e.modules);n<r.length;n++){t(r[n])}}(e),t.call(this,e)||this}return f(e,t),e}(t.Store),t.Store.prototype.capture=function(t,e){var n=this;o((function(){return!n.instants||t in n.instants}),"\n"+t+" is not defined in store.instans.\n\nDon't you forget adding "+t+" in store.instans?\n");var r=Object.getOwnPropertyDescriptor(this.getters,t);o((function(){return!!r&&!!r.get}),"Unknown getter, "+t);var i=r.get.call(this)(e),a=function(t){var e=t.split("/").slice(0,-1);return e[e.length-1]}(t),u=this.state[a].hasAndBelongsToMany;return Array.isArray(i)?new c(i,this,a,u):i}}};var p=function(t,e,n){return t.filter((function(t){for(var r=e[t],o=0,i=Object.entries(n);o<i.length;o++){var a=i[o],u=a[0],s=a[1];if("function"==typeof s){if(!s(r))return!1}else if(r[u]!==s)return!1}return!0})).map((function(t){return e[t]}))},h={all:function(t){var e=t.byIds;return function(){return Object.values(e)}},where:function(t){var e=t.allIds,n=t.byIds;return function(t){return p(e,n,t)}},findBy:function(t){var e=t.allIds,n=t.byIds;return function(t){var r=p(e,n,t);return o((function(){return r&&r[0]}),"Record not found."),r[0]}},find:function(t){var e=t.byIds;return function(t){var n=e[t];return o((function(){return!!n}),"not found "+t),n}}}}]).default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9WdWV4SW5zdGFudHNQbHVnaW4vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVnVleEluc3RhbnRzUGx1Z2luLy4vbm9kZV9tb2R1bGVzL3Z1ZXgvZGlzdC92dWV4LmVzbS5qcyIsIndlYnBhY2s6Ly9WdWV4SW5zdGFudHNQbHVnaW4vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovL1Z1ZXhJbnN0YW50c1BsdWdpbi8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly9WdWV4SW5zdGFudHNQbHVnaW4vLi9zcmMvZm9yZWlnbi1xdWVyaWFibGUudHMiLCJ3ZWJwYWNrOi8vVnVleEluc3RhbnRzUGx1Z2luLy4vc3JjL3JlbGF0aW9uLnRzIiwid2VicGFjazovL1Z1ZXhJbnN0YW50c1BsdWdpbi8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImRldnRvb2xIb29rIiwid2luZG93IiwiZ2xvYmFsIiwiX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyIsImZvckVhY2hWYWx1ZSIsIm9iaiIsImZuIiwia2V5cyIsImZvckVhY2giLCJpc09iamVjdCIsIk1vZHVsZSIsInJhd01vZHVsZSIsInJ1bnRpbWUiLCJ0aGlzIiwiX2NoaWxkcmVuIiwiX3Jhd01vZHVsZSIsInJhd1N0YXRlIiwic3RhdGUiLCJwcm90b3R5cGVBY2Nlc3NvcnMiLCJuYW1lc3BhY2VkIiwiY29uZmlndXJhYmxlIiwiYWRkQ2hpbGQiLCJyZW1vdmVDaGlsZCIsImdldENoaWxkIiwidXBkYXRlIiwiYWN0aW9ucyIsIm11dGF0aW9ucyIsImdldHRlcnMiLCJmb3JFYWNoQ2hpbGQiLCJmb3JFYWNoR2V0dGVyIiwiZm9yRWFjaEFjdGlvbiIsImZvckVhY2hNdXRhdGlvbiIsImRlZmluZVByb3BlcnRpZXMiLCJNb2R1bGVDb2xsZWN0aW9uIiwicmF3Um9vdE1vZHVsZSIsInJlZ2lzdGVyIiwicGF0aCIsInJlZHVjZSIsInJvb3QiLCJnZXROYW1lc3BhY2UiLCJuYW1lc3BhY2UiLCJ0YXJnZXRNb2R1bGUiLCJuZXdNb2R1bGUiLCJjb25jYXQiLCJ0aGlzJDEiLCJsZW5ndGgiLCJzbGljZSIsInJhd0NoaWxkTW9kdWxlIiwidW5yZWdpc3RlciIsInBhcmVudCIsIlZ1ZSIsIlN0b3JlIiwib3B0aW9ucyIsImluc3RhbGwiLCJwbHVnaW5zIiwic3RyaWN0IiwiX2NvbW1pdHRpbmciLCJfYWN0aW9ucyIsIl9hY3Rpb25TdWJzY3JpYmVycyIsIl9tdXRhdGlvbnMiLCJfd3JhcHBlZEdldHRlcnMiLCJfbW9kdWxlcyIsIl9tb2R1bGVzTmFtZXNwYWNlTWFwIiwiX3N1YnNjcmliZXJzIiwiX3dhdGNoZXJWTSIsIl9tYWtlTG9jYWxHZXR0ZXJzQ2FjaGUiLCJzdG9yZSIsImRpc3BhdGNoIiwiY29tbWl0IiwidHlwZSIsInBheWxvYWQiLCJpbnN0YWxsTW9kdWxlIiwicmVzZXRTdG9yZVZNIiwicGx1Z2luIiwidW5kZWZpbmVkIiwiZGV2dG9vbHMiLCJjb25maWciLCJfZGV2dG9vbEhvb2siLCJlbWl0Iiwib24iLCJ0YXJnZXRTdGF0ZSIsInJlcGxhY2VTdGF0ZSIsInN1YnNjcmliZSIsIm11dGF0aW9uIiwiZGV2dG9vbFBsdWdpbiIsInByb3RvdHlwZUFjY2Vzc29ycyQxIiwiZ2VuZXJpY1N1YnNjcmliZSIsInN1YnMiLCJpbmRleE9mIiwicHVzaCIsInNwbGljZSIsInJlc2V0U3RvcmUiLCJob3QiLCJvbGRWbSIsIl92bSIsIndyYXBwZWRHZXR0ZXJzIiwiY29tcHV0ZWQiLCJhcmciLCJwYXJ0aWFsIiwic2lsZW50IiwiZGF0YSIsIiQkc3RhdGUiLCIkd2F0Y2giLCJfZGF0YSIsImRlZXAiLCJzeW5jIiwiZW5hYmxlU3RyaWN0TW9kZSIsIl93aXRoQ29tbWl0IiwibmV4dFRpY2siLCIkZGVzdHJveSIsInJvb3RTdGF0ZSIsImlzUm9vdCIsInBhcmVudFN0YXRlIiwiZ2V0TmVzdGVkU3RhdGUiLCJtb2R1bGVOYW1lIiwic2V0IiwibG9jYWwiLCJjb250ZXh0Iiwibm9OYW1lc3BhY2UiLCJfdHlwZSIsIl9wYXlsb2FkIiwiX29wdGlvbnMiLCJhcmdzIiwidW5pZnlPYmplY3RTdHlsZSIsImdldHRlcnNQcm94eSIsInNwbGl0UG9zIiwibG9jYWxUeXBlIiwibWFrZUxvY2FsR2V0dGVycyIsIm1ha2VMb2NhbENvbnRleHQiLCJoYW5kbGVyIiwicmVnaXN0ZXJNdXRhdGlvbiIsImFjdGlvbiIsInZhbCIsInJlcyIsInJvb3RHZXR0ZXJzIiwidGhlbiIsIlByb21pc2UiLCJyZXNvbHZlIiwiY2F0Y2giLCJlcnIiLCJyZWdpc3RlckFjdGlvbiIsInJhd0dldHRlciIsInJlZ2lzdGVyR2V0dGVyIiwiY2hpbGQiLCJfVnVlIiwiTnVtYmVyIiwidmVyc2lvbiIsInNwbGl0IiwibWl4aW4iLCJiZWZvcmVDcmVhdGUiLCJ2dWV4SW5pdCIsIl9pbml0IiwiaW5pdCIsIiRvcHRpb25zIiwiJHN0b3JlIiwiYXBwbHlNaXhpbiIsInYiLCJyZWYiLCJlbnRyeSIsInN1YiIsImZpbHRlciIsImJlZm9yZSIsImUiLCJhbGwiLCJtYXAiLCJhZnRlciIsInN1YnNjcmliZUFjdGlvbiIsIndhdGNoIiwiY2IiLCJyZWdpc3Rlck1vZHVsZSIsInByZXNlcnZlU3RhdGUiLCJ1bnJlZ2lzdGVyTW9kdWxlIiwiZGVsZXRlIiwiaG90VXBkYXRlIiwibmV3T3B0aW9ucyIsImNvbW1pdHRpbmciLCJtYXBTdGF0ZSIsIm5vcm1hbGl6ZU5hbWVzcGFjZSIsInN0YXRlcyIsIm5vcm1hbGl6ZU1hcCIsImdldE1vZHVsZUJ5TmFtZXNwYWNlIiwidnVleCIsIm1hcE11dGF0aW9ucyIsImxlbiIsImFyZ3VtZW50cyIsImFwcGx5IiwibWFwR2V0dGVycyIsIm1hcEFjdGlvbnMiLCJBcnJheSIsImlzQXJyYXkiLCJpc1ZhbGlkTWFwIiwiY2hhckF0IiwiaGVscGVyIiwiaW5kZXhfZXNtIiwiY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMiLCJnIiwiRnVuY3Rpb24iLCJhc3NlcnQiLCJjb25kaXRpb24iLCJtc2ciLCJlcnJvckNscyIsInRhcmdldCIsInJlbGF0aW9uIiwiY2hpbGROYW1lIiwiY2hpbGRTdGF0ZSIsImNoaWxkcmVuIiwiZmxhdE1hcCIsIngiLCJpZCIsImJ5SWRzIiwiaGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbiIsImhhc0FuZEJlbG9uZ3NUb01hbnkiLCJjaGlsZFJlbGF0aW9uIiwiYXNzb2NpYXRpb25Gb3JlaWduS2V5IiwiZm9yZWlnbktleSIsImpvaW5OYW1lIiwidGhlaXJOYW1lIiwiaW50ZXJtZWRpYXRlU3RhdGUiLCJpbnRlcm1lZGlhdGVzIiwidmFsdWVzIiwieSIsImhhc0FuZEJlbG9uZ3NUb01hbnlSZWxhdGlvbiIsInRlc3QiLCJpc0luZGV4TmFtZSIsIlR5cGVFcnJvciIsInJvb3RNb2R1bGUiLCJuZXh0SWR4IiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInBsdWNrIiwiYWNjIiwiaWRzIiwiUHJveHkiLCJWdWV4IiwiZGVmaW5lRGVmYXVsdEluc3RhbnRzIiwiaW5zdGFudHMiLCJkZWZhdWx0SW5zdGFudHMiLCJpbmplY3RJbnN0YW50cyIsImNhcHR1cmUiLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwicmVzdWx0IiwibXlOYW1lIiwid2hlcmUiLCJhbGxJZHMiLCJjb25kIiwiZW50cmllcyIsImZp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LEVBQUssS0FBSSxxQkFDdkJBLEVBQUssS0FHZHFKLEtBQU0sU0FBQyxHLElBQUV4QyxFQUFBLEVBQUFBLE1BQVksZ0JBQUNELEdBQ3BCLElBQU0zTSxFQUFNNE0sRUFBTUQsR0FFbEIsT0FEQVgsR0FBTyxXQUFNLFFBQUVoTSxJQUFLLGFBQWEyTSxHQUMxQjNNLFEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiLyoqXG4gKiB2dWV4IHYzLjEuM1xuICogKGMpIDIwMjAgRXZhbiBZb3VcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5mdW5jdGlvbiBhcHBseU1peGluIChWdWUpIHtcbiAgdmFyIHZlcnNpb24gPSBOdW1iZXIoVnVlLnZlcnNpb24uc3BsaXQoJy4nKVswXSk7XG5cbiAgaWYgKHZlcnNpb24gPj0gMikge1xuICAgIFZ1ZS5taXhpbih7IGJlZm9yZUNyZWF0ZTogdnVleEluaXQgfSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gb3ZlcnJpZGUgaW5pdCBhbmQgaW5qZWN0IHZ1ZXggaW5pdCBwcm9jZWR1cmVcbiAgICAvLyBmb3IgMS54IGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICAgIHZhciBfaW5pdCA9IFZ1ZS5wcm90b3R5cGUuX2luaXQ7XG4gICAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICBpZiAoIG9wdGlvbnMgPT09IHZvaWQgMCApIG9wdGlvbnMgPSB7fTtcblxuICAgICAgb3B0aW9ucy5pbml0ID0gb3B0aW9ucy5pbml0XG4gICAgICAgID8gW3Z1ZXhJbml0XS5jb25jYXQob3B0aW9ucy5pbml0KVxuICAgICAgICA6IHZ1ZXhJbml0O1xuICAgICAgX2luaXQuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFZ1ZXggaW5pdCBob29rLCBpbmplY3RlZCBpbnRvIGVhY2ggaW5zdGFuY2VzIGluaXQgaG9va3MgbGlzdC5cbiAgICovXG5cbiAgZnVuY3Rpb24gdnVleEluaXQgKCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcbiAgICAvLyBzdG9yZSBpbmplY3Rpb25cbiAgICBpZiAob3B0aW9ucy5zdG9yZSkge1xuICAgICAgdGhpcy4kc3RvcmUgPSB0eXBlb2Ygb3B0aW9ucy5zdG9yZSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG9wdGlvbnMuc3RvcmUoKVxuICAgICAgICA6IG9wdGlvbnMuc3RvcmU7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnBhcmVudCAmJiBvcHRpb25zLnBhcmVudC4kc3RvcmUpIHtcbiAgICAgIHRoaXMuJHN0b3JlID0gb3B0aW9ucy5wYXJlbnQuJHN0b3JlO1xuICAgIH1cbiAgfVxufVxuXG52YXIgdGFyZ2V0ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgPyB3aW5kb3dcbiAgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJ1xuICAgID8gZ2xvYmFsXG4gICAgOiB7fTtcbnZhciBkZXZ0b29sSG9vayA9IHRhcmdldC5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO1xuXG5mdW5jdGlvbiBkZXZ0b29sUGx1Z2luIChzdG9yZSkge1xuICBpZiAoIWRldnRvb2xIb29rKSB7IHJldHVybiB9XG5cbiAgc3RvcmUuX2RldnRvb2xIb29rID0gZGV2dG9vbEhvb2s7XG5cbiAgZGV2dG9vbEhvb2suZW1pdCgndnVleDppbml0Jywgc3RvcmUpO1xuXG4gIGRldnRvb2xIb29rLm9uKCd2dWV4OnRyYXZlbC10by1zdGF0ZScsIGZ1bmN0aW9uICh0YXJnZXRTdGF0ZSkge1xuICAgIHN0b3JlLnJlcGxhY2VTdGF0ZSh0YXJnZXRTdGF0ZSk7XG4gIH0pO1xuXG4gIHN0b3JlLnN1YnNjcmliZShmdW5jdGlvbiAobXV0YXRpb24sIHN0YXRlKSB7XG4gICAgZGV2dG9vbEhvb2suZW1pdCgndnVleDptdXRhdGlvbicsIG11dGF0aW9uLCBzdGF0ZSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgZmlyc3QgaXRlbSB0aGF0IHBhc3MgdGhlIHRlc3RcbiAqIGJ5IHNlY29uZCBhcmd1bWVudCBmdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGxpc3RcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAqIEByZXR1cm4geyp9XG4gKi9cblxuLyoqXG4gKiBmb3JFYWNoIGZvciBvYmplY3RcbiAqL1xuZnVuY3Rpb24gZm9yRWFjaFZhbHVlIChvYmosIGZuKSB7XG4gIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBmbihvYmpba2V5XSwga2V5KTsgfSk7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0IChvYmopIHtcbiAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0J1xufVxuXG5mdW5jdGlvbiBpc1Byb21pc2UgKHZhbCkge1xuICByZXR1cm4gdmFsICYmIHR5cGVvZiB2YWwudGhlbiA9PT0gJ2Z1bmN0aW9uJ1xufVxuXG5mdW5jdGlvbiBhc3NlcnQgKGNvbmRpdGlvbiwgbXNnKSB7XG4gIGlmICghY29uZGl0aW9uKSB7IHRocm93IG5ldyBFcnJvcigoXCJbdnVleF0gXCIgKyBtc2cpKSB9XG59XG5cbmZ1bmN0aW9uIHBhcnRpYWwgKGZuLCBhcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZm4oYXJnKVxuICB9XG59XG5cbi8vIEJhc2UgZGF0YSBzdHJ1Y3QgZm9yIHN0b3JlJ3MgbW9kdWxlLCBwYWNrYWdlIHdpdGggc29tZSBhdHRyaWJ1dGUgYW5kIG1ldGhvZFxudmFyIE1vZHVsZSA9IGZ1bmN0aW9uIE1vZHVsZSAocmF3TW9kdWxlLCBydW50aW1lKSB7XG4gIHRoaXMucnVudGltZSA9IHJ1bnRpbWU7XG4gIC8vIFN0b3JlIHNvbWUgY2hpbGRyZW4gaXRlbVxuICB0aGlzLl9jaGlsZHJlbiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIC8vIFN0b3JlIHRoZSBvcmlnaW4gbW9kdWxlIG9iamVjdCB3aGljaCBwYXNzZWQgYnkgcHJvZ3JhbW1lclxuICB0aGlzLl9yYXdNb2R1bGUgPSByYXdNb2R1bGU7XG4gIHZhciByYXdTdGF0ZSA9IHJhd01vZHVsZS5zdGF0ZTtcblxuICAvLyBTdG9yZSB0aGUgb3JpZ2luIG1vZHVsZSdzIHN0YXRlXG4gIHRoaXMuc3RhdGUgPSAodHlwZW9mIHJhd1N0YXRlID09PSAnZnVuY3Rpb24nID8gcmF3U3RhdGUoKSA6IHJhd1N0YXRlKSB8fCB7fTtcbn07XG5cbnZhciBwcm90b3R5cGVBY2Nlc3NvcnMgPSB7IG5hbWVzcGFjZWQ6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0gfTtcblxucHJvdG90eXBlQWNjZXNzb3JzLm5hbWVzcGFjZWQuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gISF0aGlzLl9yYXdNb2R1bGUubmFtZXNwYWNlZFxufTtcblxuTW9kdWxlLnByb3RvdHlwZS5hZGRDaGlsZCA9IGZ1bmN0aW9uIGFkZENoaWxkIChrZXksIG1vZHVsZSkge1xuICB0aGlzLl9jaGlsZHJlbltrZXldID0gbW9kdWxlO1xufTtcblxuTW9kdWxlLnByb3RvdHlwZS5yZW1vdmVDaGlsZCA9IGZ1bmN0aW9uIHJlbW92ZUNoaWxkIChrZXkpIHtcbiAgZGVsZXRlIHRoaXMuX2NoaWxkcmVuW2tleV07XG59O1xuXG5Nb2R1bGUucHJvdG90eXBlLmdldENoaWxkID0gZnVuY3Rpb24gZ2V0Q2hpbGQgKGtleSkge1xuICByZXR1cm4gdGhpcy5fY2hpbGRyZW5ba2V5XVxufTtcblxuTW9kdWxlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUgKHJhd01vZHVsZSkge1xuICB0aGlzLl9yYXdNb2R1bGUubmFtZXNwYWNlZCA9IHJhd01vZHVsZS5uYW1lc3BhY2VkO1xuICBpZiAocmF3TW9kdWxlLmFjdGlvbnMpIHtcbiAgICB0aGlzLl9yYXdNb2R1bGUuYWN0aW9ucyA9IHJhd01vZHVsZS5hY3Rpb25zO1xuICB9XG4gIGlmIChyYXdNb2R1bGUubXV0YXRpb25zKSB7XG4gICAgdGhpcy5fcmF3TW9kdWxlLm11dGF0aW9ucyA9IHJhd01vZHVsZS5tdXRhdGlvbnM7XG4gIH1cbiAgaWYgKHJhd01vZHVsZS5nZXR0ZXJzKSB7XG4gICAgdGhpcy5fcmF3TW9kdWxlLmdldHRlcnMgPSByYXdNb2R1bGUuZ2V0dGVycztcbiAgfVxufTtcblxuTW9kdWxlLnByb3RvdHlwZS5mb3JFYWNoQ2hpbGQgPSBmdW5jdGlvbiBmb3JFYWNoQ2hpbGQgKGZuKSB7XG4gIGZvckVhY2hWYWx1ZSh0aGlzLl9jaGlsZHJlbiwgZm4pO1xufTtcblxuTW9kdWxlLnByb3RvdHlwZS5mb3JFYWNoR2V0dGVyID0gZnVuY3Rpb24gZm9yRWFjaEdldHRlciAoZm4pIHtcbiAgaWYgKHRoaXMuX3Jhd01vZHVsZS5nZXR0ZXJzKSB7XG4gICAgZm9yRWFjaFZhbHVlKHRoaXMuX3Jhd01vZHVsZS5nZXR0ZXJzLCBmbik7XG4gIH1cbn07XG5cbk1vZHVsZS5wcm90b3R5cGUuZm9yRWFjaEFjdGlvbiA9IGZ1bmN0aW9uIGZvckVhY2hBY3Rpb24gKGZuKSB7XG4gIGlmICh0aGlzLl9yYXdNb2R1bGUuYWN0aW9ucykge1xuICAgIGZvckVhY2hWYWx1ZSh0aGlzLl9yYXdNb2R1bGUuYWN0aW9ucywgZm4pO1xuICB9XG59O1xuXG5Nb2R1bGUucHJvdG90eXBlLmZvckVhY2hNdXRhdGlvbiA9IGZ1bmN0aW9uIGZvckVhY2hNdXRhdGlvbiAoZm4pIHtcbiAgaWYgKHRoaXMuX3Jhd01vZHVsZS5tdXRhdGlvbnMpIHtcbiAgICBmb3JFYWNoVmFsdWUodGhpcy5fcmF3TW9kdWxlLm11dGF0aW9ucywgZm4pO1xuICB9XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyggTW9kdWxlLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzICk7XG5cbnZhciBNb2R1bGVDb2xsZWN0aW9uID0gZnVuY3Rpb24gTW9kdWxlQ29sbGVjdGlvbiAocmF3Um9vdE1vZHVsZSkge1xuICAvLyByZWdpc3RlciByb290IG1vZHVsZSAoVnVleC5TdG9yZSBvcHRpb25zKVxuICB0aGlzLnJlZ2lzdGVyKFtdLCByYXdSb290TW9kdWxlLCBmYWxzZSk7XG59O1xuXG5Nb2R1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGgucmVkdWNlKGZ1bmN0aW9uIChtb2R1bGUsIGtleSkge1xuICAgIHJldHVybiBtb2R1bGUuZ2V0Q2hpbGQoa2V5KVxuICB9LCB0aGlzLnJvb3QpXG59O1xuXG5Nb2R1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXROYW1lc3BhY2UgPSBmdW5jdGlvbiBnZXROYW1lc3BhY2UgKHBhdGgpIHtcbiAgdmFyIG1vZHVsZSA9IHRoaXMucm9vdDtcbiAgcmV0dXJuIHBhdGgucmVkdWNlKGZ1bmN0aW9uIChuYW1lc3BhY2UsIGtleSkge1xuICAgIG1vZHVsZSA9IG1vZHVsZS5nZXRDaGlsZChrZXkpO1xuICAgIHJldHVybiBuYW1lc3BhY2UgKyAobW9kdWxlLm5hbWVzcGFjZWQgPyBrZXkgKyAnLycgOiAnJylcbiAgfSwgJycpXG59O1xuXG5Nb2R1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUkMSAocmF3Um9vdE1vZHVsZSkge1xuICB1cGRhdGUoW10sIHRoaXMucm9vdCwgcmF3Um9vdE1vZHVsZSk7XG59O1xuXG5Nb2R1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIHJlZ2lzdGVyIChwYXRoLCByYXdNb2R1bGUsIHJ1bnRpbWUpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcbiAgICBpZiAoIHJ1bnRpbWUgPT09IHZvaWQgMCApIHJ1bnRpbWUgPSB0cnVlO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0UmF3TW9kdWxlKHBhdGgsIHJhd01vZHVsZSk7XG4gIH1cblxuICB2YXIgbmV3TW9kdWxlID0gbmV3IE1vZHVsZShyYXdNb2R1bGUsIHJ1bnRpbWUpO1xuICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcbiAgICB0aGlzLnJvb3QgPSBuZXdNb2R1bGU7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0KHBhdGguc2xpY2UoMCwgLTEpKTtcbiAgICBwYXJlbnQuYWRkQ2hpbGQocGF0aFtwYXRoLmxlbmd0aCAtIDFdLCBuZXdNb2R1bGUpO1xuICB9XG5cbiAgLy8gcmVnaXN0ZXIgbmVzdGVkIG1vZHVsZXNcbiAgaWYgKHJhd01vZHVsZS5tb2R1bGVzKSB7XG4gICAgZm9yRWFjaFZhbHVlKHJhd01vZHVsZS5tb2R1bGVzLCBmdW5jdGlvbiAocmF3Q2hpbGRNb2R1bGUsIGtleSkge1xuICAgICAgdGhpcyQxLnJlZ2lzdGVyKHBhdGguY29uY2F0KGtleSksIHJhd0NoaWxkTW9kdWxlLCBydW50aW1lKTtcbiAgICB9KTtcbiAgfVxufTtcblxuTW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUudW5yZWdpc3RlciA9IGZ1bmN0aW9uIHVucmVnaXN0ZXIgKHBhdGgpIHtcbiAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0KHBhdGguc2xpY2UoMCwgLTEpKTtcbiAgdmFyIGtleSA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgaWYgKCFwYXJlbnQuZ2V0Q2hpbGQoa2V5KS5ydW50aW1lKSB7IHJldHVybiB9XG5cbiAgcGFyZW50LnJlbW92ZUNoaWxkKGtleSk7XG59O1xuXG5mdW5jdGlvbiB1cGRhdGUgKHBhdGgsIHRhcmdldE1vZHVsZSwgbmV3TW9kdWxlKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0UmF3TW9kdWxlKHBhdGgsIG5ld01vZHVsZSk7XG4gIH1cblxuICAvLyB1cGRhdGUgdGFyZ2V0IG1vZHVsZVxuICB0YXJnZXRNb2R1bGUudXBkYXRlKG5ld01vZHVsZSk7XG5cbiAgLy8gdXBkYXRlIG5lc3RlZCBtb2R1bGVzXG4gIGlmIChuZXdNb2R1bGUubW9kdWxlcykge1xuICAgIGZvciAodmFyIGtleSBpbiBuZXdNb2R1bGUubW9kdWxlcykge1xuICAgICAgaWYgKCF0YXJnZXRNb2R1bGUuZ2V0Q2hpbGQoa2V5KSkge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIFwiW3Z1ZXhdIHRyeWluZyB0byBhZGQgYSBuZXcgbW9kdWxlICdcIiArIGtleSArIFwiJyBvbiBob3QgcmVsb2FkaW5nLCBcIiArXG4gICAgICAgICAgICAnbWFudWFsIHJlbG9hZCBpcyBuZWVkZWQnXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHVwZGF0ZShcbiAgICAgICAgcGF0aC5jb25jYXQoa2V5KSxcbiAgICAgICAgdGFyZ2V0TW9kdWxlLmdldENoaWxkKGtleSksXG4gICAgICAgIG5ld01vZHVsZS5tb2R1bGVzW2tleV1cbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cbnZhciBmdW5jdGlvbkFzc2VydCA9IHtcbiAgYXNzZXJ0OiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJzsgfSxcbiAgZXhwZWN0ZWQ6ICdmdW5jdGlvbidcbn07XG5cbnZhciBvYmplY3RBc3NlcnQgPSB7XG4gIGFzc2VydDogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgfHxcbiAgICAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUuaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJyk7IH0sXG4gIGV4cGVjdGVkOiAnZnVuY3Rpb24gb3Igb2JqZWN0IHdpdGggXCJoYW5kbGVyXCIgZnVuY3Rpb24nXG59O1xuXG52YXIgYXNzZXJ0VHlwZXMgPSB7XG4gIGdldHRlcnM6IGZ1bmN0aW9uQXNzZXJ0LFxuICBtdXRhdGlvbnM6IGZ1bmN0aW9uQXNzZXJ0LFxuICBhY3Rpb25zOiBvYmplY3RBc3NlcnRcbn07XG5cbmZ1bmN0aW9uIGFzc2VydFJhd01vZHVsZSAocGF0aCwgcmF3TW9kdWxlKSB7XG4gIE9iamVjdC5rZXlzKGFzc2VydFR5cGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBpZiAoIXJhd01vZHVsZVtrZXldKSB7IHJldHVybiB9XG5cbiAgICB2YXIgYXNzZXJ0T3B0aW9ucyA9IGFzc2VydFR5cGVzW2tleV07XG5cbiAgICBmb3JFYWNoVmFsdWUocmF3TW9kdWxlW2tleV0sIGZ1bmN0aW9uICh2YWx1ZSwgdHlwZSkge1xuICAgICAgYXNzZXJ0KFxuICAgICAgICBhc3NlcnRPcHRpb25zLmFzc2VydCh2YWx1ZSksXG4gICAgICAgIG1ha2VBc3NlcnRpb25NZXNzYWdlKHBhdGgsIGtleSwgdHlwZSwgdmFsdWUsIGFzc2VydE9wdGlvbnMuZXhwZWN0ZWQpXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gbWFrZUFzc2VydGlvbk1lc3NhZ2UgKHBhdGgsIGtleSwgdHlwZSwgdmFsdWUsIGV4cGVjdGVkKSB7XG4gIHZhciBidWYgPSBrZXkgKyBcIiBzaG91bGQgYmUgXCIgKyBleHBlY3RlZCArIFwiIGJ1dCBcXFwiXCIgKyBrZXkgKyBcIi5cIiArIHR5cGUgKyBcIlxcXCJcIjtcbiAgaWYgKHBhdGgubGVuZ3RoID4gMCkge1xuICAgIGJ1ZiArPSBcIiBpbiBtb2R1bGUgXFxcIlwiICsgKHBhdGguam9pbignLicpKSArIFwiXFxcIlwiO1xuICB9XG4gIGJ1ZiArPSBcIiBpcyBcIiArIChKU09OLnN0cmluZ2lmeSh2YWx1ZSkpICsgXCIuXCI7XG4gIHJldHVybiBidWZcbn1cblxudmFyIFZ1ZTsgLy8gYmluZCBvbiBpbnN0YWxsXG5cbnZhciBTdG9yZSA9IGZ1bmN0aW9uIFN0b3JlIChvcHRpb25zKSB7XG4gIHZhciB0aGlzJDEgPSB0aGlzO1xuICBpZiAoIG9wdGlvbnMgPT09IHZvaWQgMCApIG9wdGlvbnMgPSB7fTtcblxuICAvLyBBdXRvIGluc3RhbGwgaWYgaXQgaXMgbm90IGRvbmUgeWV0IGFuZCBgd2luZG93YCBoYXMgYFZ1ZWAuXG4gIC8vIFRvIGFsbG93IHVzZXJzIHRvIGF2b2lkIGF1dG8taW5zdGFsbGF0aW9uIGluIHNvbWUgY2FzZXMsXG4gIC8vIHRoaXMgY29kZSBzaG91bGQgYmUgcGxhY2VkIGhlcmUuIFNlZSAjNzMxXG4gIGlmICghVnVlICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WdWUpIHtcbiAgICBpbnN0YWxsKHdpbmRvdy5WdWUpO1xuICB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBhc3NlcnQoVnVlLCBcIm11c3QgY2FsbCBWdWUudXNlKFZ1ZXgpIGJlZm9yZSBjcmVhdGluZyBhIHN0b3JlIGluc3RhbmNlLlwiKTtcbiAgICBhc3NlcnQodHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnLCBcInZ1ZXggcmVxdWlyZXMgYSBQcm9taXNlIHBvbHlmaWxsIGluIHRoaXMgYnJvd3Nlci5cIik7XG4gICAgYXNzZXJ0KHRoaXMgaW5zdGFuY2VvZiBTdG9yZSwgXCJzdG9yZSBtdXN0IGJlIGNhbGxlZCB3aXRoIHRoZSBuZXcgb3BlcmF0b3IuXCIpO1xuICB9XG5cbiAgdmFyIHBsdWdpbnMgPSBvcHRpb25zLnBsdWdpbnM7IGlmICggcGx1Z2lucyA9PT0gdm9pZCAwICkgcGx1Z2lucyA9IFtdO1xuICB2YXIgc3RyaWN0ID0gb3B0aW9ucy5zdHJpY3Q7IGlmICggc3RyaWN0ID09PSB2b2lkIDAgKSBzdHJpY3QgPSBmYWxzZTtcblxuICAvLyBzdG9yZSBpbnRlcm5hbCBzdGF0ZVxuICB0aGlzLl9jb21taXR0aW5nID0gZmFsc2U7XG4gIHRoaXMuX2FjdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB0aGlzLl9hY3Rpb25TdWJzY3JpYmVycyA9IFtdO1xuICB0aGlzLl9tdXRhdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB0aGlzLl93cmFwcGVkR2V0dGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHRoaXMuX21vZHVsZXMgPSBuZXcgTW9kdWxlQ29sbGVjdGlvbihvcHRpb25zKTtcbiAgdGhpcy5fbW9kdWxlc05hbWVzcGFjZU1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG4gIHRoaXMuX3dhdGNoZXJWTSA9IG5ldyBWdWUoKTtcbiAgdGhpcy5fbWFrZUxvY2FsR2V0dGVyc0NhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAvLyBiaW5kIGNvbW1pdCBhbmQgZGlzcGF0Y2ggdG8gc2VsZlxuICB2YXIgc3RvcmUgPSB0aGlzO1xuICB2YXIgcmVmID0gdGhpcztcbiAgdmFyIGRpc3BhdGNoID0gcmVmLmRpc3BhdGNoO1xuICB2YXIgY29tbWl0ID0gcmVmLmNvbW1pdDtcbiAgdGhpcy5kaXNwYXRjaCA9IGZ1bmN0aW9uIGJvdW5kRGlzcGF0Y2ggKHR5cGUsIHBheWxvYWQpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2guY2FsbChzdG9yZSwgdHlwZSwgcGF5bG9hZClcbiAgfTtcbiAgdGhpcy5jb21taXQgPSBmdW5jdGlvbiBib3VuZENvbW1pdCAodHlwZSwgcGF5bG9hZCwgb3B0aW9ucykge1xuICAgIHJldHVybiBjb21taXQuY2FsbChzdG9yZSwgdHlwZSwgcGF5bG9hZCwgb3B0aW9ucylcbiAgfTtcblxuICAvLyBzdHJpY3QgbW9kZVxuICB0aGlzLnN0cmljdCA9IHN0cmljdDtcblxuICB2YXIgc3RhdGUgPSB0aGlzLl9tb2R1bGVzLnJvb3Quc3RhdGU7XG5cbiAgLy8gaW5pdCByb290IG1vZHVsZS5cbiAgLy8gdGhpcyBhbHNvIHJlY3Vyc2l2ZWx5IHJlZ2lzdGVycyBhbGwgc3ViLW1vZHVsZXNcbiAgLy8gYW5kIGNvbGxlY3RzIGFsbCBtb2R1bGUgZ2V0dGVycyBpbnNpZGUgdGhpcy5fd3JhcHBlZEdldHRlcnNcbiAgaW5zdGFsbE1vZHVsZSh0aGlzLCBzdGF0ZSwgW10sIHRoaXMuX21vZHVsZXMucm9vdCk7XG5cbiAgLy8gaW5pdGlhbGl6ZSB0aGUgc3RvcmUgdm0sIHdoaWNoIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgcmVhY3Rpdml0eVxuICAvLyAoYWxzbyByZWdpc3RlcnMgX3dyYXBwZWRHZXR0ZXJzIGFzIGNvbXB1dGVkIHByb3BlcnRpZXMpXG4gIHJlc2V0U3RvcmVWTSh0aGlzLCBzdGF0ZSk7XG5cbiAgLy8gYXBwbHkgcGx1Z2luc1xuICBwbHVnaW5zLmZvckVhY2goZnVuY3Rpb24gKHBsdWdpbikgeyByZXR1cm4gcGx1Z2luKHRoaXMkMSk7IH0pO1xuXG4gIHZhciB1c2VEZXZ0b29scyA9IG9wdGlvbnMuZGV2dG9vbHMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZGV2dG9vbHMgOiBWdWUuY29uZmlnLmRldnRvb2xzO1xuICBpZiAodXNlRGV2dG9vbHMpIHtcbiAgICBkZXZ0b29sUGx1Z2luKHRoaXMpO1xuICB9XG59O1xuXG52YXIgcHJvdG90eXBlQWNjZXNzb3JzJDEgPSB7IHN0YXRlOiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH07XG5cbnByb3RvdHlwZUFjY2Vzc29ycyQxLnN0YXRlLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuX3ZtLl9kYXRhLiQkc3RhdGVcbn07XG5cbnByb3RvdHlwZUFjY2Vzc29ycyQxLnN0YXRlLnNldCA9IGZ1bmN0aW9uICh2KSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0KGZhbHNlLCBcInVzZSBzdG9yZS5yZXBsYWNlU3RhdGUoKSB0byBleHBsaWNpdCByZXBsYWNlIHN0b3JlIHN0YXRlLlwiKTtcbiAgfVxufTtcblxuU3RvcmUucHJvdG90eXBlLmNvbW1pdCA9IGZ1bmN0aW9uIGNvbW1pdCAoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucykge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gIC8vIGNoZWNrIG9iamVjdC1zdHlsZSBjb21taXRcbiAgdmFyIHJlZiA9IHVuaWZ5T2JqZWN0U3R5bGUoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucyk7XG4gICAgdmFyIHR5cGUgPSByZWYudHlwZTtcbiAgICB2YXIgcGF5bG9hZCA9IHJlZi5wYXlsb2FkO1xuICAgIHZhciBvcHRpb25zID0gcmVmLm9wdGlvbnM7XG5cbiAgdmFyIG11dGF0aW9uID0geyB0eXBlOiB0eXBlLCBwYXlsb2FkOiBwYXlsb2FkIH07XG4gIHZhciBlbnRyeSA9IHRoaXMuX211dGF0aW9uc1t0eXBlXTtcbiAgaWYgKCFlbnRyeSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSB1bmtub3duIG11dGF0aW9uIHR5cGU6IFwiICsgdHlwZSkpO1xuICAgIH1cbiAgICByZXR1cm5cbiAgfVxuICB0aGlzLl93aXRoQ29tbWl0KGZ1bmN0aW9uICgpIHtcbiAgICBlbnRyeS5mb3JFYWNoKGZ1bmN0aW9uIGNvbW1pdEl0ZXJhdG9yIChoYW5kbGVyKSB7XG4gICAgICBoYW5kbGVyKHBheWxvYWQpO1xuICAgIH0pO1xuICB9KTtcblxuICB0aGlzLl9zdWJzY3JpYmVyc1xuICAgIC5zbGljZSgpIC8vIHNoYWxsb3cgY29weSB0byBwcmV2ZW50IGl0ZXJhdG9yIGludmFsaWRhdGlvbiBpZiBzdWJzY3JpYmVyIHN5bmNocm9ub3VzbHkgY2FsbHMgdW5zdWJzY3JpYmVcbiAgICAuZm9yRWFjaChmdW5jdGlvbiAoc3ViKSB7IHJldHVybiBzdWIobXV0YXRpb24sIHRoaXMkMS5zdGF0ZSk7IH0pO1xuXG4gIGlmIChcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgb3B0aW9ucyAmJiBvcHRpb25zLnNpbGVudFxuICApIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIlt2dWV4XSBtdXRhdGlvbiB0eXBlOiBcIiArIHR5cGUgKyBcIi4gU2lsZW50IG9wdGlvbiBoYXMgYmVlbiByZW1vdmVkLiBcIiArXG4gICAgICAnVXNlIHRoZSBmaWx0ZXIgZnVuY3Rpb25hbGl0eSBpbiB0aGUgdnVlLWRldnRvb2xzJ1xuICAgICk7XG4gIH1cbn07XG5cblN0b3JlLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIGRpc3BhdGNoIChfdHlwZSwgX3BheWxvYWQpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAvLyBjaGVjayBvYmplY3Qtc3R5bGUgZGlzcGF0Y2hcbiAgdmFyIHJlZiA9IHVuaWZ5T2JqZWN0U3R5bGUoX3R5cGUsIF9wYXlsb2FkKTtcbiAgICB2YXIgdHlwZSA9IHJlZi50eXBlO1xuICAgIHZhciBwYXlsb2FkID0gcmVmLnBheWxvYWQ7XG5cbiAgdmFyIGFjdGlvbiA9IHsgdHlwZTogdHlwZSwgcGF5bG9hZDogcGF5bG9hZCB9O1xuICB2YXIgZW50cnkgPSB0aGlzLl9hY3Rpb25zW3R5cGVdO1xuICBpZiAoIWVudHJ5KSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIHVua25vd24gYWN0aW9uIHR5cGU6IFwiICsgdHlwZSkpO1xuICAgIH1cbiAgICByZXR1cm5cbiAgfVxuXG4gIHRyeSB7XG4gICAgdGhpcy5fYWN0aW9uU3Vic2NyaWJlcnNcbiAgICAgIC5zbGljZSgpIC8vIHNoYWxsb3cgY29weSB0byBwcmV2ZW50IGl0ZXJhdG9yIGludmFsaWRhdGlvbiBpZiBzdWJzY3JpYmVyIHN5bmNocm9ub3VzbHkgY2FsbHMgdW5zdWJzY3JpYmVcbiAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHN1YikgeyByZXR1cm4gc3ViLmJlZm9yZTsgfSlcbiAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChzdWIpIHsgcmV0dXJuIHN1Yi5iZWZvcmUoYWN0aW9uLCB0aGlzJDEuc3RhdGUpOyB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJbdnVleF0gZXJyb3IgaW4gYmVmb3JlIGFjdGlvbiBzdWJzY3JpYmVyczogXCIpO1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgcmVzdWx0ID0gZW50cnkubGVuZ3RoID4gMVxuICAgID8gUHJvbWlzZS5hbGwoZW50cnkubWFwKGZ1bmN0aW9uIChoYW5kbGVyKSB7IHJldHVybiBoYW5kbGVyKHBheWxvYWQpOyB9KSlcbiAgICA6IGVudHJ5WzBdKHBheWxvYWQpO1xuXG4gIHJldHVybiByZXN1bHQudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMkMS5fYWN0aW9uU3Vic2NyaWJlcnNcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoc3ViKSB7IHJldHVybiBzdWIuYWZ0ZXI7IH0pXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChzdWIpIHsgcmV0dXJuIHN1Yi5hZnRlcihhY3Rpb24sIHRoaXMkMS5zdGF0ZSk7IH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIlt2dWV4XSBlcnJvciBpbiBhZnRlciBhY3Rpb24gc3Vic2NyaWJlcnM6IFwiKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc1xuICB9KVxufTtcblxuU3RvcmUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIHN1YnNjcmliZSAoZm4pIHtcbiAgcmV0dXJuIGdlbmVyaWNTdWJzY3JpYmUoZm4sIHRoaXMuX3N1YnNjcmliZXJzKVxufTtcblxuU3RvcmUucHJvdG90eXBlLnN1YnNjcmliZUFjdGlvbiA9IGZ1bmN0aW9uIHN1YnNjcmliZUFjdGlvbiAoZm4pIHtcbiAgdmFyIHN1YnMgPSB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgPyB7IGJlZm9yZTogZm4gfSA6IGZuO1xuICByZXR1cm4gZ2VuZXJpY1N1YnNjcmliZShzdWJzLCB0aGlzLl9hY3Rpb25TdWJzY3JpYmVycylcbn07XG5cblN0b3JlLnByb3RvdHlwZS53YXRjaCA9IGZ1bmN0aW9uIHdhdGNoIChnZXR0ZXIsIGNiLCBvcHRpb25zKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBhc3NlcnQodHlwZW9mIGdldHRlciA9PT0gJ2Z1bmN0aW9uJywgXCJzdG9yZS53YXRjaCBvbmx5IGFjY2VwdHMgYSBmdW5jdGlvbi5cIik7XG4gIH1cbiAgcmV0dXJuIHRoaXMuX3dhdGNoZXJWTS4kd2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0dGVyKHRoaXMkMS5zdGF0ZSwgdGhpcyQxLmdldHRlcnMpOyB9LCBjYiwgb3B0aW9ucylcbn07XG5cblN0b3JlLnByb3RvdHlwZS5yZXBsYWNlU3RhdGUgPSBmdW5jdGlvbiByZXBsYWNlU3RhdGUgKHN0YXRlKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgdGhpcy5fd2l0aENvbW1pdChmdW5jdGlvbiAoKSB7XG4gICAgdGhpcyQxLl92bS5fZGF0YS4kJHN0YXRlID0gc3RhdGU7XG4gIH0pO1xufTtcblxuU3RvcmUucHJvdG90eXBlLnJlZ2lzdGVyTW9kdWxlID0gZnVuY3Rpb24gcmVnaXN0ZXJNb2R1bGUgKHBhdGgsIHJhd01vZHVsZSwgb3B0aW9ucykge1xuICAgIGlmICggb3B0aW9ucyA9PT0gdm9pZCAwICkgb3B0aW9ucyA9IHt9O1xuXG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHsgcGF0aCA9IFtwYXRoXTsgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0KEFycmF5LmlzQXJyYXkocGF0aCksIFwibW9kdWxlIHBhdGggbXVzdCBiZSBhIHN0cmluZyBvciBhbiBBcnJheS5cIik7XG4gICAgYXNzZXJ0KHBhdGgubGVuZ3RoID4gMCwgJ2Nhbm5vdCByZWdpc3RlciB0aGUgcm9vdCBtb2R1bGUgYnkgdXNpbmcgcmVnaXN0ZXJNb2R1bGUuJyk7XG4gIH1cblxuICB0aGlzLl9tb2R1bGVzLnJlZ2lzdGVyKHBhdGgsIHJhd01vZHVsZSk7XG4gIGluc3RhbGxNb2R1bGUodGhpcywgdGhpcy5zdGF0ZSwgcGF0aCwgdGhpcy5fbW9kdWxlcy5nZXQocGF0aCksIG9wdGlvbnMucHJlc2VydmVTdGF0ZSk7XG4gIC8vIHJlc2V0IHN0b3JlIHRvIHVwZGF0ZSBnZXR0ZXJzLi4uXG4gIHJlc2V0U3RvcmVWTSh0aGlzLCB0aGlzLnN0YXRlKTtcbn07XG5cblN0b3JlLnByb3RvdHlwZS51bnJlZ2lzdGVyTW9kdWxlID0gZnVuY3Rpb24gdW5yZWdpc3Rlck1vZHVsZSAocGF0aCkge1xuICAgIHZhciB0aGlzJDEgPSB0aGlzO1xuXG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHsgcGF0aCA9IFtwYXRoXTsgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYXNzZXJ0KEFycmF5LmlzQXJyYXkocGF0aCksIFwibW9kdWxlIHBhdGggbXVzdCBiZSBhIHN0cmluZyBvciBhbiBBcnJheS5cIik7XG4gIH1cblxuICB0aGlzLl9tb2R1bGVzLnVucmVnaXN0ZXIocGF0aCk7XG4gIHRoaXMuX3dpdGhDb21taXQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBwYXJlbnRTdGF0ZSA9IGdldE5lc3RlZFN0YXRlKHRoaXMkMS5zdGF0ZSwgcGF0aC5zbGljZSgwLCAtMSkpO1xuICAgIFZ1ZS5kZWxldGUocGFyZW50U3RhdGUsIHBhdGhbcGF0aC5sZW5ndGggLSAxXSk7XG4gIH0pO1xuICByZXNldFN0b3JlKHRoaXMpO1xufTtcblxuU3RvcmUucHJvdG90eXBlLmhvdFVwZGF0ZSA9IGZ1bmN0aW9uIGhvdFVwZGF0ZSAobmV3T3B0aW9ucykge1xuICB0aGlzLl9tb2R1bGVzLnVwZGF0ZShuZXdPcHRpb25zKTtcbiAgcmVzZXRTdG9yZSh0aGlzLCB0cnVlKTtcbn07XG5cblN0b3JlLnByb3RvdHlwZS5fd2l0aENvbW1pdCA9IGZ1bmN0aW9uIF93aXRoQ29tbWl0IChmbikge1xuICB2YXIgY29tbWl0dGluZyA9IHRoaXMuX2NvbW1pdHRpbmc7XG4gIHRoaXMuX2NvbW1pdHRpbmcgPSB0cnVlO1xuICBmbigpO1xuICB0aGlzLl9jb21taXR0aW5nID0gY29tbWl0dGluZztcbn07XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCBTdG9yZS5wcm90b3R5cGUsIHByb3RvdHlwZUFjY2Vzc29ycyQxICk7XG5cbmZ1bmN0aW9uIGdlbmVyaWNTdWJzY3JpYmUgKGZuLCBzdWJzKSB7XG4gIGlmIChzdWJzLmluZGV4T2YoZm4pIDwgMCkge1xuICAgIHN1YnMucHVzaChmbik7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaSA9IHN1YnMuaW5kZXhPZihmbik7XG4gICAgaWYgKGkgPiAtMSkge1xuICAgICAgc3Vicy5zcGxpY2UoaSwgMSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlc2V0U3RvcmUgKHN0b3JlLCBob3QpIHtcbiAgc3RvcmUuX2FjdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBzdG9yZS5fbXV0YXRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgc3RvcmUuX3dyYXBwZWRHZXR0ZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgc3RvcmUuX21vZHVsZXNOYW1lc3BhY2VNYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgc3RhdGUgPSBzdG9yZS5zdGF0ZTtcbiAgLy8gaW5pdCBhbGwgbW9kdWxlc1xuICBpbnN0YWxsTW9kdWxlKHN0b3JlLCBzdGF0ZSwgW10sIHN0b3JlLl9tb2R1bGVzLnJvb3QsIHRydWUpO1xuICAvLyByZXNldCB2bVxuICByZXNldFN0b3JlVk0oc3RvcmUsIHN0YXRlLCBob3QpO1xufVxuXG5mdW5jdGlvbiByZXNldFN0b3JlVk0gKHN0b3JlLCBzdGF0ZSwgaG90KSB7XG4gIHZhciBvbGRWbSA9IHN0b3JlLl92bTtcblxuICAvLyBiaW5kIHN0b3JlIHB1YmxpYyBnZXR0ZXJzXG4gIHN0b3JlLmdldHRlcnMgPSB7fTtcbiAgLy8gcmVzZXQgbG9jYWwgZ2V0dGVycyBjYWNoZVxuICBzdG9yZS5fbWFrZUxvY2FsR2V0dGVyc0NhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdmFyIHdyYXBwZWRHZXR0ZXJzID0gc3RvcmUuX3dyYXBwZWRHZXR0ZXJzO1xuICB2YXIgY29tcHV0ZWQgPSB7fTtcbiAgZm9yRWFjaFZhbHVlKHdyYXBwZWRHZXR0ZXJzLCBmdW5jdGlvbiAoZm4sIGtleSkge1xuICAgIC8vIHVzZSBjb21wdXRlZCB0byBsZXZlcmFnZSBpdHMgbGF6eS1jYWNoaW5nIG1lY2hhbmlzbVxuICAgIC8vIGRpcmVjdCBpbmxpbmUgZnVuY3Rpb24gdXNlIHdpbGwgbGVhZCB0byBjbG9zdXJlIHByZXNlcnZpbmcgb2xkVm0uXG4gICAgLy8gdXNpbmcgcGFydGlhbCB0byByZXR1cm4gZnVuY3Rpb24gd2l0aCBvbmx5IGFyZ3VtZW50cyBwcmVzZXJ2ZWQgaW4gY2xvc3VyZSBlbnZpcm9ubWVudC5cbiAgICBjb21wdXRlZFtrZXldID0gcGFydGlhbChmbiwgc3RvcmUpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZS5nZXR0ZXJzLCBrZXksIHtcbiAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc3RvcmUuX3ZtW2tleV07IH0sXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlIC8vIGZvciBsb2NhbCBnZXR0ZXJzXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIHVzZSBhIFZ1ZSBpbnN0YW5jZSB0byBzdG9yZSB0aGUgc3RhdGUgdHJlZVxuICAvLyBzdXBwcmVzcyB3YXJuaW5ncyBqdXN0IGluIGNhc2UgdGhlIHVzZXIgaGFzIGFkZGVkXG4gIC8vIHNvbWUgZnVua3kgZ2xvYmFsIG1peGluc1xuICB2YXIgc2lsZW50ID0gVnVlLmNvbmZpZy5zaWxlbnQ7XG4gIFZ1ZS5jb25maWcuc2lsZW50ID0gdHJ1ZTtcbiAgc3RvcmUuX3ZtID0gbmV3IFZ1ZSh7XG4gICAgZGF0YToge1xuICAgICAgJCRzdGF0ZTogc3RhdGVcbiAgICB9LFxuICAgIGNvbXB1dGVkOiBjb21wdXRlZFxuICB9KTtcbiAgVnVlLmNvbmZpZy5zaWxlbnQgPSBzaWxlbnQ7XG5cbiAgLy8gZW5hYmxlIHN0cmljdCBtb2RlIGZvciBuZXcgdm1cbiAgaWYgKHN0b3JlLnN0cmljdCkge1xuICAgIGVuYWJsZVN0cmljdE1vZGUoc3RvcmUpO1xuICB9XG5cbiAgaWYgKG9sZFZtKSB7XG4gICAgaWYgKGhvdCkge1xuICAgICAgLy8gZGlzcGF0Y2ggY2hhbmdlcyBpbiBhbGwgc3Vic2NyaWJlZCB3YXRjaGVyc1xuICAgICAgLy8gdG8gZm9yY2UgZ2V0dGVyIHJlLWV2YWx1YXRpb24gZm9yIGhvdCByZWxvYWRpbmcuXG4gICAgICBzdG9yZS5fd2l0aENvbW1pdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9sZFZtLl9kYXRhLiQkc3RhdGUgPSBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJldHVybiBvbGRWbS4kZGVzdHJveSgpOyB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbnN0YWxsTW9kdWxlIChzdG9yZSwgcm9vdFN0YXRlLCBwYXRoLCBtb2R1bGUsIGhvdCkge1xuICB2YXIgaXNSb290ID0gIXBhdGgubGVuZ3RoO1xuICB2YXIgbmFtZXNwYWNlID0gc3RvcmUuX21vZHVsZXMuZ2V0TmFtZXNwYWNlKHBhdGgpO1xuXG4gIC8vIHJlZ2lzdGVyIGluIG5hbWVzcGFjZSBtYXBcbiAgaWYgKG1vZHVsZS5uYW1lc3BhY2VkKSB7XG4gICAgaWYgKHN0b3JlLl9tb2R1bGVzTmFtZXNwYWNlTWFwW25hbWVzcGFjZV0gJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgY29uc29sZS5lcnJvcigoXCJbdnVleF0gZHVwbGljYXRlIG5hbWVzcGFjZSBcIiArIG5hbWVzcGFjZSArIFwiIGZvciB0aGUgbmFtZXNwYWNlZCBtb2R1bGUgXCIgKyAocGF0aC5qb2luKCcvJykpKSk7XG4gICAgfVxuICAgIHN0b3JlLl9tb2R1bGVzTmFtZXNwYWNlTWFwW25hbWVzcGFjZV0gPSBtb2R1bGU7XG4gIH1cblxuICAvLyBzZXQgc3RhdGVcbiAgaWYgKCFpc1Jvb3QgJiYgIWhvdCkge1xuICAgIHZhciBwYXJlbnRTdGF0ZSA9IGdldE5lc3RlZFN0YXRlKHJvb3RTdGF0ZSwgcGF0aC5zbGljZSgwLCAtMSkpO1xuICAgIHZhciBtb2R1bGVOYW1lID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgIHN0b3JlLl93aXRoQ29tbWl0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmIChtb2R1bGVOYW1lIGluIHBhcmVudFN0YXRlKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgKFwiW3Z1ZXhdIHN0YXRlIGZpZWxkIFxcXCJcIiArIG1vZHVsZU5hbWUgKyBcIlxcXCIgd2FzIG92ZXJyaWRkZW4gYnkgYSBtb2R1bGUgd2l0aCB0aGUgc2FtZSBuYW1lIGF0IFxcXCJcIiArIChwYXRoLmpvaW4oJy4nKSkgKyBcIlxcXCJcIilcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBWdWUuc2V0KHBhcmVudFN0YXRlLCBtb2R1bGVOYW1lLCBtb2R1bGUuc3RhdGUpO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIGxvY2FsID0gbW9kdWxlLmNvbnRleHQgPSBtYWtlTG9jYWxDb250ZXh0KHN0b3JlLCBuYW1lc3BhY2UsIHBhdGgpO1xuXG4gIG1vZHVsZS5mb3JFYWNoTXV0YXRpb24oZnVuY3Rpb24gKG11dGF0aW9uLCBrZXkpIHtcbiAgICB2YXIgbmFtZXNwYWNlZFR5cGUgPSBuYW1lc3BhY2UgKyBrZXk7XG4gICAgcmVnaXN0ZXJNdXRhdGlvbihzdG9yZSwgbmFtZXNwYWNlZFR5cGUsIG11dGF0aW9uLCBsb2NhbCk7XG4gIH0pO1xuXG4gIG1vZHVsZS5mb3JFYWNoQWN0aW9uKGZ1bmN0aW9uIChhY3Rpb24sIGtleSkge1xuICAgIHZhciB0eXBlID0gYWN0aW9uLnJvb3QgPyBrZXkgOiBuYW1lc3BhY2UgKyBrZXk7XG4gICAgdmFyIGhhbmRsZXIgPSBhY3Rpb24uaGFuZGxlciB8fCBhY3Rpb247XG4gICAgcmVnaXN0ZXJBY3Rpb24oc3RvcmUsIHR5cGUsIGhhbmRsZXIsIGxvY2FsKTtcbiAgfSk7XG5cbiAgbW9kdWxlLmZvckVhY2hHZXR0ZXIoZnVuY3Rpb24gKGdldHRlciwga2V5KSB7XG4gICAgdmFyIG5hbWVzcGFjZWRUeXBlID0gbmFtZXNwYWNlICsga2V5O1xuICAgIHJlZ2lzdGVyR2V0dGVyKHN0b3JlLCBuYW1lc3BhY2VkVHlwZSwgZ2V0dGVyLCBsb2NhbCk7XG4gIH0pO1xuXG4gIG1vZHVsZS5mb3JFYWNoQ2hpbGQoZnVuY3Rpb24gKGNoaWxkLCBrZXkpIHtcbiAgICBpbnN0YWxsTW9kdWxlKHN0b3JlLCByb290U3RhdGUsIHBhdGguY29uY2F0KGtleSksIGNoaWxkLCBob3QpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBtYWtlIGxvY2FsaXplZCBkaXNwYXRjaCwgY29tbWl0LCBnZXR0ZXJzIGFuZCBzdGF0ZVxuICogaWYgdGhlcmUgaXMgbm8gbmFtZXNwYWNlLCBqdXN0IHVzZSByb290IG9uZXNcbiAqL1xuZnVuY3Rpb24gbWFrZUxvY2FsQ29udGV4dCAoc3RvcmUsIG5hbWVzcGFjZSwgcGF0aCkge1xuICB2YXIgbm9OYW1lc3BhY2UgPSBuYW1lc3BhY2UgPT09ICcnO1xuXG4gIHZhciBsb2NhbCA9IHtcbiAgICBkaXNwYXRjaDogbm9OYW1lc3BhY2UgPyBzdG9yZS5kaXNwYXRjaCA6IGZ1bmN0aW9uIChfdHlwZSwgX3BheWxvYWQsIF9vcHRpb25zKSB7XG4gICAgICB2YXIgYXJncyA9IHVuaWZ5T2JqZWN0U3R5bGUoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucyk7XG4gICAgICB2YXIgcGF5bG9hZCA9IGFyZ3MucGF5bG9hZDtcbiAgICAgIHZhciBvcHRpb25zID0gYXJncy5vcHRpb25zO1xuICAgICAgdmFyIHR5cGUgPSBhcmdzLnR5cGU7XG5cbiAgICAgIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5yb290KSB7XG4gICAgICAgIHR5cGUgPSBuYW1lc3BhY2UgKyB0eXBlO1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhc3RvcmUuX2FjdGlvbnNbdHlwZV0pIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSB1bmtub3duIGxvY2FsIGFjdGlvbiB0eXBlOiBcIiArIChhcmdzLnR5cGUpICsgXCIsIGdsb2JhbCB0eXBlOiBcIiArIHR5cGUpKTtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2godHlwZSwgcGF5bG9hZClcbiAgICB9LFxuXG4gICAgY29tbWl0OiBub05hbWVzcGFjZSA/IHN0b3JlLmNvbW1pdCA6IGZ1bmN0aW9uIChfdHlwZSwgX3BheWxvYWQsIF9vcHRpb25zKSB7XG4gICAgICB2YXIgYXJncyA9IHVuaWZ5T2JqZWN0U3R5bGUoX3R5cGUsIF9wYXlsb2FkLCBfb3B0aW9ucyk7XG4gICAgICB2YXIgcGF5bG9hZCA9IGFyZ3MucGF5bG9hZDtcbiAgICAgIHZhciBvcHRpb25zID0gYXJncy5vcHRpb25zO1xuICAgICAgdmFyIHR5cGUgPSBhcmdzLnR5cGU7XG5cbiAgICAgIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5yb290KSB7XG4gICAgICAgIHR5cGUgPSBuYW1lc3BhY2UgKyB0eXBlO1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhc3RvcmUuX211dGF0aW9uc1t0eXBlXSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIHVua25vd24gbG9jYWwgbXV0YXRpb24gdHlwZTogXCIgKyAoYXJncy50eXBlKSArIFwiLCBnbG9iYWwgdHlwZTogXCIgKyB0eXBlKSk7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc3RvcmUuY29tbWl0KHR5cGUsIHBheWxvYWQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfTtcblxuICAvLyBnZXR0ZXJzIGFuZCBzdGF0ZSBvYmplY3QgbXVzdCBiZSBnb3R0ZW4gbGF6aWx5XG4gIC8vIGJlY2F1c2UgdGhleSB3aWxsIGJlIGNoYW5nZWQgYnkgdm0gdXBkYXRlXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGxvY2FsLCB7XG4gICAgZ2V0dGVyczoge1xuICAgICAgZ2V0OiBub05hbWVzcGFjZVxuICAgICAgICA/IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0b3JlLmdldHRlcnM7IH1cbiAgICAgICAgOiBmdW5jdGlvbiAoKSB7IHJldHVybiBtYWtlTG9jYWxHZXR0ZXJzKHN0b3JlLCBuYW1lc3BhY2UpOyB9XG4gICAgfSxcbiAgICBzdGF0ZToge1xuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXROZXN0ZWRTdGF0ZShzdG9yZS5zdGF0ZSwgcGF0aCk7IH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBsb2NhbFxufVxuXG5mdW5jdGlvbiBtYWtlTG9jYWxHZXR0ZXJzIChzdG9yZSwgbmFtZXNwYWNlKSB7XG4gIGlmICghc3RvcmUuX21ha2VMb2NhbEdldHRlcnNDYWNoZVtuYW1lc3BhY2VdKSB7XG4gICAgdmFyIGdldHRlcnNQcm94eSA9IHt9O1xuICAgIHZhciBzcGxpdFBvcyA9IG5hbWVzcGFjZS5sZW5ndGg7XG4gICAgT2JqZWN0LmtleXMoc3RvcmUuZ2V0dGVycykuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgLy8gc2tpcCBpZiB0aGUgdGFyZ2V0IGdldHRlciBpcyBub3QgbWF0Y2ggdGhpcyBuYW1lc3BhY2VcbiAgICAgIGlmICh0eXBlLnNsaWNlKDAsIHNwbGl0UG9zKSAhPT0gbmFtZXNwYWNlKSB7IHJldHVybiB9XG5cbiAgICAgIC8vIGV4dHJhY3QgbG9jYWwgZ2V0dGVyIHR5cGVcbiAgICAgIHZhciBsb2NhbFR5cGUgPSB0eXBlLnNsaWNlKHNwbGl0UG9zKTtcblxuICAgICAgLy8gQWRkIGEgcG9ydCB0byB0aGUgZ2V0dGVycyBwcm94eS5cbiAgICAgIC8vIERlZmluZSBhcyBnZXR0ZXIgcHJvcGVydHkgYmVjYXVzZVxuICAgICAgLy8gd2UgZG8gbm90IHdhbnQgdG8gZXZhbHVhdGUgdGhlIGdldHRlcnMgaW4gdGhpcyB0aW1lLlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdldHRlcnNQcm94eSwgbG9jYWxUeXBlLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc3RvcmUuZ2V0dGVyc1t0eXBlXTsgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgc3RvcmUuX21ha2VMb2NhbEdldHRlcnNDYWNoZVtuYW1lc3BhY2VdID0gZ2V0dGVyc1Byb3h5O1xuICB9XG5cbiAgcmV0dXJuIHN0b3JlLl9tYWtlTG9jYWxHZXR0ZXJzQ2FjaGVbbmFtZXNwYWNlXVxufVxuXG5mdW5jdGlvbiByZWdpc3Rlck11dGF0aW9uIChzdG9yZSwgdHlwZSwgaGFuZGxlciwgbG9jYWwpIHtcbiAgdmFyIGVudHJ5ID0gc3RvcmUuX211dGF0aW9uc1t0eXBlXSB8fCAoc3RvcmUuX211dGF0aW9uc1t0eXBlXSA9IFtdKTtcbiAgZW50cnkucHVzaChmdW5jdGlvbiB3cmFwcGVkTXV0YXRpb25IYW5kbGVyIChwYXlsb2FkKSB7XG4gICAgaGFuZGxlci5jYWxsKHN0b3JlLCBsb2NhbC5zdGF0ZSwgcGF5bG9hZCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlckFjdGlvbiAoc3RvcmUsIHR5cGUsIGhhbmRsZXIsIGxvY2FsKSB7XG4gIHZhciBlbnRyeSA9IHN0b3JlLl9hY3Rpb25zW3R5cGVdIHx8IChzdG9yZS5fYWN0aW9uc1t0eXBlXSA9IFtdKTtcbiAgZW50cnkucHVzaChmdW5jdGlvbiB3cmFwcGVkQWN0aW9uSGFuZGxlciAocGF5bG9hZCkge1xuICAgIHZhciByZXMgPSBoYW5kbGVyLmNhbGwoc3RvcmUsIHtcbiAgICAgIGRpc3BhdGNoOiBsb2NhbC5kaXNwYXRjaCxcbiAgICAgIGNvbW1pdDogbG9jYWwuY29tbWl0LFxuICAgICAgZ2V0dGVyczogbG9jYWwuZ2V0dGVycyxcbiAgICAgIHN0YXRlOiBsb2NhbC5zdGF0ZSxcbiAgICAgIHJvb3RHZXR0ZXJzOiBzdG9yZS5nZXR0ZXJzLFxuICAgICAgcm9vdFN0YXRlOiBzdG9yZS5zdGF0ZVxuICAgIH0sIHBheWxvYWQpO1xuICAgIGlmICghaXNQcm9taXNlKHJlcykpIHtcbiAgICAgIHJlcyA9IFByb21pc2UucmVzb2x2ZShyZXMpO1xuICAgIH1cbiAgICBpZiAoc3RvcmUuX2RldnRvb2xIb29rKSB7XG4gICAgICByZXR1cm4gcmVzLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgc3RvcmUuX2RldnRvb2xIb29rLmVtaXQoJ3Z1ZXg6ZXJyb3InLCBlcnIpO1xuICAgICAgICB0aHJvdyBlcnJcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXNcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlckdldHRlciAoc3RvcmUsIHR5cGUsIHJhd0dldHRlciwgbG9jYWwpIHtcbiAgaWYgKHN0b3JlLl93cmFwcGVkR2V0dGVyc1t0eXBlXSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmVycm9yKChcIlt2dWV4XSBkdXBsaWNhdGUgZ2V0dGVyIGtleTogXCIgKyB0eXBlKSk7XG4gICAgfVxuICAgIHJldHVyblxuICB9XG4gIHN0b3JlLl93cmFwcGVkR2V0dGVyc1t0eXBlXSA9IGZ1bmN0aW9uIHdyYXBwZWRHZXR0ZXIgKHN0b3JlKSB7XG4gICAgcmV0dXJuIHJhd0dldHRlcihcbiAgICAgIGxvY2FsLnN0YXRlLCAvLyBsb2NhbCBzdGF0ZVxuICAgICAgbG9jYWwuZ2V0dGVycywgLy8gbG9jYWwgZ2V0dGVyc1xuICAgICAgc3RvcmUuc3RhdGUsIC8vIHJvb3Qgc3RhdGVcbiAgICAgIHN0b3JlLmdldHRlcnMgLy8gcm9vdCBnZXR0ZXJzXG4gICAgKVxuICB9O1xufVxuXG5mdW5jdGlvbiBlbmFibGVTdHJpY3RNb2RlIChzdG9yZSkge1xuICBzdG9yZS5fdm0uJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX2RhdGEuJCRzdGF0ZSB9LCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGFzc2VydChzdG9yZS5fY29tbWl0dGluZywgXCJkbyBub3QgbXV0YXRlIHZ1ZXggc3RvcmUgc3RhdGUgb3V0c2lkZSBtdXRhdGlvbiBoYW5kbGVycy5cIik7XG4gICAgfVxuICB9LCB7IGRlZXA6IHRydWUsIHN5bmM6IHRydWUgfSk7XG59XG5cbmZ1bmN0aW9uIGdldE5lc3RlZFN0YXRlIChzdGF0ZSwgcGF0aCkge1xuICByZXR1cm4gcGF0aC5yZWR1Y2UoZnVuY3Rpb24gKHN0YXRlLCBrZXkpIHsgcmV0dXJuIHN0YXRlW2tleV07IH0sIHN0YXRlKVxufVxuXG5mdW5jdGlvbiB1bmlmeU9iamVjdFN0eWxlICh0eXBlLCBwYXlsb2FkLCBvcHRpb25zKSB7XG4gIGlmIChpc09iamVjdCh0eXBlKSAmJiB0eXBlLnR5cGUpIHtcbiAgICBvcHRpb25zID0gcGF5bG9hZDtcbiAgICBwYXlsb2FkID0gdHlwZTtcbiAgICB0eXBlID0gdHlwZS50eXBlO1xuICB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBhc3NlcnQodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnLCAoXCJleHBlY3RzIHN0cmluZyBhcyB0aGUgdHlwZSwgYnV0IGZvdW5kIFwiICsgKHR5cGVvZiB0eXBlKSArIFwiLlwiKSk7XG4gIH1cblxuICByZXR1cm4geyB0eXBlOiB0eXBlLCBwYXlsb2FkOiBwYXlsb2FkLCBvcHRpb25zOiBvcHRpb25zIH1cbn1cblxuZnVuY3Rpb24gaW5zdGFsbCAoX1Z1ZSkge1xuICBpZiAoVnVlICYmIF9WdWUgPT09IFZ1ZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAnW3Z1ZXhdIGFscmVhZHkgaW5zdGFsbGVkLiBWdWUudXNlKFZ1ZXgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLidcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVyblxuICB9XG4gIFZ1ZSA9IF9WdWU7XG4gIGFwcGx5TWl4aW4oVnVlKTtcbn1cblxuLyoqXG4gKiBSZWR1Y2UgdGhlIGNvZGUgd2hpY2ggd3JpdHRlbiBpbiBWdWUuanMgZm9yIGdldHRpbmcgdGhlIHN0YXRlLlxuICogQHBhcmFtIHtTdHJpbmd9IFtuYW1lc3BhY2VdIC0gTW9kdWxlJ3MgbmFtZXNwYWNlXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gc3RhdGVzICMgT2JqZWN0J3MgaXRlbSBjYW4gYmUgYSBmdW5jdGlvbiB3aGljaCBhY2NlcHQgc3RhdGUgYW5kIGdldHRlcnMgZm9yIHBhcmFtLCB5b3UgY2FuIGRvIHNvbWV0aGluZyBmb3Igc3RhdGUgYW5kIGdldHRlcnMgaW4gaXQuXG4gKiBAcGFyYW0ge09iamVjdH1cbiAqL1xudmFyIG1hcFN0YXRlID0gbm9ybWFsaXplTmFtZXNwYWNlKGZ1bmN0aW9uIChuYW1lc3BhY2UsIHN0YXRlcykge1xuICB2YXIgcmVzID0ge307XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFpc1ZhbGlkTWFwKHN0YXRlcykpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbdnVleF0gbWFwU3RhdGU6IG1hcHBlciBwYXJhbWV0ZXIgbXVzdCBiZSBlaXRoZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0Jyk7XG4gIH1cbiAgbm9ybWFsaXplTWFwKHN0YXRlcykuZm9yRWFjaChmdW5jdGlvbiAocmVmKSB7XG4gICAgdmFyIGtleSA9IHJlZi5rZXk7XG4gICAgdmFyIHZhbCA9IHJlZi52YWw7XG5cbiAgICByZXNba2V5XSA9IGZ1bmN0aW9uIG1hcHBlZFN0YXRlICgpIHtcbiAgICAgIHZhciBzdGF0ZSA9IHRoaXMuJHN0b3JlLnN0YXRlO1xuICAgICAgdmFyIGdldHRlcnMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzO1xuICAgICAgaWYgKG5hbWVzcGFjZSkge1xuICAgICAgICB2YXIgbW9kdWxlID0gZ2V0TW9kdWxlQnlOYW1lc3BhY2UodGhpcy4kc3RvcmUsICdtYXBTdGF0ZScsIG5hbWVzcGFjZSk7XG4gICAgICAgIGlmICghbW9kdWxlKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUgPSBtb2R1bGUuY29udGV4dC5zdGF0ZTtcbiAgICAgICAgZ2V0dGVycyA9IG1vZHVsZS5jb250ZXh0LmdldHRlcnM7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IHZhbC5jYWxsKHRoaXMsIHN0YXRlLCBnZXR0ZXJzKVxuICAgICAgICA6IHN0YXRlW3ZhbF1cbiAgICB9O1xuICAgIC8vIG1hcmsgdnVleCBnZXR0ZXIgZm9yIGRldnRvb2xzXG4gICAgcmVzW2tleV0udnVleCA9IHRydWU7XG4gIH0pO1xuICByZXR1cm4gcmVzXG59KTtcblxuLyoqXG4gKiBSZWR1Y2UgdGhlIGNvZGUgd2hpY2ggd3JpdHRlbiBpbiBWdWUuanMgZm9yIGNvbW1pdHRpbmcgdGhlIG11dGF0aW9uXG4gKiBAcGFyYW0ge1N0cmluZ30gW25hbWVzcGFjZV0gLSBNb2R1bGUncyBuYW1lc3BhY2VcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBtdXRhdGlvbnMgIyBPYmplY3QncyBpdGVtIGNhbiBiZSBhIGZ1bmN0aW9uIHdoaWNoIGFjY2VwdCBgY29tbWl0YCBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgcGFyYW0sIGl0IGNhbiBhY2NlcHQgYW50aG9yIHBhcmFtcy4gWW91IGNhbiBjb21taXQgbXV0YXRpb24gYW5kIGRvIGFueSBvdGhlciB0aGluZ3MgaW4gdGhpcyBmdW5jdGlvbi4gc3BlY2lhbGx5LCBZb3UgbmVlZCB0byBwYXNzIGFudGhvciBwYXJhbXMgZnJvbSB0aGUgbWFwcGVkIGZ1bmN0aW9uLlxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG52YXIgbWFwTXV0YXRpb25zID0gbm9ybWFsaXplTmFtZXNwYWNlKGZ1bmN0aW9uIChuYW1lc3BhY2UsIG11dGF0aW9ucykge1xuICB2YXIgcmVzID0ge307XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFpc1ZhbGlkTWFwKG11dGF0aW9ucykpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbdnVleF0gbWFwTXV0YXRpb25zOiBtYXBwZXIgcGFyYW1ldGVyIG11c3QgYmUgZWl0aGVyIGFuIEFycmF5IG9yIGFuIE9iamVjdCcpO1xuICB9XG4gIG5vcm1hbGl6ZU1hcChtdXRhdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKHJlZikge1xuICAgIHZhciBrZXkgPSByZWYua2V5O1xuICAgIHZhciB2YWwgPSByZWYudmFsO1xuXG4gICAgcmVzW2tleV0gPSBmdW5jdGlvbiBtYXBwZWRNdXRhdGlvbiAoKSB7XG4gICAgICB2YXIgYXJncyA9IFtdLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgd2hpbGUgKCBsZW4tLSApIGFyZ3NbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gXTtcblxuICAgICAgLy8gR2V0IHRoZSBjb21taXQgbWV0aG9kIGZyb20gc3RvcmVcbiAgICAgIHZhciBjb21taXQgPSB0aGlzLiRzdG9yZS5jb21taXQ7XG4gICAgICBpZiAobmFtZXNwYWNlKSB7XG4gICAgICAgIHZhciBtb2R1bGUgPSBnZXRNb2R1bGVCeU5hbWVzcGFjZSh0aGlzLiRzdG9yZSwgJ21hcE11dGF0aW9ucycsIG5hbWVzcGFjZSk7XG4gICAgICAgIGlmICghbW9kdWxlKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgY29tbWl0ID0gbW9kdWxlLmNvbnRleHQuY29tbWl0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyB2YWwuYXBwbHkodGhpcywgW2NvbW1pdF0uY29uY2F0KGFyZ3MpKVxuICAgICAgICA6IGNvbW1pdC5hcHBseSh0aGlzLiRzdG9yZSwgW3ZhbF0uY29uY2F0KGFyZ3MpKVxuICAgIH07XG4gIH0pO1xuICByZXR1cm4gcmVzXG59KTtcblxuLyoqXG4gKiBSZWR1Y2UgdGhlIGNvZGUgd2hpY2ggd3JpdHRlbiBpbiBWdWUuanMgZm9yIGdldHRpbmcgdGhlIGdldHRlcnNcbiAqIEBwYXJhbSB7U3RyaW5nfSBbbmFtZXNwYWNlXSAtIE1vZHVsZSdzIG5hbWVzcGFjZVxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGdldHRlcnNcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xudmFyIG1hcEdldHRlcnMgPSBub3JtYWxpemVOYW1lc3BhY2UoZnVuY3Rpb24gKG5hbWVzcGFjZSwgZ2V0dGVycykge1xuICB2YXIgcmVzID0ge307XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFpc1ZhbGlkTWFwKGdldHRlcnMpKSB7XG4gICAgY29uc29sZS5lcnJvcignW3Z1ZXhdIG1hcEdldHRlcnM6IG1hcHBlciBwYXJhbWV0ZXIgbXVzdCBiZSBlaXRoZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0Jyk7XG4gIH1cbiAgbm9ybWFsaXplTWFwKGdldHRlcnMpLmZvckVhY2goZnVuY3Rpb24gKHJlZikge1xuICAgIHZhciBrZXkgPSByZWYua2V5O1xuICAgIHZhciB2YWwgPSByZWYudmFsO1xuXG4gICAgLy8gVGhlIG5hbWVzcGFjZSBoYXMgYmVlbiBtdXRhdGVkIGJ5IG5vcm1hbGl6ZU5hbWVzcGFjZVxuICAgIHZhbCA9IG5hbWVzcGFjZSArIHZhbDtcbiAgICByZXNba2V5XSA9IGZ1bmN0aW9uIG1hcHBlZEdldHRlciAoKSB7XG4gICAgICBpZiAobmFtZXNwYWNlICYmICFnZXRNb2R1bGVCeU5hbWVzcGFjZSh0aGlzLiRzdG9yZSwgJ21hcEdldHRlcnMnLCBuYW1lc3BhY2UpKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgISh2YWwgaW4gdGhpcy4kc3RvcmUuZ2V0dGVycykpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcigoXCJbdnVleF0gdW5rbm93biBnZXR0ZXI6IFwiICsgdmFsKSk7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbdmFsXVxuICAgIH07XG4gICAgLy8gbWFyayB2dWV4IGdldHRlciBmb3IgZGV2dG9vbHNcbiAgICByZXNba2V5XS52dWV4ID0gdHJ1ZTtcbiAgfSk7XG4gIHJldHVybiByZXNcbn0pO1xuXG4vKipcbiAqIFJlZHVjZSB0aGUgY29kZSB3aGljaCB3cml0dGVuIGluIFZ1ZS5qcyBmb3IgZGlzcGF0Y2ggdGhlIGFjdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IFtuYW1lc3BhY2VdIC0gTW9kdWxlJ3MgbmFtZXNwYWNlXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gYWN0aW9ucyAjIE9iamVjdCdzIGl0ZW0gY2FuIGJlIGEgZnVuY3Rpb24gd2hpY2ggYWNjZXB0IGBkaXNwYXRjaGAgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IHBhcmFtLCBpdCBjYW4gYWNjZXB0IGFudGhvciBwYXJhbXMuIFlvdSBjYW4gZGlzcGF0Y2ggYWN0aW9uIGFuZCBkbyBhbnkgb3RoZXIgdGhpbmdzIGluIHRoaXMgZnVuY3Rpb24uIHNwZWNpYWxseSwgWW91IG5lZWQgdG8gcGFzcyBhbnRob3IgcGFyYW1zIGZyb20gdGhlIG1hcHBlZCBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xudmFyIG1hcEFjdGlvbnMgPSBub3JtYWxpemVOYW1lc3BhY2UoZnVuY3Rpb24gKG5hbWVzcGFjZSwgYWN0aW9ucykge1xuICB2YXIgcmVzID0ge307XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFpc1ZhbGlkTWFwKGFjdGlvbnMpKSB7XG4gICAgY29uc29sZS5lcnJvcignW3Z1ZXhdIG1hcEFjdGlvbnM6IG1hcHBlciBwYXJhbWV0ZXIgbXVzdCBiZSBlaXRoZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0Jyk7XG4gIH1cbiAgbm9ybWFsaXplTWFwKGFjdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKHJlZikge1xuICAgIHZhciBrZXkgPSByZWYua2V5O1xuICAgIHZhciB2YWwgPSByZWYudmFsO1xuXG4gICAgcmVzW2tleV0gPSBmdW5jdGlvbiBtYXBwZWRBY3Rpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIHdoaWxlICggbGVuLS0gKSBhcmdzWyBsZW4gXSA9IGFyZ3VtZW50c1sgbGVuIF07XG5cbiAgICAgIC8vIGdldCBkaXNwYXRjaCBmdW5jdGlvbiBmcm9tIHN0b3JlXG4gICAgICB2YXIgZGlzcGF0Y2ggPSB0aGlzLiRzdG9yZS5kaXNwYXRjaDtcbiAgICAgIGlmIChuYW1lc3BhY2UpIHtcbiAgICAgICAgdmFyIG1vZHVsZSA9IGdldE1vZHVsZUJ5TmFtZXNwYWNlKHRoaXMuJHN0b3JlLCAnbWFwQWN0aW9ucycsIG5hbWVzcGFjZSk7XG4gICAgICAgIGlmICghbW9kdWxlKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgZGlzcGF0Y2ggPSBtb2R1bGUuY29udGV4dC5kaXNwYXRjaDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gdmFsLmFwcGx5KHRoaXMsIFtkaXNwYXRjaF0uY29uY2F0KGFyZ3MpKVxuICAgICAgICA6IGRpc3BhdGNoLmFwcGx5KHRoaXMuJHN0b3JlLCBbdmFsXS5jb25jYXQoYXJncykpXG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiByZXNcbn0pO1xuXG4vKipcbiAqIFJlYmluZGluZyBuYW1lc3BhY2UgcGFyYW0gZm9yIG1hcFhYWCBmdW5jdGlvbiBpbiBzcGVjaWFsIHNjb3BlZCwgYW5kIHJldHVybiB0aGVtIGJ5IHNpbXBsZSBvYmplY3RcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xudmFyIGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzID0gZnVuY3Rpb24gKG5hbWVzcGFjZSkgeyByZXR1cm4gKHtcbiAgbWFwU3RhdGU6IG1hcFN0YXRlLmJpbmQobnVsbCwgbmFtZXNwYWNlKSxcbiAgbWFwR2V0dGVyczogbWFwR2V0dGVycy5iaW5kKG51bGwsIG5hbWVzcGFjZSksXG4gIG1hcE11dGF0aW9uczogbWFwTXV0YXRpb25zLmJpbmQobnVsbCwgbmFtZXNwYWNlKSxcbiAgbWFwQWN0aW9uczogbWFwQWN0aW9ucy5iaW5kKG51bGwsIG5hbWVzcGFjZSlcbn0pOyB9O1xuXG4vKipcbiAqIE5vcm1hbGl6ZSB0aGUgbWFwXG4gKiBub3JtYWxpemVNYXAoWzEsIDIsIDNdKSA9PiBbIHsga2V5OiAxLCB2YWw6IDEgfSwgeyBrZXk6IDIsIHZhbDogMiB9LCB7IGtleTogMywgdmFsOiAzIH0gXVxuICogbm9ybWFsaXplTWFwKHthOiAxLCBiOiAyLCBjOiAzfSkgPT4gWyB7IGtleTogJ2EnLCB2YWw6IDEgfSwgeyBrZXk6ICdiJywgdmFsOiAyIH0sIHsga2V5OiAnYycsIHZhbDogMyB9IF1cbiAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBtYXBcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplTWFwIChtYXApIHtcbiAgaWYgKCFpc1ZhbGlkTWFwKG1hcCkpIHtcbiAgICByZXR1cm4gW11cbiAgfVxuICByZXR1cm4gQXJyYXkuaXNBcnJheShtYXApXG4gICAgPyBtYXAubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuICh7IGtleToga2V5LCB2YWw6IGtleSB9KTsgfSlcbiAgICA6IE9iamVjdC5rZXlzKG1hcCkubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuICh7IGtleToga2V5LCB2YWw6IG1hcFtrZXldIH0pOyB9KVxufVxuXG4vKipcbiAqIFZhbGlkYXRlIHdoZXRoZXIgZ2l2ZW4gbWFwIGlzIHZhbGlkIG9yIG5vdFxuICogQHBhcmFtIHsqfSBtYXBcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWRNYXAgKG1hcCkge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShtYXApIHx8IGlzT2JqZWN0KG1hcClcbn1cblxuLyoqXG4gKiBSZXR1cm4gYSBmdW5jdGlvbiBleHBlY3QgdHdvIHBhcmFtIGNvbnRhaW5zIG5hbWVzcGFjZSBhbmQgbWFwLiBpdCB3aWxsIG5vcm1hbGl6ZSB0aGUgbmFtZXNwYWNlIGFuZCB0aGVuIHRoZSBwYXJhbSdzIGZ1bmN0aW9uIHdpbGwgaGFuZGxlIHRoZSBuZXcgbmFtZXNwYWNlIGFuZCB0aGUgbWFwLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBub3JtYWxpemVOYW1lc3BhY2UgKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAobmFtZXNwYWNlLCBtYXApIHtcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIG1hcCA9IG5hbWVzcGFjZTtcbiAgICAgIG5hbWVzcGFjZSA9ICcnO1xuICAgIH0gZWxzZSBpZiAobmFtZXNwYWNlLmNoYXJBdChuYW1lc3BhY2UubGVuZ3RoIC0gMSkgIT09ICcvJykge1xuICAgICAgbmFtZXNwYWNlICs9ICcvJztcbiAgICB9XG4gICAgcmV0dXJuIGZuKG5hbWVzcGFjZSwgbWFwKVxuICB9XG59XG5cbi8qKlxuICogU2VhcmNoIGEgc3BlY2lhbCBtb2R1bGUgZnJvbSBzdG9yZSBieSBuYW1lc3BhY2UuIGlmIG1vZHVsZSBub3QgZXhpc3QsIHByaW50IGVycm9yIG1lc3NhZ2UuXG4gKiBAcGFyYW0ge09iamVjdH0gc3RvcmVcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWxwZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0TW9kdWxlQnlOYW1lc3BhY2UgKHN0b3JlLCBoZWxwZXIsIG5hbWVzcGFjZSkge1xuICB2YXIgbW9kdWxlID0gc3RvcmUuX21vZHVsZXNOYW1lc3BhY2VNYXBbbmFtZXNwYWNlXTtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIW1vZHVsZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoKFwiW3Z1ZXhdIG1vZHVsZSBuYW1lc3BhY2Ugbm90IGZvdW5kIGluIFwiICsgaGVscGVyICsgXCIoKTogXCIgKyBuYW1lc3BhY2UpKTtcbiAgfVxuICByZXR1cm4gbW9kdWxlXG59XG5cbnZhciBpbmRleF9lc20gPSB7XG4gIFN0b3JlOiBTdG9yZSxcbiAgaW5zdGFsbDogaW5zdGFsbCxcbiAgdmVyc2lvbjogJzMuMS4zJyxcbiAgbWFwU3RhdGU6IG1hcFN0YXRlLFxuICBtYXBNdXRhdGlvbnM6IG1hcE11dGF0aW9ucyxcbiAgbWFwR2V0dGVyczogbWFwR2V0dGVycyxcbiAgbWFwQWN0aW9uczogbWFwQWN0aW9ucyxcbiAgY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnM6IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzXG59O1xuXG5leHBvcnQgZGVmYXVsdCBpbmRleF9lc207XG5leHBvcnQgeyBTdG9yZSwgaW5zdGFsbCwgbWFwU3RhdGUsIG1hcE11dGF0aW9ucywgbWFwR2V0dGVycywgbWFwQWN0aW9ucywgY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMgfTtcbiIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsImV4cG9ydCBmdW5jdGlvbiBhc3NlcnQoXG4gIGNvbmRpdGlvbjogKCkgPT4gYm9vbGVhbixcbiAgbXNnID0gJycsIGVycm9yQ2xzID0gVHlwZUVycm9yKSB7XG4gIGlmICghY29uZGl0aW9uKCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JDbHMobXNnKVxuICB9XG59XG4iLCJpbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IElkLCBSZWxhdGlvbiB9IGZyb20gJy4vcmVsYXRpb24nO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8vIFJlbGF0aW9uIOOBruODl+ODreODkeODhuOCo+OCkue1jOeUseOBl+OBn+WIpeOBriBSZWxhdGlvbiDjgbjjga4gZ2V0dGVyXG4gIGdldDxTLCBSPih0YXJnZXQ6IFJlbGF0aW9uPFMsIFI+LCBuYW1lOiBzdHJpbmcpIHtcbiAgICBpZiAobmFtZSBpbiB0YXJnZXQpIHtcbiAgICAgIC8vIOmAmuW4uOOBruODl+ODreODkeODhuOCo+OBuOOBruOCouOCr+OCu+OCuVxuICAgICAgcmV0dXJuIHRhcmdldFtuYW1lXTtcbiAgICB9XG5cbiAgICBpZiAodGFyZ2V0LmRhdGEpIHtcbiAgICAgIGlmIChuYW1lID09PSAnbGVuZ3RoJykge1xuICAgICAgICAvLyDlrZjlnKjjg4Hjgqfjg4Pjgq/lkJHjgZHjgasgbGVuZ3RoIOOBr+acgOWEquWFiOOBp+i/lOOBmVxuICAgICAgICByZXR1cm4gdGFyZ2V0LmRhdGEubGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRhcmdldC5kYXRhW25hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIOmFjeWIl+OBruODoeOCveODg+ODieOBp+OCouOCr+OCu+OCueOBleOCjOOBn+OBqOOBjeOBryB0YXJnZXQuZGF0YSDjgavnp7vorbLjgZnjgotcbiAgICAgICAgLy8gdGFyZ2V0LmRhdGEg44GM56m644Gu5aC05ZCI44KCIHRhcmdldC5kYXRhIOOBruepuumFjeWIl+OBq+WHpueQhuOCklxuICAgICAgICAvLyDnp7vorbLjgZfjgZ/jgYTjga7jgafjgIHkuIvjga7nqbogUmVsYXRpb24g44Gu5Yik5a6a44Gu5YmN44Gr6L+U44GZXG4gICAgICAgIHJldHVybiB0YXJnZXQuZGF0YVtuYW1lXS5iaW5kKHRhcmdldC5kYXRhKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0YXJnZXQuZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgLy8g44Oh44K944OD44OJ44OB44Kn44Kk44Oz44GM44GT44GR44Gq44GE44KI44GG44Gr56m644GuIFJlbGF0aW9uIOOCkui/lOOBmVxuICAgICAgICByZXR1cm4gbmV3IFJlbGF0aW9uKFtdLCB0YXJnZXQucm9vdCwgbmFtZSwgbnVsbCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChuYW1lIGluIHRhcmdldC5kYXRhWzBdKSB7XG4gICAgICAgIC8vIOWtkOS+m+OBruWVj+OBhOWQiOOCj+OBm1xuICAgICAgICByZXR1cm4gY2hpbGRSZWxhdGlvbih0YXJnZXQsIG5hbWUpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGhhc0FuZEJlbG9uZ3NUb01hbnkgPSB0YXJnZXQuaGFzQW5kQmVsb25nc1RvTWFueVxuICAgICAgICAmJiB0YXJnZXQuaGFzQW5kQmVsb25nc1RvTWFueVtuYW1lXTtcblxuICAgICAgaWYgKGhhc0FuZEJlbG9uZ3NUb01hbnkpIHtcbiAgICAgICAgLy8gaGFzQW5kQmVsb25nc1RvTWFueSDjga7llY/jgYTlkIjjgZtcbiAgICAgICAgcmV0dXJuIGhhc0FuZEJlbG9uZ3NUb01hbnlSZWxhdGlvbih0YXJnZXQsIG5hbWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNJbmRleE5hbWUobmFtZSkpIHtcbiAgICAgICAgLy8g44Kk44Oz44OH44OD44Kv44K5IGxpa2Ug44Gq5ZCN5YmN44Gu44Go44GN44Gv6YWN5YiX44G444Gu44Ki44Kv44K744K544KS55yf5Ly844KLXG4gICAgICAgIHJldHVybiB0YXJnZXQuZGF0YVtuYW1lXVxuICAgICAgfVxuICAgIH1cblxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYOefpeOCieOCk+OBjOOBqjogJHtuYW1lfS5gKVxuICB9LFxufTtcblxuZnVuY3Rpb24gaXNJbmRleE5hbWUobmFtZTogc3RyaW5nKSB7XG4gIHJldHVybiAvXFxkKy8udGVzdChuYW1lKTtcbn1cblxuZnVuY3Rpb24gY2hpbGRSZWxhdGlvbjxTLCBSPihcbiAgcmVsYXRpb246IFJlbGF0aW9uPFMsIFI+LCBjaGlsZE5hbWU6IHN0cmluZykge1xuICAvLyDplqLpgKPjga7jgYLjgosgcmVsYXRpb24g44Gr5a++44GZ44KL5ZWP5ZCI44GbXG4gIGNvbnN0IHsgc3RhdGU6IHJvb3RTdGF0ZSB9ID0gcmVsYXRpb24ucm9vdDtcbiAgY29uc3QgY2hpbGRTdGF0ZSA9IHJvb3RTdGF0ZVtjaGlsZE5hbWVdO1xuXG4gIGFzc2VydCgoKSA9PiAhIWNoaWxkU3RhdGUpO1xuXG4gIGNvbnN0IGNoaWxkcmVuID0gcmVsYXRpb24uZGF0YVxuICAgIC5mbGF0TWFwKHggPT4geFtjaGlsZE5hbWVdKVxuICAgIC5tYXAoaWQgPT4gY2hpbGRTdGF0ZS5ieUlkc1tpZF0pO1xuICBjb25zdCBoYXNBbmRCZWxvbmdzVG9NYW55T3B0aW9uID1cbiAgICByb290U3RhdGVbY2hpbGROYW1lXS5oYXNBbmRCZWxvbmdzVG9NYW55O1xuXG4gIHJldHVybiBuZXcgUmVsYXRpb24oXG4gICAgY2hpbGRyZW4sIHJlbGF0aW9uLnJvb3QsIGNoaWxkTmFtZSxcbiAgICBoYXNBbmRCZWxvbmdzVG9NYW55T3B0aW9uKTtcbn1cblxuZnVuY3Rpb24gaGFzQW5kQmVsb25nc1RvTWFueVJlbGF0aW9uPFMsIFI+KFxuICByZWxhdGlvbjogUmVsYXRpb248UywgUj4sIGNoaWxkTmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IHsgc3RhdGU6IHJvb3RTdGF0ZSB9ID0gcmVsYXRpb24ucm9vdDtcbiAgY29uc3QgaGFzQW5kQmVsb25nc1RvTWFueSA9IHJlbGF0aW9uLmhhc0FuZEJlbG9uZ3NUb01hbnlcbiAgICAmJiByZWxhdGlvbi5oYXNBbmRCZWxvbmdzVG9NYW55W2NoaWxkTmFtZV07XG5cbiAgYXNzZXJ0KCgpID0+ICEhaGFzQW5kQmVsb25nc1RvTWFueSk7XG5cbiAgY29uc3Qge1xuICAgIGFzc29jaWF0aW9uRm9yZWlnbktleSxcbiAgICBmb3JlaWduS2V5LFxuICAgIGpvaW5OYW1lLFxuICAgIHRoZWlyTmFtZSxcbiAgfSA9IGhhc0FuZEJlbG9uZ3NUb01hbnk7XG4gIGNvbnN0IGludGVybWVkaWF0ZVN0YXRlID0gcm9vdFN0YXRlW2pvaW5OYW1lXTtcbiAgY29uc3QgY2hpbGRTdGF0ZSA9IHJvb3RTdGF0ZVt0aGVpck5hbWVdO1xuXG4gIGFzc2VydCgoKSA9PiAhIWludGVybWVkaWF0ZVN0YXRlICYmICEhY2hpbGRTdGF0ZSk7XG5cbiAgY29uc3QgaW50ZXJtZWRpYXRlcyA9IE9iamVjdC52YWx1ZXMoaW50ZXJtZWRpYXRlU3RhdGUuYnlJZHMpXG4gIGNvbnN0IGNoaWxkcmVuID0gcmVsYXRpb24uZGF0YVxuICAgIC5mbGF0TWFwKHggPT4ge1xuICAgICAgLy8gRklYTUU6IOOBk+OBk+OBteOBpOOBhuOBqyBPKE5eMikg44Gq5rCX44GM44GZ44KL4oCmXG4gICAgICByZXR1cm4gaW50ZXJtZWRpYXRlcy5maWx0ZXIoeSA9PiB5W2ZvcmVpZ25LZXldID09PSB4LmlkKVxuICAgIH0pXG4gICAgLm1hcCh4ID0+IHtcbiAgICAgIHJldHVybiBjaGlsZFN0YXRlLmJ5SWRzW3hbYXNzb2NpYXRpb25Gb3JlaWduS2V5XV07XG4gICAgfSk7XG5cbiAgY29uc3QgaGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbiA9XG4gICAgcm9vdFN0YXRlW3RoZWlyTmFtZV0uaGFzQW5kQmVsb25nc1RvTWFueTtcblxuICByZXR1cm4gbmV3IFJlbGF0aW9uKFxuICAgIGNoaWxkcmVuLCByZWxhdGlvbi5yb290LCB0aGVpck5hbWUsXG4gICAgaGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbik7XG59XG4iLCJpbXBvcnQgeyBNb2R1bGUgfSBmcm9tICd2dWV4JztcblxuaW1wb3J0IEZvcmVpZ25RdWVyaWFibGUgZnJvbSAnLi9mb3JlaWduLXF1ZXJpYWJsZSc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IHR5cGUgSWQgPSBudW1iZXIgfCBzdHJpbmc7XG5cbmV4cG9ydCB0eXBlIEFsbElkcyA9IEFycmF5PElkPjtcblxuZXhwb3J0IGludGVyZmFjZSBOb3JtYWxpemVkUmVsYXRpb25FbnRyeSB7XG4gIGlkOiBJZDtcbn1cblxuLy8gc3RhdGUg44GuIGBieUlkcycg44Gr44GvIElkIOWei+OCreODvOOCkuacn+W+heOBmeOCi1xuLy8g44G+44GfIGBieUlkc2Ag44Gr44GvIGBpZGAg44KS44OX44Ot44OR44OG44Kj44Gr5ZCr44KA44Kq44OW44K444Kn44Kv44OI44KS5pyf5b6F44GZ44KLXG5leHBvcnQgdHlwZSBCeUlkcyA9IHtcbiAgW2lkIGluIElkXTogTm9ybWFsaXplZFJlbGF0aW9uRW50cnlcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbiB7XG4gIFtrZXk6IHN0cmluZ106IHtcbiAgICBhc3NvY2lhdGlvbkZvcmVpZ25LZXk/OiBzdHJpbmcsXG4gICAgZm9yZWlnbktleT86IHN0cmluZyxcbiAgICBqb2luTmFtZT86IHN0cmluZyxcbiAgICB0aGVpck5hbWU/OiBzdHJpbmcsXG4gIH07XG59XG5cbi8vIOmWoumAo1xuZXhwb3J0IGludGVyZmFjZSBSZWxhdGlvbjxTLCBSPlxuICBleHRlbmRzIEl0ZXJhYmxlPE5vcm1hbGl6ZWRSZWxhdGlvbkVudHJ5PiB7XG4gIG5hbWU6IHN0cmluZztcbiAgcm9vdDogTW9kdWxlPFMsIFI+O1xuICBkYXRhOiBBcnJheTxOb3JtYWxpemVkUmVsYXRpb25FbnRyeT47XG4gIGhhc0FuZEJlbG9uZ3NUb01hbnk6IEhhc0FuZEJlbG9uZ3NUb01hbnlPcHRpb247XG59XG5cbi8vIOmWoumAo1xuZXhwb3J0IGNsYXNzIFJlbGF0aW9uQmFzZTxTLCBSPiBpbXBsZW1lbnRzIFJlbGF0aW9uPFMsIFI+IHtcbiAgbmFtZTogc3RyaW5nO1xuICByb290OiBNb2R1bGU8UywgUj47XG4gIGRhdGE6IEFycmF5PE5vcm1hbGl6ZWRSZWxhdGlvbkVudHJ5PjtcbiAgaGFzQW5kQmVsb25nc1RvTWFueTogSGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbjtcbiAgbmV4dElkeDogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhOiBBcnJheTxOb3JtYWxpemVkUmVsYXRpb25FbnRyeT4sXG4gICAgcm9vdE1vZHVsZTogTW9kdWxlPFMsIFI+LFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBoYXNBbmRCZWxvbmdzVG9NYW55OiBIYXNBbmRCZWxvbmdzVG9NYW55T3B0aW9uKSB7XG5cbiAgICBhc3NlcnQoKCkgPT4gQXJyYXkuaXNBcnJheShkYXRhKSxcbiAgICAgICAgICAgYCR7ZGF0YX0gbXVzdCBiZSB0eXBlIEFycmF5LmApXG5cbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMucm9vdCA9IHJvb3RNb2R1bGU7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLmhhc0FuZEJlbG9uZ3NUb01hbnkgPSBoYXNBbmRCZWxvbmdzVG9NYW55O1xuICB9XG5cbiAgLy8g44Kk44OG44Os44O844K/44Kk44Oz44K/44O844OV44Kn44O844K5XG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gdGhpcztcbiAgICBsZXQgeyBuZXh0SWR4IH0gPSB0aGlzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHQoKSB7XG4gICAgICAgIGxldCB2YWx1ZTogYW55O1xuXG4gICAgICAgIGlmIChuZXh0SWR4IDwgZGF0YS5sZW5ndGhcbiAgICAgICAgICAgICYmICh2YWx1ZSA9IGRhdGFbbmV4dElkeF0pKSB7XG4gICAgICAgICAgbmV4dElkeCArPSAxO1xuICAgICAgICAgIHJldHVybiB7IHZhbHVlLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7IHZhbHVlLCBkb25lOiB0cnVlIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFRPRE86IOOCguOBo+OBqOODoeOCveODg+ODieWFheWun+OBl+OBvuOBl+OCh+OBhlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmFpbHMvcmFpbHMvYmxvYi9tYXN0ZXIvYWN0aXZlcmVjb3JkL2xpYi9hY3RpdmVfcmVjb3JkL3JlbGF0aW9uL2NhbGN1bGF0aW9ucy5yYlxuXG4gIHBsdWNrKGtleXM6IEFycmF5PHN0cmluZz4pIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmZsYXRNYXAociA9PiB7XG4gICAgICByZXR1cm4ga2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoe1xuICAgICAgICAuLi5hY2MsXG4gICAgICAgIFtrZXldOiByW2tleV0sXG4gICAgICB9KSwge30pXG4gICAgfSk7XG4gIH1cblxuICBpZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5tYXAociA9PiByLmlkKVxuICB9XG59XG5cbi8vIOWun+mam+OBriBSZWxhdGlvbiDjgq/jg6njgrlcbi8vIFJlbGF0aW9uQmFzZSArIEZvcmVpZ25RdWVyaWFibGVcbmV4cG9ydCBjbGFzcyBSZWxhdGlvbjxTLCBSPiB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGE6IEFycmF5PE5vcm1hbGl6ZWRSZWxhdGlvbkVudHJ5PixcbiAgICByb290TW9kdWxlOiBNb2R1bGU8UywgUj4sXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGhhc0FuZEJlbG9uZ3NUb01hbnk6IEhhc0FuZEJlbG9uZ3NUb01hbnlPcHRpb24pIHtcbiAgICBjb25zdCB4ID0gbmV3IFJlbGF0aW9uQmFzZTxTLCBSPihcbiAgICAgIGRhdGEsIHJvb3RNb2R1bGUsIG5hbWUsIGhhc0FuZEJlbG9uZ3NUb01hbnkpO1xuICAgIHJldHVybiAobmV3IFByb3h5KHgsIEZvcmVpZ25RdWVyaWFibGUpIGFzIFJlbGF0aW9uPFMsIFI+KTtcbiAgfVxufVxuIiwiaW1wb3J0IFZ1ZXgsIHsgU3RvcmUsIFN0b3JlT3B0aW9ucyB9IGZyb20gXCJ2dWV4XCI7XG5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHtcbiAgQWxsSWRzLFxuICBCeUlkcyxcbiAgSGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbixcbiAgSWQsXG4gIFJlbGF0aW9uLFxufSBmcm9tICcuL3JlbGF0aW9uJ1xuXG4vLyDjgZPjga7jg5fjg6njgrDjgqTjg7Ncbi8vIHN0b3JlIOOBriBgaW5zdGFudHNgIOODleOCo+ODvOODq+ODieOBqyBnZXR0ZXIgbGlrZSDjgarjg6Hjgr3jg4Pjg4njgpJcbi8vIOeUqOaEj+OBl+OBpuOBiuOBj+OBqOOAgWBjYXB0dXJlYCDjgYvjgonlkbzjgbPjgaDjgZvjgovjgIJcbi8vIOaXouWtmOOBriBgaW5zdGFudHNgIOOBqOOBl+OBpuOBr+OAgWBmaW5kQnlgIOOChCBgd2hlcmVgIOOBquOBqeOBjOOBguOCi1xuLy8gICAgIHRoaXMuJHN0b3JlLmNhcHR1cmUoJ3VzZXJzL3doZXJlJywgeyBpZDogMTExIH0pXG5pbnRlcmZhY2UgSW5zdGFudHNQbHVnaW48UywgUj4gZXh0ZW5kcyBTdG9yZTxTPiB7XG4gIGNhcHR1cmU6IENhcHR1cmU8UywgUj47XG59XG5cbi8vIFNlZTogaHR0cHM6Ly9yZWR1eC5qcy5vcmcvcmVjaXBlcy9zdHJ1Y3R1cmluZy1yZWR1Y2Vycy9ub3JtYWxpemluZy1zdGF0ZS1zaGFwZVxuaW50ZXJmYWNlIE5vcm1hbGl6ZWRTdGF0ZSB7XG4gIGFsbElkczogQWxsSWRzO1xuICBieUlkczogQnlJZHM7XG4gIGhhc0FuZEJlbG9uZ3NUb01hbnk6IEhhc0FuZEJlbG9uZ3NUb01hbnlPcHRpb25cbn1cblxuaW50ZXJmYWNlIENhcHR1cmU8Tm9ybWFsaXplZFN0YXRlLCBSPiB7XG4gICh0eXBlOiBzdHJpbmcsIHBheWxvYWQ/OiBhbnkpOlxuICBvYmplY3QgfCBSZWxhdGlvbjxOb3JtYWxpemVkU3RhdGUsIFI+O1xufVxuXG5pbnRlcmZhY2UgTm9ybWFsaXplZFN0b3JlT3B0aW9uczxTPiBleHRlbmRzIFN0b3JlT3B0aW9uczxTPiB7XG4gIC8vIGBpbnN0YW50cycgbWF5IGNhcHR1cmUgc25hcHNob3Qgb2Ygc3RvcmUncyBzdGF0ZVxuICAvLyB2aWEgcHVzZXVkby1SYWlscydzIEFjdGl2ZVJlY29yZCBsaWtlIEFQSXMuXG4gIGluc3RhbnRzPzogYW55O1xufVxuXG4vLyBUT0RPOiDjgoLjgaPjgajmi6HlvLXjgZfjgZ/jgYTjgapcbnR5cGUgV2hlcmVDb25kID0geyBba2V5OiBzdHJpbmddOiBhbnkgfTtcblxuaW50ZXJmYWNlIFdoZXJlIHtcbiAgKGFsbElkczogQWxsSWRzLCBieUlkczogQnlJZHMsIGNvbmQ6IFdoZXJlQ29uZClcbiAgOiBBcnJheTxhbnk+O1xufVxuXG5mdW5jdGlvbiBpbmplY3RJbnN0YW50czxTPihvcHRpb25zOiBOb3JtYWxpemVkU3RvcmVPcHRpb25zPFM+KSB7XG4gIGlmICghb3B0aW9ucykge1xuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKG9wdGlvbnMuaW5zdGFudHMpIHtcbiAgICBvcHRpb25zLmdldHRlcnMgPSBvcHRpb25zLmdldHRlcnMgfHwge31cbiAgICBvcHRpb25zLmdldHRlcnMgPSB7IC4uLm9wdGlvbnMuZ2V0dGVycywgLi4ub3B0aW9ucy5pbnN0YW50cyB9XG4gIH1cblxuICBpZiAob3B0aW9ucy5tb2R1bGVzKSB7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBPYmplY3QudmFsdWVzKG9wdGlvbnMubW9kdWxlcykpIHtcbiAgICAgIGluamVjdEluc3RhbnRzKGNoaWxkKVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkZWZpbmVEZWZhdWx0SW5zdGFudHM8Uz4oXG4gIG9wdGlvbnM6IE5vcm1hbGl6ZWRTdG9yZU9wdGlvbnM8Uz4pIHtcbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBvcHRpb25zLmluc3RhbnRzID0geyAuLi5kZWZhdWx0SW5zdGFudHMsIC4uLm9wdGlvbnMuaW5zdGFudHMgfVxuXG4gIGlmIChvcHRpb25zLm1vZHVsZXMpIHtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIE9iamVjdC52YWx1ZXMob3B0aW9ucy5tb2R1bGVzKSkge1xuICAgICAgZGVmaW5lRGVmYXVsdEluc3RhbnRzKGNoaWxkKVxuICAgIH1cbiAgfVxufVxuXG4vLyBJbnN0YWxsIHZ1ZS1pbnN0YW50cy1wbHVnaW4uXG4vL1xuLy8gVGhpcyBwbHVnaW4gd291bGQgcHJvdmlkZSBgY2FwdHVyZWAgb24gYCRzdG9yZWAuXG4vLyBTdG9yZSBpcyBhc3N1bWVkIHRvIGJlIGNvbXBsaWFudCB0b1xuLy8g4oCcTm9ybWFsaXplZCBTdGF0ZSBTaGFwZSBDb25zdGl0dXRpb27igJ06XG4vLyAgIGh0dHBzOi8vcmVkdXguanMub3JnL3JlY2lwZXMvc3RydWN0dXJpbmctcmVkdWNlcnMvbm9ybWFsaXppbmctc3RhdGUtc2hhcGVcbi8vIGFuZCBpZiBzbywgeW91IGNhbiBxdWVyeSB0byB5b3VyIHN0YXRlIGJ5IHBzZXVkbyBSYWlscy1saWtlIG1ldGhvZHMuXG4vL1xuLy8gUGxlYXNlIHNlZSBleGFtcGxlLmpzIHRvIGtub3cgaG93IHRvIHVzZSB0aGlzIHBsdWdpbi5cbmZ1bmN0aW9uIGluc3RhbGw8UywgUj4oKSB7XG4gIGNvbnN0IHZ1ZXggPSB3aW5kb3cuVnVleCB8fCBWdWV4O1xuXG4gIC8vIFBhdGNoIGBWdWV4LlN0b3JlYCB0byBpbmplY3QgSW5zdGFudHMuXG4gIHZ1ZXguU3RvcmUgPSBjbGFzcyBJbnN0YW50c0luamVjdG9yPFM+IGV4dGVuZHMgdnVleC5TdG9yZTxTPiB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogU3RvcmVPcHRpb25zPFM+KSB7XG4gICAgICBkZWZpbmVEZWZhdWx0SW5zdGFudHMob3B0aW9ucylcbiAgICAgIGluamVjdEluc3RhbnRzKG9wdGlvbnMpXG4gICAgICBzdXBlcihvcHRpb25zKVxuICAgIH1cbiAgfTtcblxuICAvLyBgY2FwdHVyZWBcbiAgKDxJbnN0YW50c1BsdWdpbjxTLCBSPiA+IHZ1ZXguU3RvcmUucHJvdG90eXBlKS5jYXB0dXJlID1cbiAgICBmdW5jdGlvbih0eXBlLCBwYXlsb2FkKSB7XG4gICAgICBhc3NlcnQoKCkgPT4gKCF0aGlzLmluc3RhbnRzIHx8IHR5cGUgaW4gdGhpcy5pbnN0YW50cyksIGBcbiR7dHlwZX0gaXMgbm90IGRlZmluZWQgaW4gc3RvcmUuaW5zdGFucy5cblxuRG9uJ3QgeW91IGZvcmdldCBhZGRpbmcgJHt0eXBlfSBpbiBzdG9yZS5pbnN0YW5zP1xuYCk7XG5cbiAgICAgIGNvbnN0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKFxuICAgICAgICB0aGlzLmdldHRlcnMsIHR5cGUpO1xuXG4gICAgICBhc3NlcnQoKCkgPT4gISFkZXNjICYmICEhZGVzYy5nZXQsIGBVbmtub3duIGdldHRlciwgJHt0eXBlfWApO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSAgZGVzYy5nZXQuY2FsbCh0aGlzKShwYXlsb2FkKTtcbiAgICAgIGNvbnN0IG5hbWUgPSBteU5hbWUodHlwZSk7XG4gICAgICAvLyBUT0RPOiBGb3JlaWduUXVlcmlhYmxlIOOBp+OCguS9v+OBhuOBruOBp+OBquOCk+OBi+mWouaVsOOBjeOCjeOBhlxuICAgICAgY29uc3QgaGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbiA9IHRoaXMuc3RhdGVbbmFtZV0uaGFzQW5kQmVsb25nc1RvTWFueVxuXG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShyZXN1bHQpXG4gICAgICAgID8gbmV3IFJlbGF0aW9uKHJlc3VsdCwgdGhpcywgbmFtZSwgaGFzQW5kQmVsb25nc1RvTWFueU9wdGlvbilcbiAgICAgICAgOiByZXN1bHQ7XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBpbnN0YWxsXG59O1xuXG5jb25zdCB3aGVyZTogV2hlcmUgPSBmdW5jdGlvbihhbGxJZHMsIGJ5SWRzLCBjb25kKSB7XG4gIHJldHVybiBhbGxJZHNcbiAgICAuZmlsdGVyKGlkID0+IHtcbiAgICAgIGNvbnN0IG9iaiA9IGJ5SWRzW2lkXTtcblxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29uZCkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGlmICghdmFsdWUob2JqKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChvYmpba2V5XSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSlcbiAgICAubWFwKGlkID0+IGJ5SWRzW2lkXSk7XG59XG5cbi8vIERlZmF1bHRseSBpbmplY3RlZCBJbnN0YW50cyhxdWVyeSBtZXRob2RzKS5cbi8vIE1ldGhvZHMgd291bGQgYmUgY29tcGxpYW50IHRvIGByYWlscy9hY3RpdmVyZWNvcmRgLlxuY29uc3QgZGVmYXVsdEluc3RhbnRzID0ge1xuICBhbGw6ICh7IGJ5SWRzIH0pID0+ICgpID0+IHtcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhieUlkcyk7XG4gIH0sXG5cbiAgd2hlcmU6ICh7IGFsbElkcywgYnlJZHMgfSkgPT4gKGNvbmQ6IFdoZXJlQ29uZCkgPT4ge1xuICAgIHJldHVybiB3aGVyZShhbGxJZHMsIGJ5SWRzLCBjb25kKVxuICB9LFxuXG4gIGZpbmRCeTogKHsgYWxsSWRzLCBieUlkcyB9KSA9PiAoY29uZDogV2hlcmVDb25kKSA9PiB7XG4gICAgY29uc3QgZGF0YSA9IHdoZXJlKGFsbElkcywgYnlJZHMsIGNvbmQpXG4gICAgYXNzZXJ0KCgpID0+IGRhdGEgJiYgZGF0YVswXSwgJ1JlY29yZCBub3QgZm91bmQuJylcbiAgICByZXR1cm4gZGF0YVswXVxuICB9LFxuXG4gIGZpbmQ6ICh7IGJ5SWRzIH0pID0+IChpZDogSWQpID0+IHtcbiAgICBjb25zdCBvYmogPSBieUlkc1tpZF1cbiAgICBhc3NlcnQoKCkgPT4gISFvYmosIGBub3QgZm91bmQgJHtpZH1gKVxuICAgIHJldHVybiBvYmpcbiAgfSxcblxuICAvLyBUT0RPOiBBZGQgbWV0aG9kcywgYWxsLCB3aGVyZSwgLi4uLCBldGMuXG59XG5cbi8vIFV0aWxzLlxuXG4vLyBgU3RvcmUucHJvdG90eXBlLmNhcHR1cmVgIOOBruesrOS4gOW8leaVsOOBi+OCieOAgWNhcHR1cmUg44Gu5a++6LGh44Gu5ZCN5YmN44KS5rGC44KB44Gf44GEXG4vLyBGSVhNRTog44GT44GT44CB44Go44Gm44KCIGZyYWdpbGUg44Gq44Gu44Gn55u044GX44Gf44GEXG4vLyDjgZ3jgoLjgZ3jgoIgdHlwZSDjgYvjgonmsYLjgoHjgovjgZPjgajoh6rkvZPjgYwgbm9uc2Vuc2Ug44Gq44Gu44GL44Gq77yfXG5mdW5jdGlvbiBteU5hbWUodHlwZTogc3RyaW5nKSB7XG4gIGNvbnN0IHBhdGggPSB0eXBlLnNwbGl0KCcvJykuc2xpY2UoMCwgLTEpXG4gIHJldHVybiBwYXRoW3BhdGgubGVuZ3RoIC0gMV1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=